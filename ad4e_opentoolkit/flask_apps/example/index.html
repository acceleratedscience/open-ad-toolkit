<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<link rel="stylesheet" href="css/carbon.css" />
		<link rel="stylesheet" href="css/main.css" />
		<style>
			input {
				margin: 10px 0;
			}
		</style>
		<script>
			// Create a new XMLHttpRequest object
			var xhr = new XMLHttpRequest()

			function submitAjax() {
				console.log(333, 'submitAjax')

				// Assemble data
				data = {}
				data[document.getElementById('someAjaxInput').id] = document.getElementById('someAjaxInput').value
				console.log('Submitted data: ', data)

				// Define the request method and URL.
				xhr.open('POST', '/submit-ajax', true)

				// Set up a callback function to handle the response.
				xhr.onload = function () {
					if (xhr.status === 200) {
						// Success
						alert(`Success! You submitted: "${data['someAjaxInput']}"\nReturned value: "${xhr.response}"`)
					} else {
						// Error
						alert('Submit request failed with status code ' + xhr.status)
					}
				}

				// Send the request
				xhr.send(JSON.stringify(data))

				// Make sure the form is not submitted via the native channel.
				return false
			}
		</script>
	</head>
	<body>
		<h1>Example Flask App</h1>
		<br />
		<p>This is a simple flask application to demonstrate the architecture without bloat.</p>
		<p>You can have multiple pages per app, for example <a href="/foo">Foo</a> and <a href="/bar">Bar</a>.</p>
		<p>You can also submit data:</p>

		<ol>
			<li>Using a regular form:</li>
			<form method="POST" action="/submit">
				<input type="text" name="someInput" value="hello world" /><br />
				<button>SUBMIT</button>
			</form>
		</ol>
		<ol>
			<li>Using an ajax request:</li>
			<form onsubmit="submitAjax(); return false">
				<input type="text" id="someAjaxInput" value="hello ajax world" /><br />
				<button>SUBMIT</button>
			</form>
		</ol>
	</body>
</html>
