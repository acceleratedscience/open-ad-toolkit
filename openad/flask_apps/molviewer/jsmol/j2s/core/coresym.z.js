(function(ua,va,wa,xa,E,ya,aa,S,X,L,P,u,za,C,Aa,ea,I,Y,y,Ba,ha,pa,Ca,Da,qa,ra,Ea,ia,sa,ta,Q,Fa,Ga,ka,Ha,Ia,Ja,Ka,oa,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,ab,bb,cb,e,m){aa("J.adapter.smarter");X(["JU.P3","$.SB"],"J.adapter.smarter.XtalSymmetry","java.lang.Boolean $.Character $.Float java.util.Hashtable JU.BS $.Lst $.M3 $.M4 $.P3i $.PT $.V3 J.adapter.smarter.Atom JS.Symmetry $.SymmetryOperation JU.BSUtil $.SimpleUnitCell".split(" "),function(){c$=P(function(){this.sym2=this.baseSymmetry=this.asc=
this.acr=null;this.doCentroidUnitCell=this.centroidPacked=this.applySymmetryToBonds=!1;this.doNormalize=!0;this.latticeOnly=this.doPackUnitCell=!1;this.unitCellTranslations=this.latticeCells=this.baseUnitCell=this.unitCellParams=this.trajectoryUnitCells=null;this.packingError=this.symmetryRange=0;this.bondsFound=this.filterSymop=null;this.ndims=3;this.nVib=this.noSymmetryCount=this.latticeOp=this.firstAtom=0;this.mTemp=this.ptTemp=null;this.rmaxz=this.rmaxy=this.rmaxx=this.rminz=this.rminy=this.rminx=
0;this.maxXYZ0=this.minXYZ0=this.maxXYZ=this.minXYZ=this.ptOffset=null;this.checkAll=!1;this.bondCount0=0;this.disorderMap=this.symmetry=null;this.disorderMapMax=0;L(this,arguments)},J.adapter.smarter,"XtalSymmetry");ha(c$,function(){this.unitCellParams=y(6,0);this.bondsFound=new JU.SB;this.ptOffset=new JU.P3});C(c$,function(){});e(c$,"set",function(a){this.acr=a;this.asc=a.asc;this.getSymmetry();return this},"J.adapter.smarter.AtomSetCollectionReader");e(c$,"getSymmetry",function(){return null==
this.symmetry?this.symmetry=this.acr.getInterface("JS.Symmetry"):this.symmetry});e(c$,"setSymmetry",function(a){return this.symmetry=a},"J.api.SymmetryInterface");e(c$,"setSymmetryRange",function(a){this.symmetryRange=a;this.asc.setInfo("symmetryRange",Float.$valueOf(a))},"~N");e(c$,"setLatticeCells",function(){this.latticeCells=this.acr.latticeCells;var a=555>=this.latticeCells[0]&&555<=this.latticeCells[1]&&(0==this.latticeCells[2]||1==this.latticeCells[2]||-1==this.latticeCells[2]);this.doNormalize=
0!=this.latticeCells[0]&&(!a||1==this.latticeCells[2]);this.applySymmetryToBonds=this.acr.applySymmetryToBonds;this.doPackUnitCell=this.acr.doPackUnitCell&&!this.applySymmetryToBonds;this.doCentroidUnitCell=this.acr.doCentroidUnitCell;this.centroidPacked=this.acr.centroidPacked;this.filterSymop=this.acr.filterSymop});e(c$,"setUnitCell",function(a,b,c){this.unitCellParams=y(a.length,0);for(var d=0;d<a.length;d++)this.unitCellParams[d]=a[d];this.asc.haveUnitCell=!0;this.asc.setCurrentModelInfo("unitCellParams",
this.unitCellParams);this.asc.isTrajectory&&(null==this.trajectoryUnitCells&&(this.trajectoryUnitCells=new JU.Lst,this.asc.setInfo("unitCells",this.trajectoryUnitCells)),this.trajectoryUnitCells.addLast(this.unitCellParams));this.asc.setGlobalBoolean(2);this.getSymmetry().setUnitCell(this.unitCellParams,!1);null!=c&&(this.symmetry.setOffsetPt(c),this.asc.setCurrentModelInfo("unitCellOffset",c));null!=b&&(this.symmetry.initializeOrientation(b),this.asc.setCurrentModelInfo("matUnitCellOrientation",
b))},"~A,JU.M3,JU.P3");e(c$,"addSpaceGroupOperation",function(a,b){b&&this.setLatticeCells();this.symmetry.setSpaceGroup(this.doNormalize);return this.symmetry.addSpaceGroupOperation(a,0)},"~S,~B");e(c$,"setLatticeParameter",function(a){this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.setLattice(a)},"~N");e(c$,"applySymmetryFromReader",function(a){this.asc.setCoordinatesAreFractional(this.acr.iHaveFractionalCoordinates);this.setUnitCell(this.acr.unitCellParams,this.acr.matUnitCellOrientation,
this.acr.unitCellOffset);this.setAtomSetSpaceGroupName(this.acr.sgName);this.setSymmetryRange(this.acr.symmetryRange);if(this.acr.doConvertToFractional||this.acr.fileCoordinatesAreFractional){this.setLatticeCells();var b=!0;if(this.acr.ignoreFileSpaceGroupName||!this.acr.iHaveSymmetryOperators){if(!this.acr.merging||null==a)a=this.acr.getNewSymmetry();b=a.createSpaceGroup(this.acr.desiredSpaceGroupIndex,0<=this.acr.sgName.indexOf("!")?"P1":this.acr.sgName,this.acr.unitCellParams,this.acr.modDim)}else this.acr.doPreSymmetry(),
a=null;this.packingError=this.acr.packingError;b&&(null!=a&&this.setSpaceGroupFrom(a),this.applySymmetryLattice(),null!=a&&null==this.filterSymop&&this.setAtomSetSpaceGroupName(a.getSpaceGroupName()))}if(this.acr.iHaveFractionalCoordinates&&this.acr.merging&&null!=a){for(var b=this.asc.atoms,c=this.asc.getLastAtomSetAtomIndex(),d=this.asc.ac;c<d;c++)a.toCartesian(b[c],!0);this.asc.setCoordinatesAreFractional(!1);this.acr.addVibrations=!1}return this.symmetry},"J.api.SymmetryInterface");e(c$,"setSpaceGroupFrom",
function(a){this.getSymmetry().setSpaceGroupTo(a.getSpaceGroup())},"J.api.SymmetryInterface");e(c$,"setAtomSetSpaceGroupName",function(a){this.symmetry.setSpaceGroupName(a);this.asc.setCurrentModelInfo("spaceGroup",a+"")},"~S");e(c$,"applySymmetryLattice",function(){if(this.asc.coordinatesAreFractional&&null!=this.symmetry.getSpaceGroup()){this.sym2=null;var a=this.latticeCells[0],b=this.latticeCells[1],c=Math.abs(this.latticeCells[2]),d=this.latticeCells[3],g=u(this.symmetry.getUnitCellInfoType(6));
this.firstAtom=this.asc.getLastAtomSetAtomIndex();var f=this.asc.bsAtoms;null!=f&&(this.updateBSAtoms(),this.firstAtom=f.nextSetBit(this.firstAtom));this.rminx=this.rminy=this.rminz=3.4028235E38;this.rmaxx=this.rmaxy=this.rmaxz=-3.4028235E38;var h=null;null==this.acr.latticeType&&(this.acr.latticeType=""+this.symmetry.getLatticeType());this.acr.isPrimitive&&(this.asc.setCurrentModelInfo("isprimitive",Boolean.TRUE),(!"P".equals(this.acr.latticeType)||null!=this.acr.primitiveToCrystal)&&this.asc.setCurrentModelInfo("unitcell_conventional",
this.symmetry.getConventionalUnitCell(this.acr.latticeType,this.acr.primitiveToCrystal)));if(null!=this.acr.latticeType&&(this.asc.setCurrentModelInfo("latticeType",this.acr.latticeType),S(this.acr.fillRange,String))){var j=this.acr.fillRange;j.equals("conventional")?this.acr.fillRange=this.symmetry.getConventionalUnitCell(this.acr.latticeType,this.acr.primitiveToCrystal):j.equals("primitive")?(this.acr.fillRange=this.symmetry.getUnitCellVectors(),this.symmetry.toFromPrimitive(!0,this.acr.latticeType.charAt(0),
this.acr.fillRange,this.acr.primitiveToCrystal)):this.acr.fillRange=null;null!=this.acr.fillRange&&this.acr.addJmolScript("unitcell "+j)}if(null!=this.acr.fillRange){f=this.updateBSAtoms();this.acr.forcePacked=!0;this.doPackUnitCell=!1;this.minXYZ=new JU.P3i;this.maxXYZ=JU.P3i.new3(1,1,1);for(var j=Array(4),k=0;4>k;k++)j[k]=JU.P3.newP(this.acr.fillRange[k]);this.adjustRangeMinMax(j);null==this.sym2&&(this.sym2=new JS.Symmetry,this.sym2.getUnitCell(this.acr.fillRange,!1,null));this.applyAllSymmetry(this.acr.ms,
f);for(var h=new JU.P3,e=this.asc.atoms,k=this.asc.ac;--k>=this.firstAtom;)h.setT(e[k]),this.symmetry.toCartesian(h,!1),this.sym2.toFractional(h,!1),this.acr.fixJavaFloat&&JU.PT.fixPtFloats(h,1E5),(this.acr.noPack?!this.removePacking(this.ndims,h,0,1,0,1,0,1,this.packingError):!this.isWithinCell(this.ndims,h,0,1,0,1,0,1,this.packingError))&&f.clear(k)}else{this.nVib=0;var p=null,n=null,q=null;this.baseSymmetry=this.symmetry;var U=this.acr.strSupercell,j=null;if(null!=U&&0<=U.indexOf(",")){var r=new JU.M4;
null==J.adapter.smarter.XtalSymmetry.mident&&(J.adapter.smarter.XtalSymmetry.mident=new JU.M4);j=this.symmetry.getV0abc(U,r);null!=j&&!r.equals(J.adapter.smarter.XtalSymmetry.mident)&&(this.setMinMax(g,d,a,b,c),h=JU.P3.newP(j[0]),p=JU.P3.newP(j[1]),n=JU.P3.newP(j[2]),q=JU.P3.newP(j[3]),this.adjustRangeMinMax(j))}r=this.asc.getLastAtomSetAtomIndex();null!=f&&(r=f.nextSetBit(r));if(3.4028235E38==this.rminx)j=null;else{this.asc.setGlobalBoolean(7);this.doPackUnitCell=k=this.doPackUnitCell;f=this.updateBSAtoms();
this.applyAllSymmetry(this.acr.ms,null);this.doPackUnitCell=k;for(var e=this.asc.atoms,s=this.asc.ac,k=r;k<s;k++)this.symmetry.toCartesian(e[k],!0),f.set(k);this.symmetry=null;this.symmetry=this.getSymmetry();this.setUnitCell(y(-1,[0,0,0,0,0,0,p.x,p.y,p.z,n.x,n.y,n.z,q.x,q.y,q.z]),null,null);this.setAtomSetSpaceGroupName(null==j||null==U?"P1":"cell="+U);this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.addSpaceGroupOperation("x,y,z",0);null!=h&&this.symmetry.toFractional(h,!0);for(k=r;k<
s;k++)this.symmetry.toFractional(e[k],!0),null!=h&&e[k].sub(h);this.asc.haveAnisou=!1;this.asc.setCurrentModelInfo("matUnitCellOrientation",null)}this.setMinMax(g,d,a,b,c);if(null==j){this.applyAllSymmetry(this.acr.ms,f);if(!this.acr.noPack&&(!this.applySymmetryToBonds||!this.acr.doPackUnitCell))return;this.setMinMax(g,d,a,b,c)}(this.acr.forcePacked||this.acr.doPackUnitCell||this.acr.noPack)&&this.trimToUnitCell(r)}}});e(c$,"setMinMax",function(a,b,c,d,g){this.minXYZ=new JU.P3i;this.maxXYZ=JU.P3i.new3(c,
d,g);JU.SimpleUnitCell.setMinMaxLatticeParameters(a,this.minXYZ,this.maxXYZ,b)},"~N,~N,~N,~N,~N");e(c$,"trimToUnitCell",function(a){var b=this.asc.atoms,c=this.updateBSAtoms();if(this.acr.noPack)for(a=c.nextSetBit(a);0<=a;a=c.nextSetBit(a+1))this.removePacking(this.ndims,b[a],this.minXYZ.x,this.maxXYZ.x,this.minXYZ.y,this.maxXYZ.y,this.minXYZ.z,this.maxXYZ.z,this.packingError)||c.clear(a);else for(a=c.nextSetBit(a);0<=a;a=c.nextSetBit(a+1))this.isWithinCell(this.ndims,b[a],this.minXYZ.x,this.maxXYZ.x,
this.minXYZ.y,this.maxXYZ.y,this.minXYZ.z,this.maxXYZ.z,this.packingError)||c.clear(a)},"~N");e(c$,"updateBSAtoms",function(){var a=this.asc.bsAtoms;null==a&&(a=this.asc.bsAtoms=JU.BSUtil.newBitSet2(0,this.asc.ac));0>a.nextSetBit(this.firstAtom)&&a.setBits(this.firstAtom,this.asc.ac);return a});e(c$,"adjustRangeMinMax",function(a){var b=new JU.P3,c=new JU.P3,d=new JU.P3;this.acr.forcePacked&&(b.setT(a[1]),c.setT(a[2]),d.setT(a[3]),b.scale(this.packingError),c.scale(this.packingError),d.scale(this.packingError));
a[0].scaleAdd2(this.minXYZ.x,a[1],a[0]);a[0].scaleAdd2(this.minXYZ.y,a[2],a[0]);a[0].scaleAdd2(this.minXYZ.z,a[3],a[0]);a[0].sub(b);a[0].sub(c);a[0].sub(d);var g=JU.P3.newP(a[0]);this.symmetry.toFractional(g,!0);this.setSymmetryMinMax(g);a[1].scale(this.maxXYZ.x-this.minXYZ.x);a[2].scale(this.maxXYZ.y-this.minXYZ.y);a[3].scale(this.maxXYZ.z-this.minXYZ.z);a[1].scaleAdd2(2,b,a[1]);a[2].scaleAdd2(2,c,a[2]);a[3].scaleAdd2(2,d,a[3]);for(b=0;3>b;b++)for(c=b+1;4>c;c++)g.add2(a[b],a[c]),0!=b&&g.add(a[0]),
this.symmetry.toFractional(g,!1),this.setSymmetryMinMax(g);this.symmetry.toCartesian(g,!1);g.add(a[1]);this.symmetry.toFractional(g,!1);this.setSymmetryMinMax(g);this.minXYZ=JU.P3i.new3(E(Math.min(0,Math.floor(this.rminx+0.001))),E(Math.min(0,Math.floor(this.rminy+0.001))),E(Math.min(0,Math.floor(this.rminz+0.001))));this.maxXYZ=JU.P3i.new3(E(Math.max(1,Math.ceil(this.rmaxx-0.001))),E(Math.max(1,Math.ceil(this.rmaxy-0.001))),E(Math.max(1,Math.ceil(this.rmaxz-0.001))))},"~A");e(c$,"setSymmetryMinMax",
function(a){this.rminx>a.x&&(this.rminx=a.x);this.rminy>a.y&&(this.rminy=a.y);this.rminz>a.z&&(this.rminz=a.z);this.rmaxx<a.x&&(this.rmaxx=a.x);this.rmaxy<a.y&&(this.rmaxy=a.y);this.rmaxz<a.z&&(this.rmaxz=a.z)},"JU.P3");e(c$,"isWithinCell",function(a,b,c,d,g,f,h,j,e){return b.x>c-e&&b.x<d+e&&(2>a||b.y>g-e&&b.y<f+e)&&(3>a||b.z>h-e&&b.z<j+e)},"~N,JU.P3,~N,~N,~N,~N,~N,~N,~N");e(c$,"removePacking",function(a,b,c,d,g,f,h,j,e){return b.x>c-e&&b.x<d-e&&(2>a||b.y>g-e&&b.y<f-e)&&(3>a||b.z>h-e&&b.z<j-e)},"~N,JU.P3,~N,~N,~N,~N,~N,~N,~N");
e(c$,"applyAllSymmetry",function(a,b){if(!(0==this.asc.ac||null!=b&&b.isEmpty())){var c=this.noSymmetryCount=0<this.asc.baseSymmetryAtomCount?this.asc.baseSymmetryAtomCount:null==b?this.asc.getLastAtomSetAtomCount():this.asc.ac-b.nextSetBit(this.asc.getLastAtomSetAtomIndex());this.asc.setTensors();this.applySymmetryToBonds=this.acr.applySymmetryToBonds;this.doPackUnitCell=this.acr.doPackUnitCell&&!this.applySymmetryToBonds;this.bondCount0=this.asc.bondCount;this.ndims=u(this.symmetry.getUnitCellInfoType(6));
this.finalizeSymmetry(this.symmetry);var d=this.symmetry.getSpaceGroupOperationCount(),g=null==this.acr.thisBiomolecule?null:new JU.BS;null!=g&&(this.asc.checkSpecial=!0);JU.SimpleUnitCell.setMinMaxLatticeParameters(this.ndims,this.minXYZ,this.maxXYZ,0);this.latticeOp=this.symmetry.getLatticeOp();this.latticeOnly=this.asc.checkLatticeOnly&&0<=this.latticeOp;this.doCentroidUnitCell&&this.asc.setInfo("centroidMinMax",I(-1,[this.minXYZ.x,this.minXYZ.y,this.minXYZ.z,this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z,
this.centroidPacked?1:0]));if(this.doCentroidUnitCell||this.acr.doPackUnitCell||0!=this.symmetryRange&&1==this.maxXYZ.x-this.minXYZ.x&&1==this.maxXYZ.y-this.minXYZ.y&&1==this.maxXYZ.z-this.minXYZ.z)switch(this.minXYZ0=JU.P3.new3(this.minXYZ.x,this.minXYZ.y,this.minXYZ.z),this.maxXYZ0=JU.P3.new3(this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z),null!=a&&(a.setMinMax0(this.minXYZ0,this.maxXYZ0),this.minXYZ.set(u(this.minXYZ0.x),u(this.minXYZ0.y),u(this.minXYZ0.z)),this.maxXYZ.set(u(this.maxXYZ0.x),u(this.maxXYZ0.y),
u(this.maxXYZ0.z))),this.ndims){case 3:this.minXYZ.z--,this.maxXYZ.z++;case 2:this.minXYZ.y--,this.maxXYZ.y++;case 1:this.minXYZ.x--,this.maxXYZ.x++}for(var f=(this.maxXYZ.x-this.minXYZ.x)*(this.maxXYZ.y-this.minXYZ.y)*(this.maxXYZ.z-this.minXYZ.z),h=c*(this.latticeOnly?4:d),h=this.asc.checkSpecial||null!=this.acr.thisBiomolecule?h*f:0<this.symmetryRange?h:1,j=Array(h),e=this.asc.atoms,l=0;l<c;l++)e[this.firstAtom+l].bsSymmetry=JU.BS.newN(d*(f+1));var p=0;this.unitCellTranslations=Array(f);var n=
0,q=0,U=Math.abs(this.symmetryRange),r=0!=this.symmetryRange,s=0>this.symmetryRange,m=0<this.symmetryRange;r&&(this.rminx=this.rminy=this.rminz=3.4028235E38,this.rmaxx=this.rmaxy=this.rmaxz=-3.4028235E38);var x=this.symmetry,t=x;this.checkAll=this.latticeOnly||1==this.asc.atomSetCount&&this.asc.checkSpecial&&0<=this.latticeOp;var z=this.acr.lstNCS;if(null!=z&&0==z.get(0).m33){for(var ma=x.getSpaceGroupOperationCount(),R=z.size(),l=R;0<=--l;){var D=z.get(l);D.m33=1;x.toFractionalM(D)}for(l=1;l<ma;l++)for(var B=
x.getSpaceGroupOperation(l),N=0;N<R;N++)D=JU.M4.newM4(z.get(N)),D.mul2(B,D),this.doNormalize&&0<this.noSymmetryCount&&JS.SymmetryOperation.normalizeOperationToCentroid(3,D,e,this.firstAtom,this.noSymmetryCount),z.addLast(D)}l=null;z=x.getSpaceGroupOperation(0);this.doPackUnitCell&&(l=new JU.P3,this.ptOffset.set(0,0,0));ma=this.bondCount0>this.asc.bondIndex0&&this.applySymmetryToBonds?I(c,0):null;f=I(f,0);for(R=this.minXYZ.x;R<this.maxXYZ.x;R++)for(D=this.minXYZ.y;D<this.maxXYZ.y;D++)for(B=this.minXYZ.z;B<
this.maxXYZ.z;B++)if(this.unitCellTranslations[n]=JU.V3.new3(R,D,B),f[n++]=555+100*R+10*D+B,!(0!=R||0!=D||0!=B||0==j.length)){for(p=0;p<c;p++){q=e[this.firstAtom+p];null!=a&&(x=a.getAtomSymmetry(q,this.symmetry),x!==t&&(0==x.getSpaceGroupOperationCount()&&this.finalizeSymmetry(t=x),z=x.getSpaceGroupOperation(0)));N=JU.P3.newP(q);z.rotTrans(N);x.toCartesian(N,!1);if(this.doPackUnitCell)if(x.toUnitCellRnd(N,this.ptOffset),l.setT(N),x.toFractional(l,!1),this.acr.fixJavaFloat&&JU.PT.fixPtFloats(l,1E5),
null==b)q.setT(l);else if(1E-4>q.distance(l))b.set(q.index);else{b.clear(q.index);continue}null!=b&&q.bsSymmetry.clearAll();q.bsSymmetry.set(n*d);q.bsSymmetry.set(0);r&&this.setSymmetryMinMax(N);p<h&&(j[p]=N)}s&&(this.rminx-=U,this.rminy-=U,this.rminz-=U,this.rmaxx+=U,this.rmaxy+=U,this.rmaxz+=U);q=p=this.symmetryAddAtoms(0,0,0,0,p,n*d,j,a,g,ma)}m&&(this.rminx-=U,this.rminy-=U,this.rminz-=U,this.rmaxx+=U,this.rmaxy+=U,this.rmaxz+=U);n=0;for(R=this.minXYZ.x;R<this.maxXYZ.x;R++)for(D=this.minXYZ.y;D<
this.maxXYZ.y;D++)for(B=this.minXYZ.z;B<this.maxXYZ.z;B++)if(n++,0!=R||0!=D||0!=B)p=this.symmetryAddAtoms(R,D,B,q,p,n*d,j,a,g,ma);n*c==this.asc.ac-this.firstAtom&&this.duplicateAtomProperties(n);this.setSymmetryOps();this.asc.setCurrentModelInfo("presymmetryAtomIndex",Integer.$valueOf(this.firstAtom));this.asc.setCurrentModelInfo("presymmetryAtomCount",Integer.$valueOf(c));this.asc.setCurrentModelInfo("latticeDesignation",x.getLatticeDesignation());this.asc.setCurrentModelInfo("unitCellRange",f);
this.asc.setCurrentModelInfo("unitCellTranslations",this.unitCellTranslations);this.baseUnitCell=this.unitCellParams;this.unitCellParams=y(6,0);this.reset()}},"J.adapter.smarter.MSInterface,JU.BS");e(c$,"symmetryAddAtoms",function(a,b,c,d,g,f,h,j,e,l){var p=0==d,n=null!=l;this.doPackUnitCell&&this.ptOffset.set(a,b,c);var q=this.symmetryRange*this.symmetryRange,U=0>this.symmetryRange,r=0<this.symmetryRange,s=p&&r,r=(new Boolean(r&!p)).valueOf(),m=this.symmetry.getSpaceGroupOperationCount(),x=this.acr.lstNCS,
t=null==x?0:x.size(),z=m+t,t=E(t/m),u=1==z&&!this.doPackUnitCell?!1:this.asc.checkSpecial,R=U||r,D=u||R,B=null!=e,N=u||s,H=this.acr.isMolecular?null:this.asc.bsAtoms,v=this.symmetry;U&&(d=this.noSymmetryCount);var U=this.firstAtom+this.noSymmetryCount,G=0>this.asc.firstAtomToBond?U:this.asc.firstAtomToBond,F=new JU.P3,y=null,S=B?0.01:1E-4,na="\x00",I=null==H?this.firstAtom:H.nextSetBit(this.firstAtom),M=0;a:for(;M<z;M++)if(!(p&&0==M||this.latticeOnly&&0<M&&0!=M%this.latticeOp||null!=e&&e.get(M))){for(var ca=
this.firstAtom+(u||null!=e?g:r?d:0),$=M>=m?0:0==this.asc.vibScale?v.getSpinOp(M):this.asc.vibScale,Q=Math.max(this.firstAtom,null==H?0:H.nextSetBit(0)),fa=D,C=M>=m?E((M-m)/t):M,ba=C+f;Q<U;Q++){var W=this.asc.atoms[Q];if(null==H||H.get(Q)){null==j?v.newSpaceGroupPoint(W,M,M>=m?x.get(M-m):null,a,b,c,F):(v=j.getAtomSymmetry(W,this.symmetry),v.newSpaceGroupPoint(W,M,null,a,b,c,F),y=v.getSpaceGroupOperationCode(M),null!=y&&(na=y.charAt(0),v=j.getSymmetryFromCode(y),0==v.getSpaceGroupOperationCount()&&
this.finalizeSymmetry(v)));this.acr.fixJavaFloat&&JU.PT.fixPtFloats(F,1E5);var O=JU.P3.newP(F);v.toCartesian(O,!1);if(this.doPackUnitCell&&(v.toUnitCellRnd(O,this.ptOffset),F.setT(O),v.toFractional(F,!1),this.acr.fixJavaFloat&&JU.PT.fixPtFloats(F,1E5),!this.isWithinCell(this.ndims,F,this.minXYZ0.x,this.maxXYZ0.x,this.minXYZ0.y,this.maxXYZ0.y,this.minXYZ0.z,this.maxXYZ0.z,this.packingError)))continue;s&&this.setSymmetryMinMax(O);var w=null;if(fa){if(R&&(O.x<this.rminx||O.y<this.rminy||O.z<this.rminz||
O.x>this.rmaxx||O.y>this.rmaxy||O.z>this.rmaxz))continue;for(var da=3.4028235E38,T=this.checkAll?this.asc.ac:ca,Z=W.atomName,Y=null==y?W.altLoc:na,V=I;V<T;V++)if(null==H||H.get(V)){var L=h[V-this.firstAtom];if(null!=L){L=O.distanceSquared(L);if(u&&L<S){if(B){e.set(M);continue a}w=this.asc.atoms[V];if((null==w.atomName||w.atomName.equals(Z))&&w.altLoc==Y)break;w=null}r&&(V<d&&L<da)&&(da=L)}}if(r&&da>q)continue}B&&(fa=!1);V=W.atomSite;if(null!=w)n&&(l[V]=w.index),w.bsSymmetry.set(ba),w.bsSymmetry.set(C);
else{n&&(l[V]=this.asc.ac);w=W.copyTo(F,this.asc);null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(w.index);0!=$&&null!=w.vib&&(v.getSpaceGroupOperation(M).rotate(w.vib),w.vib.scale($));if(w.isNegDisorder){null==this.disorderMap&&(this.disorderMap=new java.util.Hashtable);var P=Integer.$valueOf(1E3*M+w.altLoc.charCodeAt(0)),da=this.disorderMap.get(P);if(null==da){if(0==this.disorderMapMax||90==this.disorderMapMax)this.disorderMapMax=64;this.disorderMap.put(P,da=new Character(String.fromCharCode(++this.disorderMapMax)))}w.altLoc=
da.charValue()}w.atomSite=V;null!=y&&(w.altLoc=na);w.bsSymmetry=JU.BSUtil.newAndSetBit(ba);w.bsSymmetry.set(C);N&&(h[g++]=O);W=W.tensors;if(null!=W){w.tensors=null;for(V=W.size();0<=--V;)O=W.get(V),null!=O&&(1==m?w.addTensor(O.copyTensor(),null,!1):this.addRotatedTensor(w,O,M,!1,v))}}}}if(n){ca=this.asc.bonds;$=this.asc.atoms;for(fa=this.asc.bondIndex0;fa<this.bondCount0;fa++)if(C=ca[fa],w=$[C.atomIndex1],Q=$[C.atomIndex2],!(null==w||null==Q||Q.atomSetIndex<w.atomSetIndex))if(ba=l[w.atomSite],W=l[Q.atomSite],
ba>W&&(Q=ba,ba=W,W=Q),ba!=W&&(ba>=G||W>=G)&&0>this.bondsFound.indexOf(P="-"+ba+","+W))this.bondsFound.append(P),this.asc.addNewBondWithOrder(ba,W,C.order)}}return g},"~N,~N,~N,~N,~N,~N,~A,J.adapter.smarter.MSInterface,JU.BS,~A");e(c$,"duplicateAtomProperties",function(a){var b=this.asc.getAtomSetAuxiliaryInfoValue(-1,"atomProperties");if(null!=b)for(var c,d=b.entrySet().iterator();d.hasNext()&&((c=d.next())||1);){var g=c.getKey(),f=c.getValue();if(S(f,String)){for(var h=f,j=new JU.SB,f=a;0<=--f;)j.append(h);
b.put(g,j.toString())}else{g=f;h=y(g.length*a,0);for(f=a;0<=--f;)System.arraycopy(g,0,h,f*g.length,g.length)}}},"~N");e(c$,"finalizeSymmetry",function(a){var b=this.asc.getAtomSetAuxiliaryInfoValue(-1,"spaceGroup");a.setFinalOperations(this.ndims,b,this.asc.atoms,this.firstAtom,this.noSymmetryCount,this.doNormalize,this.filterSymop);(null!=this.filterSymop||null==b||b.equals("unspecified!"))&&this.setAtomSetSpaceGroupName(a.getSpaceGroupName())},"J.api.SymmetryInterface");e(c$,"setSymmetryOps",function(){var a=
this.symmetry.getSpaceGroupOperationCount();if(0<a){for(var b=Array(a),c=0;c<a;c++)b[c]=""+this.symmetry.getSpaceGroupXyz(c,this.doNormalize);this.asc.setCurrentModelInfo("symmetryOperations",b);this.asc.setCurrentModelInfo("symmetryOps",this.symmetry.getSymmetryOperations())}this.asc.setCurrentModelInfo("symmetryCount",Integer.$valueOf(a));this.asc.setCurrentModelInfo("latticeType",null==this.acr.latticeType?"P":this.acr.latticeType);this.asc.setCurrentModelInfo("intlTableNo",this.symmetry.getIntTableNumber());
this.asc.setCurrentModelInfo("intlTableNoFull",this.symmetry.getIntTableNumberFull());if(null==this.acr.sgName||0<=this.acr.sgName.indexOf("?")||0<=this.acr.sgName.indexOf("!"))this.setAtomSetSpaceGroupName(this.acr.sgName=this.symmetry.getSpaceGroupName())});e(c$,"getOverallSpan",function(){return null==this.maxXYZ0?JU.V3.new3(this.maxXYZ.x-this.minXYZ.x,this.maxXYZ.y-this.minXYZ.y,this.maxXYZ.z-this.minXYZ.z):JU.V3.newVsub(this.maxXYZ0,this.minXYZ0)});e(c$,"applySymmetryBio",function(a,b,c){var d=
a.get("biomts"),g=d.size();null==J.adapter.smarter.XtalSymmetry.mident&&(J.adapter.smarter.XtalSymmetry.mident=new JU.M4,J.adapter.smarter.XtalSymmetry.mident.setIdentity());this.acr.lstNCS=null;this.setLatticeCells();var f=null!=this.latticeCells&&0!=this.latticeCells[0]?I(3,0):null;if(null!=f)for(var h=0;3>h;h++)f[h]=this.latticeCells[h];this.latticeCells=null;var f=this.acr.getFilterWithCase("BMCHAINS"),j=null==f?-1:2>f.length?0:JU.PT.parseInt(f.substring(1));-2147483648==j&&(j=-f.charAt(1).charCodeAt(0));
var e=0<=c.indexOf("BYCHAIN")?1:0<=c.indexOf("BYSYMOP")?2:0;this.doNormalize=!1;var l=a.get("chains");this.symmetry=null;this.getSymmetry().setSpaceGroup(this.doNormalize);this.addSpaceGroupOperation("x,y,z",!1);f=a.get("name");this.setAtomSetSpaceGroupName(this.acr.sgName=f);this.applySymmetryToBonds=b;this.bondCount0=this.asc.bondCount;this.firstAtom=this.asc.getLastAtomSetAtomIndex();var f=this.asc.ac,p=new java.util.Hashtable,n=0,q=this.asc.atoms;b=this.bondCount0>this.asc.bondIndex0&&b;switch(e){case 1:for(h=
f;--h>=this.firstAtom;){var m=Integer.$valueOf(q[h].chainID),r=p.get(m);null==r&&(n++,p.put(m,r=new JU.BS));r.set(h)}this.asc.bsAtoms=new JU.BS;for(h=0;h<n;h++)this.asc.bsAtoms.set(f+h),b=new J.adapter.smarter.Atom,b.set(0,0,0),b.radius=16,this.asc.addAtom(b);for(var s=0,u,p=p.entrySet().iterator();p.hasNext()&&((u=p.next())||1);){b=q[f+s++];r=u.getValue();for(h=r.nextSetBit(0);0<=h;h=r.nextSetBit(h+1))b.add(q[h]);b.scale(1/r.cardinality());b.atomName="Pt"+s;b.chainID=u.getKey().intValue()}this.firstAtom=
f;f+=n;b=!1;break;case 2:this.asc.bsAtoms=new JU.BS;this.asc.bsAtoms.set(f);b=q[f]=new J.adapter.smarter.Atom;b.set(0,0,0);for(h=f;--h>=this.firstAtom;)b.add(q[h]);b.scale(1/(f-this.firstAtom));b.atomName="Pt";b.radius=16;this.asc.addAtom(b);this.firstAtom=f++;b=!1}n=a.get("asemblyIdAtoms");0<=c.indexOf("#<")&&(g=Math.min(g,JU.PT.parseInt(c.substring(c.indexOf("#<")+2))-1),c=JU.PT.rep(c,"#<","_<"));h=0;for(p=this.firstAtom;p<f;p++)q[p].bsSymmetry=new JU.BS,a=q[p].chainID,a>h&&(h=a);a=this.asc.bsAtoms;
r=b?I(this.asc.ac,0):null;for(s=null==l?1:0;s<g;s++){if(0<=c.indexOf("!#")){if(0<=c.indexOf("!#"+(s+1)+";"))continue}else if(0<=c.indexOf("#")&&0>c.indexOf("#"+(s+1)+";"))continue;var x=d.get(s),t=!x.equals(J.adapter.smarter.XtalSymmetry.mident),z=null==l?null:l.get(s);if(null!=z&&null!=n){a=new JU.BS;for(p=n.entrySet().iterator();p.hasNext()&&((u=p.next())||1);)0<=z.indexOf(":"+u.getKey()+";")&&a.or(u.getValue());null!=this.asc.bsAtoms&&a.and(this.asc.bsAtoms);z=null}for(var y=-1,R=!1,p=this.firstAtom;p<
f;p++){if(null!=a)R=!a.get(p);else if(null!=z&&(m=q[p].chainID)!=y)R=0>z.indexOf(":"+this.acr.vwr.getChainIDStr(y=m)+";");if(!R)try{var D=q[p].atomSite,B;b&&(r[D]=this.asc.ac);B=this.asc.newCloneAtom(q[p]);B.bondingRadius=s;this.asc.atomSymbolicMap.put(""+B.atomSerial,B);null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(B.index);B.atomSite=D;t&&x.rotTrans(B);B.bsSymmetry=JU.BSUtil.newAndSetBit(s)}catch(N){if(ea(N,Exception))this.asc.errorMessage="appendAtomCollection error: "+N;else throw N;}}t&&this.symmetry.addBioMoleculeOperation(x,
!1);if(b)for(x=this.asc.bondIndex0;x<this.bondCount0;x++)p=this.asc.bonds[x],this.asc.addNewBondWithOrder(r[q[p.atomIndex1].atomSite],r[q[p.atomIndex2].atomSite],p.order)}if(null!=l){null==this.asc.bsAtoms&&(this.asc.bsAtoms=JU.BSUtil.newBitSet2(0,this.asc.ac));this.asc.bsAtoms.clearBits(this.firstAtom,f);if(0==e){if(-1!=j){m=(d=0!=j)?new JU.BS:null;q=this.asc.atoms;D=0;d&&(D=0>j?Math.max(-j,h+1):Math.max(h+j,65),m.setBits(0,D-1),m.setBits(91,97),m.setBits(123,200));e=1==this.asc.structureCount?this.asc.structures[0].bsAll:
null;l=new java.util.Hashtable;B=new java.util.Hashtable;p=null==e?null:new java.util.Hashtable;n=null;h=f;for(r=this.asc.ac;h<r;h++)s=q[h].chainID,t=q[h].bsSymmetry.nextSetBit(0),j=this.acr.vwr.getChainIDStr(s),x=0==t?j:j+t,c=l.get(x),null==c&&(d&&0!=t&&(t=200>D?m.nextClearBit(D):200,200>t&&(m.set(t),c=Integer.$valueOf(this.acr.vwr.getChainID(""+String.fromCharCode(t),!0)),D=t)),null==c&&(c=Integer.$valueOf(this.acr.vwr.getChainID(x,!0))),x!==j&&(B.put(c,Integer.$valueOf(s)),null!=e&&(null!=n&&(n[1]=
h),p.put(c,n=I(-1,[h,r])))),l.put(x,c)),q[h].chainID=c.intValue();if(0<this.asc.structureCount){q=this.asc.structures;d=this.asc.structureCount;for(p=B.entrySet().iterator();p.hasNext()&&((u=p.next())||1);){c=u.getKey();c=c.intValue();j=u.getValue().intValue();for(h=0;h<d;h++)m=q[h],null==m.bsAll&&(m.startChainID==m.endChainID?m.startChainID==j&&(m=m.clone(),m.startChainID=m.endChainID=c,this.asc.addStructure(m)):System.err.println("XtalSymmetry not processing biomt chain structure "+this.acr.vwr.getChainIDStr(j)+
" to "+this.acr.vwr.getChainIDStr(c)))}}}u=this.asc.getAtomSetAuxiliaryInfoValue(-1,"PDB_CONECT_bonds");if(!b&&null!=u)for(h=u.size();0<=--h;)if(p=u.get(h),b=this.asc.getAtomFromName(""+p[0]),q=this.asc.getAtomFromName(""+p[1]),null!=b&&null!=q&&b.bondingRadius!=q.bondingRadius&&(null==a||a.get(b.index)&&a.get(q.index))&&25<b.distanceSquared(q))u.removeItemAt(h),System.out.println("long interchain bond removed for @"+b.atomSerial+"-@"+q.atomSerial)}h=f;for(r=this.asc.ac;h<r;h++)this.asc.atoms[h].bondingRadius=
NaN}this.noSymmetryCount=f-this.firstAtom;this.asc.setCurrentModelInfo("presymmetryAtomIndex",Integer.$valueOf(this.firstAtom));this.asc.setCurrentModelInfo("presymmetryAtomCount",Integer.$valueOf(this.noSymmetryCount));this.asc.setCurrentModelInfo("biosymmetryCount",Integer.$valueOf(g));this.asc.setCurrentModelInfo("biosymmetry",this.symmetry);this.finalizeSymmetry(this.symmetry);this.setSymmetryOps();this.reset()},"java.util.Map,~B,~S");e(c$,"reset",function(){this.asc.coordinatesAreFractional=
!1;this.asc.setCurrentModelInfo("hasSymmetry",Boolean.TRUE);this.asc.setGlobalBoolean(1)});e(c$,"addRotatedTensor",function(a,b,c,d,g){null==this.ptTemp&&(this.ptTemp=new JU.P3,this.mTemp=new JU.M3);return a.addTensor(this.acr.getInterface("JU.Tensor").setFromEigenVectors(g.rotateAxes(c,b.eigenVectors,this.ptTemp,this.mTemp),b.eigenValues,b.isIsotropic?"iso":b.type,b.id,b),null,d)},"J.adapter.smarter.Atom,JU.Tensor,~N,~B,J.api.SymmetryInterface");e(c$,"setTensors",function(){for(var a=this.asc.ac,
b=this.asc.getLastAtomSetAtomIndex();b<a;b++){var c=this.asc.atoms[b];null!=c.anisoBorU&&(c.addTensor(this.symmetry.getTensor(this.acr.vwr,c.anisoBorU),null,!1),Float.isNaN(c.bfactor)&&(c.bfactor=100*c.anisoBorU[7]),c.anisoBorU=null)}});e(c$,"setTimeReversal",function(a,b){this.symmetry.setTimeReversal(a,b)},"~N,~N");e(c$,"setSpinVectors",function(){if(0<this.nVib||0>this.asc.iSet||!this.acr.vibsFractional)return this.nVib;for(var a=this.asc.getAtomSetAtomIndex(this.asc.iSet),b=this.getBaseSymmetry(),
c=this.asc.ac;--c>=a;){var d=this.asc.atoms[c].vib;null!=d&&(0<d.modDim?d.setMoment():(d=d.clone(),b.toCartesian(d,!0),this.asc.atoms[c].vib=d),this.nVib++)}return this.nVib});e(c$,"scaleFractionalVibs",function(){for(var a=this.getBaseSymmetry().getUnitCellParams(),a=JU.P3.new3(1/a[0],1/a[1],1/a[2]),b=this.asc.getAtomSetAtomIndex(this.asc.iSet),c=this.asc.ac;--c>=b;){var d=this.asc.atoms[c].vib;null!=d&&d.scaleT(a)}});e(c$,"getBaseSymmetry",function(){return null==this.baseSymmetry?this.symmetry:
this.baseSymmetry});e(c$,"finalizeUnitCell",function(a){null!=a&&null!=this.baseUnitCell&&(this.baseUnitCell[22]=Math.max(1,u(a.x)),this.baseUnitCell[23]=Math.max(1,u(a.y)),this.baseUnitCell[24]=Math.max(1,u(a.z)))},"JU.P3");Y(c$,"PARTICLE_NONE",0,"PARTICLE_CHAIN",1,"PARTICLE_SYMOP",2,"MAX_INTERCHAIN_BOND_2",25,"mident",null)});aa("JS");X(["J.api.SymmetryInterface"],"JS.Symmetry","java.lang.ArrayIndexOutOfBoundsException $.IllegalArgumentException JU.BS $.JSJSONParser $.Lst $.M4 $.P3 $.PT $.Rdr J.api.Interface J.bspt.Bspt JS.PointGroup $.SpaceGroup $.SymmetryInfo $.SymmetryOperation $.UnitCell JU.Escape $.Logger $.SimpleUnitCell JV.FileManager".split(" "),
function(){c$=P(function(){this.cip=this.unitCell=this.symmetryInfo=this.pointGroup=this.spaceGroup=null;this.$isBio=!1;this.desc=null;L(this,arguments)},JS,"Symmetry",null,J.api.SymmetryInterface);m(c$,"isBio",function(){return this.$isBio});C(c$,function(){});m(c$,"setPointGroup",function(a,b,c,d,g,f,h,j,e){this.pointGroup=JS.PointGroup.getPointGroup(null==a?null:a.pointGroup,b,c,d,g,f,h,j,e);return this},"J.api.SymmetryInterface,JU.T3,~A,JU.BS,~B,~N,~N,~N,~B");m(c$,"getPointGroupName",function(){return this.pointGroup.getName()});
m(c$,"getPointGroupInfo",function(a,b,c,d,g,f){return null==b&&!c&&null!=this.pointGroup.textInfo?this.pointGroup.textInfo:null==b&&this.pointGroup.isDrawType(d,g,f)?this.pointGroup.drawInfo:c&&null!=this.pointGroup.info?this.pointGroup.info:this.pointGroup.getInfo(a,b,c,d,g,f)},"~N,~S,~B,~S,~N,~N");m(c$,"setSpaceGroup",function(a){null==this.spaceGroup&&(this.spaceGroup=JS.SpaceGroup.getNull(!0,a,!1))},"~B");m(c$,"addSpaceGroupOperation",function(a,b){return this.spaceGroup.addSymmetry(a,b,!1)},
"~S,~N");m(c$,"addBioMoleculeOperation",function(a,b){this.$isBio=this.spaceGroup.isBio=!0;return this.spaceGroup.addSymmetry((b?"!":"")+"[[bio"+a,0,!1)},"JU.M4,~B");m(c$,"setLattice",function(a){this.spaceGroup.setLatticeParam(a)},"~N");m(c$,"getSpaceGroup",function(){return this.spaceGroup});m(c$,"createSpaceGroup",function(a,b,c,d){this.spaceGroup=JS.SpaceGroup.createSpaceGroup(a,b,c,d);null!=this.spaceGroup&&JU.Logger.debugging&&JU.Logger.debug("using generated space group "+this.spaceGroup.dumpInfo());
return null!=this.spaceGroup},"~N,~S,~O,~N");m(c$,"getSpaceGroupInfoObj",function(a,b,c,d){return JS.SpaceGroup.getInfo(this.spaceGroup,a,b,c,d)},"~S,~A,~B,~B");m(c$,"getLatticeDesignation",function(){return this.spaceGroup.getLatticeDesignation()});m(c$,"setFinalOperations",function(a,b,c,d,g,f,h){if(null!=b&&(b.startsWith("bio")||0<=b.indexOf(" *(")))this.spaceGroup.name=b;if(null!=h){var j=new JU.Lst;j.addLast(this.spaceGroup.operations[0]);for(var e=1;e<this.spaceGroup.operationCount;e++)h.contains(" "+
(e+1)+" ")&&j.addLast(this.spaceGroup.operations[e]);this.spaceGroup=JS.SpaceGroup.createSpaceGroup(-1,b+" *("+h.trim()+")",j,-1)}this.spaceGroup.setFinalOperationsForAtoms(a,c,d,g,f)},"~N,~S,~A,~N,~N,~B,~S");m(c$,"getSpaceGroupOperation",function(a){return null==this.spaceGroup||null==this.spaceGroup.operations||a>=this.spaceGroup.operations.length?null:null==this.spaceGroup.finalOperations?this.spaceGroup.operations[a]:this.spaceGroup.finalOperations[a]},"~N");m(c$,"getSpaceGroupXyz",function(a,
b){return this.spaceGroup.getXyz(a,b)},"~N,~B");m(c$,"newSpaceGroupPoint",function(a,b,c,d,g,f,h){null==c&&null==this.spaceGroup.finalOperations&&(c=this.spaceGroup.operations[b],c.isFinalized||c.doFinalize());JS.Symmetry.newPoint(null==c?this.spaceGroup.finalOperations[b]:c,a,d,g,f,h)},"JU.P3,~N,JU.M4,~N,~N,~N,JU.P3");m(c$,"rotateAxes",function(a,b,c,d){return 0==a?b:this.spaceGroup.finalOperations[a].rotateAxes(b,this.unitCell,c,d)},"~N,~A,JU.P3,JU.M3");m(c$,"getSpaceGroupOperationCode",function(a){return this.spaceGroup.operations[a].subsystemCode},
"~N");m(c$,"setTimeReversal",function(a,b){this.spaceGroup.operations[a].setTimeReversal(b)},"~N,~N");m(c$,"getSpinOp",function(a){return this.spaceGroup.operations[a].getMagneticOp()},"~N");m(c$,"addLatticeVectors",function(a){return this.spaceGroup.addLatticeVectors(a)},"JU.Lst");m(c$,"getLatticeOp",function(){return this.spaceGroup.latticeOp});m(c$,"getLatticeCentering",function(){return JS.SymmetryOperation.getLatticeCentering(this.getSymmetryOperations())});m(c$,"getOperationRsVs",function(a){return(null==
this.spaceGroup.finalOperations?this.spaceGroup.operations:this.spaceGroup.finalOperations)[a].rsvs},"~N");m(c$,"getSiteMultiplicity",function(a){return this.spaceGroup.getSiteMultiplicity(a,this.unitCell)},"JU.P3");m(c$,"addSubSystemOp",function(a,b,c,d){this.spaceGroup.isSSG=!0;b=JS.SymmetryOperation.getXYZFromRsVs(b,c,!1);c=this.spaceGroup.addSymmetry(b,-1,!0);this.spaceGroup.operations[c].setSigma(a,d);return b},"~S,JU.Matrix,JU.Matrix,JU.Matrix");m(c$,"getMatrixFromString",function(a,b,c){return JS.SymmetryOperation.getMatrixFromString(null,
a,b,c,!0)},"~S,~A,~B,~N");m(c$,"getSpaceGroupName",function(){return null!=this.symmetryInfo?this.symmetryInfo.sgName:null!=this.spaceGroup?this.spaceGroup.getName():null!=this.unitCell&&0<this.unitCell.name.length?"cell="+this.unitCell.name:""});m(c$,"getSpaceGroupNameType",function(a){return null==this.spaceGroup?null:this.spaceGroup.getNameType(a,this)},"~S");m(c$,"setSpaceGroupName",function(a){null!=this.spaceGroup&&this.spaceGroup.setName(a)},"~S");m(c$,"getLatticeType",function(){return null!=
this.symmetryInfo?this.symmetryInfo.latticeType:null==this.spaceGroup?"P":this.spaceGroup.latticeType});m(c$,"getIntTableNumber",function(){return null!=this.symmetryInfo?this.symmetryInfo.intlTableNo:null==this.spaceGroup?null:this.spaceGroup.intlTableNumber});m(c$,"getIntTableNumberFull",function(){return null!=this.symmetryInfo?this.symmetryInfo.intlTableNoFull:null==this.spaceGroup?null:null!=this.spaceGroup.intlTableNumberFull?this.spaceGroup.intlTableNumberFull:this.spaceGroup.intlTableNumber});
m(c$,"getCoordinatesAreFractional",function(){return null==this.symmetryInfo||this.symmetryInfo.coordinatesAreFractional});m(c$,"getCellRange",function(){return null==this.symmetryInfo?null:this.symmetryInfo.cellRange});m(c$,"getSymmetryInfoStr",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.infoStr;if(null==this.spaceGroup)return"";this.symmetryInfo=new JS.SymmetryInfo;this.symmetryInfo.setSymmetryInfo(null,this.getUnitCellParams(),this.spaceGroup);return this.symmetryInfo.infoStr});
m(c$,"getSpaceGroupOperationCount",function(){return null!=this.symmetryInfo&&null!=this.symmetryInfo.symmetryOperations?this.symmetryInfo.symmetryOperations.length:null!=this.spaceGroup&&null!=this.spaceGroup.finalOperations?this.spaceGroup.finalOperations.length:0});m(c$,"getSymmetryOperations",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.symmetryOperations;null==this.spaceGroup&&(this.spaceGroup=JS.SpaceGroup.getNull(!0,!1,!0));this.spaceGroup.setFinalOperations();return this.spaceGroup.finalOperations});
m(c$,"getAdditionalOperationsCount",function(){return null!=this.symmetryInfo&&null!=this.symmetryInfo.symmetryOperations&&null!=this.symmetryInfo.getAdditionalOperations()?this.symmetryInfo.additionalOperations.length:null!=this.spaceGroup&&null!=this.spaceGroup.finalOperations?this.spaceGroup.getAdditionalOperationsCount():0});m(c$,"getAdditionalOperations",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.getAdditionalOperations();this.getSymmetryOperations();return this.spaceGroup.getAdditionalOperations()});
m(c$,"isSimple",function(){return null==this.spaceGroup&&(null==this.symmetryInfo||null==this.symmetryInfo.symmetryOperations)});m(c$,"setSymmetryInfo",function(a,b,c){this.symmetryInfo=new JS.SymmetryInfo;c=this.symmetryInfo.setSymmetryInfo(b,c,null);null!=c&&(this.setUnitCell(c,b.containsKey("jmolData")),this.unitCell.moreInfo=b.get("moreUnitCellInfo"),b.put("infoUnitCell",this.getUnitCellAsArray(!1)),this.setOffsetPt(b.get("unitCellOffset")),b=b.get("matUnitCellOrientation"),null!=b&&this.initializeOrientation(b),
JU.Logger.debugging&&JU.Logger.debug("symmetryInfos["+a+"]:\n"+this.unitCell.dumpInfo(!0,!0)));return this},"~N,java.util.Map,~A");m(c$,"haveUnitCell",function(){return null!=this.unitCell});e(c$,"setUnitCell",function(a,b){null==a&&(a=y(-1,[1,1,1,90,90,90]));this.unitCell=JS.UnitCell.fromParams(a,b);return this},"~A,~B");m(c$,"unitCellEquals",function(a){return a.unitCell.isSameAs(this.unitCell)},"J.api.SymmetryInterface");m(c$,"getUnitCellState",function(){return null==this.unitCell?"":this.unitCell.getState()});
m(c$,"getMoreInfo",function(){return this.unitCell.moreInfo});e(c$,"getUnitsymmetryInfo",function(){return this.unitCell.dumpInfo(!1,!0)});m(c$,"initializeOrientation",function(a){this.unitCell.initOrientation(a)},"JU.M3");m(c$,"unitize",function(a){this.unitCell.unitize(a)},"JU.T3");m(c$,"toUnitCell",function(a,b){this.unitCell.toUnitCell(a,b)},"JU.T3,JU.T3");m(c$,"toUnitCellRnd",function(a,b){this.unitCell.toUnitCellRnd(a,b)},"JU.T3,JU.T3");m(c$,"toSupercell",function(a){return this.unitCell.toSupercell(a)},
"JU.P3");m(c$,"toFractional",function(a,b){this.$isBio||this.unitCell.toFractional(a,b)},"JU.T3,~B");m(c$,"toFractionalM",function(a){this.$isBio||this.unitCell.toFractionalM(a)},"JU.M4");m(c$,"toCartesian",function(a,b){this.$isBio||this.unitCell.toCartesian(a,b)},"JU.T3,~B");m(c$,"getUnitCellParams",function(){return this.unitCell.getUnitCellParams()});m(c$,"getUnitCellAsArray",function(a){return this.unitCell.getUnitCellAsArray(a)},"~B");m(c$,"getTensor",function(a,b){if(null==b)return null;null==
this.unitCell&&(this.unitCell=JS.UnitCell.fromParams(y(-1,[1,1,1,90,90,90]),!0));return this.unitCell.getTensor(a,b)},"JV.Viewer,~A");m(c$,"getUnitCellVerticesNoOffset",function(){return this.unitCell.getVertices()});m(c$,"getCartesianOffset",function(){return this.unitCell.getCartesianOffset()});m(c$,"getFractionalOffset",function(){return this.unitCell.getFractionalOffset()});m(c$,"setOffsetPt",function(a){this.unitCell.setOffset(a)},"JU.T3");m(c$,"setOffset",function(a){var b=new JU.P3;JU.SimpleUnitCell.ijkToPoint3f(a,
b,0,0);this.unitCell.setOffset(b)},"~N");m(c$,"getUnitCellMultiplier",function(){return this.unitCell.getUnitCellMultiplier()});m(c$,"getUnitCellMultiplied",function(){var a=this.unitCell.getUnitCellMultiplied();if(a===this.unitCell)return this;var b=new JS.Symmetry;b.unitCell=a;return b});m(c$,"getCanonicalCopy",function(a,b){return this.unitCell.getCanonicalCopy(a,b)},"~N,~B");m(c$,"getUnitCellInfoType",function(a){return this.unitCell.getInfo(a)},"~N");m(c$,"getUnitCellInfo",function(a){return this.unitCell.dumpInfo(!1,
a)},"~B");m(c$,"isSlab",function(){return this.unitCell.isSlab()});m(c$,"isPolymer",function(){return this.unitCell.isPolymer()});m(c$,"checkDistance",function(a,b,c,d,g,f,h,j){return this.unitCell.checkDistance(a,b,c,d,g,f,h,j)},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");e(c$,"getUnitCellVectors",function(){return this.unitCell.getUnitCellVectors()});m(c$,"getUnitCell",function(a,b,c){if(null==a)return null;this.unitCell=JS.UnitCell.fromOABC(a,b);null!=c&&(this.unitCell.name=c);return this},"~A,~B,~S");
m(c$,"getUnitCelld",function(a,b,c){if(null==a)return null;this.unitCell=JS.UnitCell.fromOABC(a,b);null!=c&&(this.unitCell.name=c);return this},"~A,~B,~S");m(c$,"isSupercell",function(){return this.unitCell.isSupercell()});m(c$,"notInCentroid",function(a,b,c){try{var d=new JU.BS,g=b.nextSetBit(0),f=a.getMolecules(),h=f.length,j=a.at,e=f[h-1].firstAtomIndex==a.am[j[g].mi].firstAtomIndex,l=new JU.P3,p=1==c[6];a=h;a:for(;0<=--a&&b.get(f[a].firstAtomIndex);){var n=f[a].atomList;l.set(0,0,0);for(var g=
0,q=n.nextSetBit(0);0<=q;q=n.nextSetBit(q+1))if(e||p)if(l.setT(j[q]),this.isNotCentroid(l,1,c,p))e&&d.set(q);else{if(!e)continue a}else l.add(j[q]),g++;(p||0<g&&this.isNotCentroid(l,g,c,!1))&&d.or(n)}return d}catch(m){if(ea(m,Exception))return null;throw m;}},"JM.ModelSet,JU.BS,~A");e(c$,"isNotCentroid",function(a,b,c,d){a.scale(1/b);this.toFractional(a,!1);return d?a.x+5E-6<=c[0]||a.x-5E-6>c[3]||a.y+5E-6<=c[1]||a.y-5E-6>c[4]||a.z+5E-6<=c[2]||a.z-5E-6>c[5]:a.x+5E-6<=c[0]||a.x+5E-5>c[3]||a.y+5E-6<=
c[1]||a.y+5E-5>c[4]||a.z+5E-6<=c[2]||a.z+5E-5>c[5]},"JU.P3,~N,~A,~B");e(c$,"getDesc",function(a){return null==a?null==JS.Symmetry.nullDesc?JS.Symmetry.nullDesc=J.api.Interface.getInterface("JS.SymmetryDesc",null,"modelkit"):JS.Symmetry.nullDesc:(null==this.desc?this.desc=J.api.Interface.getInterface("JS.SymmetryDesc",a.vwr,"eval"):this.desc).set(a)},"JM.ModelSet");m(c$,"getSymmetryInfoAtom",function(a,b,c,d,g,f,h,e,k,l,p,n,q){return this.getDesc(a).getSymopInfo(b,c,d,g,f,h,e,k,l,p,n,q)},"JM.ModelSet,~N,~S,~N,JU.P3,JU.P3,JU.P3,~S,~N,~N,~N,~N,~A");
m(c$,"getSpaceGroupInfo",function(a,b,c,d,g){var f=null==b;if(null==b){var h=a.getModelAuxiliaryInfo(a.vwr.am.cmi);null!=h&&(b=h.get("spaceGroup"))}h=null;null!=g&&(h=(new JS.Symmetry).setUnitCell(g,!1));return this.getDesc(a).getSpaceGroupInfo(this,c,b,0,null,null,null,0,-1,d,f,0,h,null)},"JM.ModelSet,~S,~N,~B,~A");m(c$,"fcoord",function(a){return JS.SymmetryOperation.fcoord(a)},"JU.T3");m(c$,"getV0abc",function(a,b){return null==this.unitCell?null:this.unitCell.getV0abc(a,b)},"~O,JU.M4");m(c$,"getQuaternionRotation",
function(a){return null==this.unitCell?null:this.unitCell.getQuaternionRotation(a)},"~S");m(c$,"getFractionalOrigin",function(){return this.unitCell.getFractionalOrigin()});m(c$,"getState",function(a,b,c){var d=this.getFractionalOffset(),g=!1;if(null!=d&&(0!=d.x||0!=d.y||0!=d.z))c.append("; set unitcell ").append(JU.Escape.eP(d)),g=!0;d=this.getUnitCellMultiplier();null!=d&&(c.append("; set unitcell ").append(JU.SimpleUnitCell.escapeMultiplier(d)),g=!0);var d=null!=a.getInfo(b,"spaceGroupAssigned"),
f=a.getInfo(b,"spaceGroup");d&&null!=f&&(c.append("\n UNITCELL "+JU.Escape.e(a.getUnitCell(b).getUnitCellVectors())),c.append("\n MODELKIT SPACEGROUP "+JU.PT.esc(f)),g=!0);return g},"JM.ModelSet,~N,JU.SB");m(c$,"getIterator",function(a,b,c,d){return J.api.Interface.getInterface("JS.UnitCellIterator",a,"script").set(this,b,a.ms.at,c,d)},"JV.Viewer,JM.Atom,JU.BS,~N");m(c$,"toFromPrimitive",function(a,b,c,d){null==this.unitCell&&(this.unitCell=JS.UnitCell.fromOABC(c,!1));return this.unitCell.toFromPrimitive(a,
b,c,d)},"~B,~S,~A,JU.M3");m(c$,"generateCrystalClass",function(a){var b=this.getSymmetryOperations(),c=new JU.Lst,d=null==a,g=0,f=0,h=0;d?(g=2.718281828459045,f=3.141592653589793,h=Math.log10(2E3),a=JU.P3.new3(g+1,f+2,h+3)):a=JU.P3.newP(a);if(null==b||null==this.unitCell)c.addLast(a);else{this.unitCell.toFractional(a,!0);var e=null,k=null;d&&(e=JU.P3.new3(f+4,h+5,g+6),this.unitCell.toFractional(e,!0),k=JU.P3.new3(h+7,g+8,f+9),this.unitCell.toFractional(k,!0));var g=new J.bspt.Bspt(3,0),f=g.allocateCubeIterator(),
h=new JU.P3,l=b.length;a:for(;0<=--l;){b[l].rotate2(a,h);f.initialize(h,0.001,!1);if(f.hasMoreElements())continue a;var p=JU.P3.newP(h);c.addLast(p);g.addTuple(p);d&&(null!=k&&(b[l].rotate2(k,h),c.addLast(JU.P3.newP(h))),null!=e&&(b[l].rotate2(e,h),c.addLast(JU.P3.newP(h))))}for(b=c.size();0<=--b;)this.unitCell.toCartesian(c.get(b),!0)}return c},"JU.P3");m(c$,"calculateCIPChiralityForAtoms",function(a,b){a.setCursor(3);var c=this.getCIPChirality(a),d=a.getBoolean(603979960)?"CIPData":"CIPDataTracker",
d=J.api.Interface.getInterface("JS."+d,a,"script").set(a,b);d.setRule6Full(a.getBoolean(603979823));c.getChiralityForAtoms(d);a.setCursor(0)},"JV.Viewer,JU.BS");m(c$,"calculateCIPChiralityForSmiles",function(a,b){a.setCursor(3);var c=this.getCIPChirality(a),d=J.api.Interface.getInterface("JS.CIPDataSmiles",a,"script").setAtomsForSmiles(a,b);c.getChiralityForAtoms(d);a.setCursor(0);return d.getSmilesChiralityArray()},"JV.Viewer,~S");e(c$,"getCIPChirality",function(a){return null==this.cip?this.cip=
J.api.Interface.getInterface("JS.CIPChirality",a,"script"):this.cip},"JV.Viewer");m(c$,"getConventionalUnitCell",function(a,b){return null==this.unitCell||null==a?null:this.unitCell.getConventionalUnitCell(a,b)},"~S,JU.M3");m(c$,"getUnitCellInfoMap",function(){return null==this.unitCell?null:this.unitCell.getInfo()});e(c$,"setUnitCell",function(a){this.unitCell=JS.UnitCell.cloneUnitCell(a.unitCell)},"J.api.SymmetryInterface");m(c$,"findSpaceGroup",function(a,b,c,d,g,f){return J.api.Interface.getInterface("JS.SpaceGroupFinder",
a,"eval").findSpaceGroup(a,b,c,d,this,g,f)},"JV.Viewer,JU.BS,~S,~A,~B,~B");m(c$,"setSpaceGroupTo",function(a){this.symmetryInfo=null;this.spaceGroup=S(a,JS.SpaceGroup)?a:JS.SpaceGroup.getSpaceGroupFromITAName(a.toString())},"~O");m(c$,"removeDuplicates",function(a,b,c){var d=this.unitCell,g=a.at;a=a.occupancies;for(var f=null!=a,h=Array(b.length()),e=b.nextSetBit(0);0<=e;e=b.nextSetBit(e+1)){var k=h[e]=JU.P3.newP(g[e]);d.toFractional(k,!1);c?d.unitizeRnd(k):d.unitize(k)}for(e=b.nextSetBit(0);0<=e;e=
b.nextSetBit(e+1)){c=g[e];k=h[e];c=c.getAtomicAndIsotopeNumber();for(var d=f?a[e]:0,l=b.nextSetBit(e+1);0<=l;l=b.nextSetBit(l+1))c!=g[l].getAtomicAndIsotopeNumber()||f&&d!=a[l]||1.96E-6>k.distanceSquared(h[l])&&b.clear(l)}return b},"JM.ModelSet,JU.BS,~B");m(c$,"getEquivPoints",function(a,b,c){var d=this.getSymmetryOperations();return null==d||null==this.unitCell?null:this.unitCell.getEquivPoints(b,c,d,null==a?new JU.Lst:a,0,0)},"JU.Lst,JU.P3,~S");m(c$,"getEquivPointList",function(a,b,c){var d=this.getSymmetryOperations(),
g=0<=c.indexOf("newpt"),f=0<=c.indexOf("zapped"),h=a.size(),e=0<=c.indexOf("tofractional");if(0>c.indexOf("fromfractional"))for(var k=0;k<a.size();k++)this.toFractional(a.get(k),!0);c+=",fromfractional,tofractional";var l=0<b?0:h,p=b==h,n=0<b?b:h;p&&(b--,n--);f&&(n=0);var q=0<b?a.get(b):null;if(null!=d||null!=this.unitCell)for(k=b;k<h;k++)this.unitCell.getEquivPoints(a.get(k),c,d,a,l,n);!f&&(a.size()==b||a.get(b)!==q||p||g)&&h--;for(k=h-b;0<=--k;)a.removeItemAt(b);if(!e)for(k=a.size();--k>=b;)this.toCartesian(a.get(k),
!0)},"JU.Lst,~N,~S");m(c$,"getInvariantSymops",function(a,b){var c=this.getSymmetryOperations();if(null==c)return I(0,0);for(var d=new JU.BS,g=new JU.P3,f=new JU.P3,h=c.length,e=1;e<h;e++)g.setT(a),this.unitCell.toFractional(g,!0),this.unitCell.unitize(g),f.setT(g),c[e].rotTrans(g),this.unitCell.unitize(g),1.96E-6>f.distanceSquared(g)&&d.set(e);c=I(d.cardinality(),0);if(null!=b&&c.length!=b.length)return null;g=0;for(e=1;e<h;e++)if(d.get(e)){if(null!=b&&b[g]!=e+1)return null;c[g++]=e+1}return c},
"JU.P3,~A");m(c$,"getWyckoffPosition",function(a,b,c){if(null==this.unitCell)return"";var d=this.spaceGroup;if(null==d&&null!=this.symmetryInfo&&(d=JS.SpaceGroup.determineSpaceGroupN(this.symmetryInfo.sgName),null==d&&(d=JS.SpaceGroup.getSpaceGroupFromITAName(this.symmetryInfo.intlTableNoFull)),null==d))return"?";null==b?b=JU.P3.new3(0.45999998,0.3285714,0.25555554):(b=JU.P3.newP(b),this.unitCell.toFractional(b,!0));null==JS.Symmetry.wyckoffFinder&&(JS.Symmetry.wyckoffFinder=J.api.Interface.getInterface("JS.WyckoffFinder",
null,"symmetry"));try{var g=JS.Symmetry.wyckoffFinder.getWyckoffFinder(a,d.intlTableNumberFull);if(null==c)return g.getWyckoffPosition(b);if(null==g.findPositionFor(b,c))return null;this.unitCell.toCartesian(b,!0);return b}catch(f){if(ea(f,Exception))return f.printStackTrace(),null==c?"?":null;throw f;}},"JV.Viewer,JU.P3,~S");m(c$,"getTransform",function(a,b,c){return this.getDesc(null).getTransform(this.unitCell,this.getSymmetryOperations(),a,b,c)},"JU.P3,JU.P3,~B");c$.newPoint=e(c$,"newPoint",function(a,
b,c,d,g,f){a.rotTrans2(b,f);f.add3(c,d,g)},"JU.M4,JU.P3,~N,~N,~N,JU.P3");m(c$,"isWithinUnitCell",function(a,b,c,d){return this.unitCell.isWithinUnitCell(b,c,d,a)},"JU.P3,~N,~N,~N");m(c$,"checkPeriodic",function(a){return this.unitCell.checkPeriodic(a)},"JU.P3");m(c$,"convertOperation",function(a,b){if(null==b){var c=y(16,0);JS.SymmetryOperation.getMatrixFromString(null,a,c,!0,!1);c[3]/=12;c[7]/=12;c[11]/=12;return JU.M4.newA16(c)}return JS.SymmetryOperation.getXYZFromMatrixFrac(b,!1,!1,!1,!0)},"~S,JU.M4");
m(c$,"getSpaceGroupJSON",function(a,b,c,d){var g=c;try{var f=c.indexOf("("),h=c.endsWith(")")&&0<f,e=null;h&&(e=c.substring(f+1,c.length-1),c=c.substring(0,f));var k=c.equalsIgnoreCase("ALL")?0:JU.PT.parseInt(c),l=-2147483648!=k,f=c.indexOf(".");!h&&(l&&0==d&&0<f)&&(d=JU.PT.parseInt(c.substring(f+1)),c=c.substring(0,f));if(l&&(230<k||0>k))throw new ArrayIndexOutOfBoundsException(k);if(b.equalsIgnoreCase("ITA")){if(0==k)return this.getResource(a,"sg/json/ita_all.json");null==JS.Symmetry.itaData&&(JS.Symmetry.itaData=
Array(230));var p=JS.Symmetry.itaData[k-1];null==p&&(JS.Symmetry.itaData[k-1]=p=this.getResource(a,"sg/json/ita_"+k+".json"));if(null!=p){if(0==d)return p;var n=p.get("its");if(null!=n)for(var q=l?d:n.size();0<=--q;){var m=n.get(q);if(q==d-1||c.equals(m.get("itaFull"))||null!=e&&e.equals(m.get("tm")))return m}}}else if(b.equalsIgnoreCase("AFLOW")&&null==e){null==JS.Symmetry.aflowStructures&&(JS.Symmetry.aflowStructures=this.getResource(a,"sg/json/aflow_structures.json"));if(0==k)return JS.Symmetry.aflowStructures;
System.out.println(c+" ? "+d);var r=JS.Symmetry.aflowStructures.get(""+c);if(d<=r.size())return 0==d?r:r.get(d-1)}throw new IllegalArgumentException(g);}catch(s){if(ea(s,Exception))return s.getMessage();throw s;}},"JV.Viewer,~S,~S,~N");e(c$,"getResource",function(a,b){try{var c=JV.FileManager.getBufferedReaderForResource(a,this,"JS/",b),d=Array(1);if(JU.Rdr.readAllAsString(c,2147483647,!1,d,0))return(new JU.JSJSONParser).parse(d[0],!0)}catch(g){System.err.println(g.getMessage())}return null},"JV.Viewer,~S");
Y(c$,"wyckoffFinder",null,"nullDesc",null,"aflowStructures",null,"itaData",null)});aa("JS");X(["JU.M3","$.V3"],"JS.PointGroup","java.lang.Float java.util.Hashtable JU.Lst $.P3 $.PT $.Quat $.SB J.bspt.Bspt JU.BSUtil $.Escape $.Logger $.Node $.Point3fi".split(" "),function(){c$=P(function(){this.isAtoms=!1;this.iter=this.textInfo=this.info=this.drawInfo=null;this.drawType="";this.drawIndex=0;this.scale=NaN;this.axes=this.nAxes=null;this.radius=this.nAtoms=0;this.distanceTolerance=0.25;this.distanceTolerance2=
0;this.linearTolerance=8;this.cosTolerance=0.99;this.name="C_1?";this.vTemp=this.principalPlane=this.principalAxis=null;this.centerAtomIndex=-1;this.haveInversionCenter=!1;this.bsAtoms=this.atomMap=this.elements=this.points=this.center=null;this.$isLinear=this.localEnvOnly=this.haveVibration=!1;this.maxAtoms=250;this.maxElement=0;this.eCounts=null;this.nOps=0;sa("JS.PointGroup.Operation")||JS.PointGroup.$PointGroup$Operation$();L(this,arguments)},JS,"PointGroup");ha(c$,function(){this.nAxes=I(JS.PointGroup.maxAxis,
0);this.axes=Array(JS.PointGroup.maxAxis);this.vTemp=new JU.V3});e(c$,"getName",function(){return this.name});c$.getPointGroup=e(c$,"getPointGroup",function(a,b,c,d,g,f,h,e,k){var l=new JS.PointGroup;0>=f&&(f=0.01);0>=h&&(h=0.5);0>=e&&(e=250);l.distanceTolerance=f;l.distanceTolerance2=f*f;l.linearTolerance=h;l.maxAtoms=e;l.isAtoms=null!=d;l.bsAtoms=l.isAtoms?d:JU.BSUtil.newBitSet2(0,c.length);l.haveVibration=g;l.center=b;l.localEnvOnly=k;JU.Logger.debugging&&(a=null);return l.set(a,c)?l:a},"JS.PointGroup,JU.T3,~A,JU.BS,~B,~N,~N,~N,~B");
C(c$,function(){});e(c$,"isEqual",function(a){if(null==a||(this.linearTolerance!=a.linearTolerance||this.distanceTolerance!=a.distanceTolerance||this.nAtoms!=a.nAtoms||this.localEnvOnly!=a.localEnvOnly||this.haveVibration!=a.haveVibration||null==this.bsAtoms?null!=a.bsAtoms:!this.bsAtoms.equals(a.bsAtoms)))return!1;for(var b=0;b<this.nAtoms;b++)if(this.elements[b]!=a.elements[b]||!this.points[b].equals(a.points[b]))return!1;return!0},"JS.PointGroup");e(c$,"set",function(a,b){this.cosTolerance=Math.cos(3.141592653589793*
(this.linearTolerance/180));if(!this.getPointsAndElements(b))return JU.Logger.error("Too many atoms for point group calculation"),this.name="point group not determined -- ac > "+this.maxAtoms+" -- select fewer atoms and try again.",!0;this.getElementCounts();if(this.haveVibration){for(var c=Array(this.points.length),d=this.points.length;0<=--d;){c[d]=JU.P3.newP(this.points[d]);var g=this.points[d].getVibrationVector();null!=g&&c[d].add(g)}this.points=c}if(this.isEqual(a))return!1;try{this.findInversionCenter();
if(this.$isLinear=this.isLinear(this.points))return this.name=this.haveInversionCenter?"D(infinity)h":"C(infinity)v",this.vTemp.sub2(this.points[1],this.points[0]),this.addAxis(16,this.vTemp),this.principalAxis=this.axes[16][0],this.haveInversionCenter&&(this.axes[0]=Array(1),this.principalPlane=this.axes[0][this.nAxes[0]++]=ia(JS.PointGroup.Operation,this,null,this.vTemp)),!0;this.axes[0]=Array(15);c=0;this.findCAxes();c=this.findPlanes();this.findAdditionalAxes(c);var f=this.getHighestOrder();if(1<
this.nAxes[17])this.name=1<this.nAxes[19]?this.haveInversionCenter?"Ih":"I":1<this.nAxes[18]?this.haveInversionCenter?"Oh":"O":0<c?this.haveInversionCenter?"Th":"Td":"T";else if(2>f){if(1==c)return this.name="Cs",!0;if(this.haveInversionCenter)return this.name="Ci",!0;this.name="C1"}else 1==f%2&&0<this.nAxes[16]||0==f%2&&1<this.nAxes[16]?(this.principalAxis=this.setPrincipalAxis(f,c),0==c?this.name=14>f?"S"+f:"D"+(f-14):(f=14>f?E(f/2):f-14,this.name=c==f?"D"+f+"d":"D"+f+"h")):0==c?(this.principalAxis=
this.axes[f][0],this.name=14>f?"S"+f:"C"+(f-14)):c==f-14?(this.principalAxis=this.axes[f][0],this.name="C"+c+"v"):(this.principalAxis=this.axes[14>f?f+14:f][0],this.principalPlane=this.axes[0][0],this.name="C"+(14>f?f/2:f-14)+"h")}catch(h){if(ea(h,Exception))this.name="??";else throw h;}finally{JU.Logger.info("Point group found: "+this.name)}return!0},"JS.PointGroup,~A");e(c$,"setPrincipalAxis",function(a,b){var c=this.setPrincipalPlane(a,b);if(0==b&&14>a||1==this.nAxes[a])return 0<b&&14>a&&(a=14+
E(a/2)),this.axes[a][0];if(null==c)return null;for(var d=0;d<this.nAxes[16];d++)if(this.isParallel(c.normalOrAxis,this.axes[16][d].normalOrAxis))return 0!=d&&(c=this.axes[16][0],this.axes[16][0]=this.axes[16][d],this.axes[16][d]=c),this.axes[16][0];return null},"~N,~N");e(c$,"setPrincipalPlane",function(a,b){if(1==b)return this.principalPlane=this.axes[0][0];if(0==b||b==a-14)return null;for(var c=0;c<b;c++)for(var d=0,g=0;d<b;d++)if(this.isPerpendicular(this.axes[0][c].normalOrAxis,this.axes[0][d].normalOrAxis)&&
2<++g)return 0!=c&&(d=this.axes[0][0],this.axes[0][0]=this.axes[0][c],this.axes[0][c]=d),this.principalPlane=this.axes[0][0];return null},"~N,~N");e(c$,"getPointsAndElements",function(a){var b=this.bsAtoms.cardinality();if(this.isAtoms&&b>this.maxAtoms)return!1;this.points=Array(b);this.elements=I(b,0);if(0==b)return!0;for(var c=0,b=this.bsAtoms.nextSetBit(0);0<=b;b=this.bsAtoms.nextSetBit(b+1)){var d=a[b];S(d,JU.Node)&&(c=Math.max(c,d.i))}this.atomMap=I(c+1,0);this.nAtoms=0;if(c=null==this.center)this.center=
new JU.P3;for(var g=new J.bspt.Bspt(3,0),b=this.bsAtoms.nextSetBit(0);0<=b;b=this.bsAtoms.nextSetBit(b+1),this.nAtoms++){d=a[b];if(S(d,JU.Node)){var f=this.localEnvOnly?1:1+Math.max(3,d.getCovalentBondCount());this.elements[this.nAtoms]=d.getElementNumber()*f;this.atomMap[d.i]=this.nAtoms+1}else f=new JU.Point3fi,f.setT(d),f.i=-1-this.nAtoms,S(d,JU.Point3fi)&&(this.elements[this.nAtoms]=Math.max(0,d.sD)),d=f;g.addTuple(d);c&&this.center.add(d);this.points[this.nAtoms]=d}this.iter=g.allocateCubeIterator();
c&&this.center.scale(1/this.nAtoms);for(b=this.nAtoms;0<=--b;)a=this.center.distanceSquared(this.points[b]),this.isAtoms&&a<this.distanceTolerance2&&(this.centerAtomIndex=b),this.radius=Math.max(this.radius,a);this.radius=Math.sqrt(this.radius);1.5>this.radius&&0.15<this.distanceTolerance&&(this.distanceTolerance=this.radius/10,this.distanceTolerance2=this.distanceTolerance*this.distanceTolerance,System.out.println("PointGroup calculation adjusting distanceTolerance to "+this.distanceTolerance));
return!0},"~A");e(c$,"findInversionCenter",function(){if(this.haveInversionCenter=this.checkOperation(null,this.center,-1))this.axes[1]=Array(1),this.axes[1][0]=ia(JS.PointGroup.Operation,this,null)});e(c$,"checkOperation",function(a,b,c){var d=new JU.P3,g=0;c=14>c;var f=this.points.length,h=f;a:for(;0<=--h&&g<f;)if(h!=this.centerAtomIndex){var e=this.points[h],k=this.elements[h];null!=a?(d.sub2(e,b),a.transform2(d,d).add(b)):d.setT(e);c&&(this.vTemp.sub2(b,d),d.scaleAdd2(2,this.vTemp,d));if((null!=
a||c)&&d.distanceSquared(e)<this.distanceTolerance2)g++;else{for(this.iter.initialize(d,this.distanceTolerance,!1);this.iter.hasMoreElements();){var l=this.iter.nextElement();if(l!==e){var p=this.getPointIndex(l.i);if(!(0<=this.centerAtomIndex&&p==this.centerAtomIndex||p>=this.elements.length||this.elements[p]!=k)&&d.distanceSquared(l)<this.distanceTolerance2){g++;continue a}}}return!1}}return!0},"JU.Quat,JU.T3,~N");e(c$,"getPointIndex",function(a){return(0>a?-a:this.atomMap[a])-1},"~N");e(c$,"isLinear",
function(a){var b=null;if(2>a.length)return!1;for(var c=a.length;0<=--c;)if(c!=this.centerAtomIndex)if(null==b)b=new JU.V3,b.sub2(a[c],this.center),b.normalize(),this.vTemp.setT(b);else if(this.vTemp.sub2(a[c],this.center),this.vTemp.normalize(),!this.isParallel(b,this.vTemp))return!1;return!0},"~A");e(c$,"isParallel",function(a,b){return Math.abs(a.dot(b))>=this.cosTolerance},"JU.V3,JU.V3");e(c$,"isPerpendicular",function(a,b){return Math.abs(a.dot(b))<=1-this.cosTolerance},"JU.V3,JU.V3");e(c$,"getElementCounts",
function(){for(var a=this.points.length;0<=--a;){var b=this.elements[a];b>this.maxElement&&(this.maxElement=b)}this.eCounts=I(++this.maxElement,0);for(a=this.points.length;0<=--a;)this.eCounts[this.elements[a]]++});e(c$,"findCAxes",function(){for(var a=new JU.V3,b=new JU.V3,c=new JU.V3,d=this.points.length;0<=--d;)if(d!=this.centerAtomIndex)for(var g=this.points[d],f=this.elements[d],h=this.points.length;--h>d;){var e=this.points[h];if(this.elements[h]==f)if(a.sub2(g,this.center),b.sub2(e,this.center),
a.normalize(),b.normalize(),this.isParallel(a,b))this.getAllAxes(a);else{this.nAxes[16]<JS.PointGroup.axesMaxN[16]&&(c.ave(g,e),c.sub(this.center),this.getAllAxes(c));var e=6.283185307179586/a.angle(b),k=E(Math.floor(e+0.01));if(0.02>=e-k&&!((k+=14)>=JS.PointGroup.maxAxis)&&this.nAxes[k]<JS.PointGroup.axesMaxN[k])c.cross(a,b),this.checkAxisOrder(k,c,this.center)}}g=Array(2*this.nAxes[16]);for(d=0;d<g.length;d++)g[d]=new JU.V3;for(d=h=0;d<this.nAxes[16];d++)g[h++].setT(this.axes[16][d].normalOrAxis),
g[h].setT(this.axes[16][d].normalOrAxis),g[h++].scale(-1);for(d=g.length;2<=--d;)for(h=d;1<=--h;)for(f=h;0<=--f;)c.add2(g[d],g[h]),c.add(g[f]),1>c.length()||this.checkAxisOrder(17,c,this.center);h=2147483647;g=-1;for(d=0;d<this.maxElement;d++)this.eCounts[d]<h&&2<this.eCounts[d]&&(h=this.eCounts[d],g=d);d=0;a:for(;d<this.points.length-2;d++)if(this.elements[d]==g)for(h=d+1;h<this.points.length-1;h++)if(this.elements[h]==g)for(f=h+1;f<this.points.length;f++)if(this.elements[f]==g&&(a.sub2(this.points[d],
this.points[h]),b.sub2(this.points[d],this.points[f]),a.normalize(),b.normalize(),c.cross(a,b),this.getAllAxes(c),a.add2(this.points[d],this.points[h]),a.add(this.points[f]),a.normalize(),this.isParallel(a,c)||this.getAllAxes(a),this.nAxes[19]==JS.PointGroup.axesMaxN[19]))break a;g=Array(this.maxElement);for(d=this.points.length;0<=--d;){f=this.elements[d];if(null==g[f])g[f]=new JU.V3;else if(this.haveInversionCenter)continue;g[f].add(this.points[d])}if(!this.haveInversionCenter)for(d=0;d<this.maxElement;d++)null!=
g[d]&&g[d].scale(1/this.eCounts[d]);for(d=0;d<this.maxElement;d++)if(null!=g[d])for(h=0;h<this.maxElement;h++)d==h||null==g[h]||(this.haveInversionCenter?a.cross(g[d],g[h]):a.sub2(g[d],g[h]),this.checkAxisOrder(16,a,this.center));return this.getHighestOrder()});e(c$,"getAllAxes",function(a){for(var b=16;b<JS.PointGroup.maxAxis;b++)this.nAxes[b]<JS.PointGroup.axesMaxN[b]&&this.checkAxisOrder(b,a,this.center)},"JU.V3");e(c$,"getHighestOrder",function(){for(var a=0,a=14;1<--a&&0==this.nAxes[a];);if(1<
a)return a+14<JS.PointGroup.maxAxis&&0<this.nAxes[a+14]?a+14:a;for(a=JS.PointGroup.maxAxis;1<--a&&0==this.nAxes[a];);return a});e(c$,"checkAxisOrder",function(a,b,c){switch(a){case 22:if(0<this.nAxes[17])return!1;case 20:case 18:if(0<this.nAxes[19])return!1;break;case 17:if(0<this.nAxes[22])return!1;break;case 19:if(0<this.nAxes[18]||0<this.nAxes[20]||0<this.nAxes[22])return!1}b.normalize();if(this.haveAxis(a,b))return!1;var d=JS.PointGroup.getQuaternion(b,a);if(!this.checkOperation(d,c,a))return!1;
this.addAxis(a,b);switch(a){case 16:this.checkAxisOrder(4,b,c);break;case 17:this.checkAxisOrder(3,b,c);this.haveInversionCenter&&this.addAxis(6,b);break;case 18:this.addAxis(16,b);this.checkAxisOrder(4,b,c);this.checkAxisOrder(8,b,c);break;case 19:this.checkAxisOrder(5,b,c);this.haveInversionCenter&&this.addAxis(10,b);break;case 20:this.addAxis(16,b);this.addAxis(17,b);this.checkAxisOrder(3,b,c);this.checkAxisOrder(6,b,c);this.checkAxisOrder(12,b,c);break;case 22:this.addAxis(16,b),this.addAxis(18,
b)}return!0},"~N,JU.V3,JU.T3");e(c$,"addAxis",function(a,b){this.haveAxis(a,b)||(null==this.axes[a]&&(this.axes[a]=Array(JS.PointGroup.axesMaxN[a])),this.axes[a][this.nAxes[a]++]=ia(JS.PointGroup.Operation,this,null,b,a))},"~N,JU.V3");e(c$,"haveAxis",function(a,b){if(this.nAxes[a]==JS.PointGroup.axesMaxN[a])return!0;if(0<this.nAxes[a])for(var c=this.nAxes[a];0<=--c;)if(this.isParallel(b,this.axes[a][c].normalOrAxis))return!0;return!1},"~N,JU.V3");e(c$,"findPlanes",function(){for(var a=new JU.P3,b=
new JU.V3,c=new JU.V3,d=new JU.V3,g=0,f=1<this.getHighestOrder(),h=this.points.length;0<=--h;)if(h!=this.centerAtomIndex)for(var e=this.points[h],k=this.elements[h],l=this.points.length;--l>h;)if(!(f&&this.elements[l]!=k)&&(g=this.points[l],a.add2(e,g),a.scale(0.5),b.sub2(e,this.center),c.sub2(g,this.center),b.normalize(),c.normalize(),this.isParallel(b,c)||(d.cross(b,c),d.normalize(),this.getPlane(d)),d.sub2(g,e),d.normalize(),g=this.getPlane(d),g==JS.PointGroup.axesMaxN[0]))return g;if(f)for(h=
16;h<JS.PointGroup.maxAxis;h++)for(l=0;l<this.nAxes[h];l++)g=this.getPlane(this.axes[h][l].normalOrAxis);return g});e(c$,"getPlane",function(a){!this.haveAxis(0,a)&&this.checkOperation(JU.Quat.newVA(a,180),this.center,-1)&&(this.axes[0][this.nAxes[0]++]=ia(JS.PointGroup.Operation,this,null,a));return this.nAxes[0]},"JU.V3");e(c$,"findAdditionalAxes",function(a){var b=this.axes[0],c=0;if(1<a&&(c=a+14)<JS.PointGroup.maxAxis&&0==this.nAxes[c])this.vTemp.cross(b[0].normalOrAxis,b[1].normalOrAxis),!this.checkAxisOrder(c,
this.vTemp,this.center)&&2<a&&(this.vTemp.cross(b[1].normalOrAxis,b[2].normalOrAxis),this.checkAxisOrder(c-1,this.vTemp,this.center));if(0==this.nAxes[16]&&2<a)for(c=0;c<a-1;c++)for(var d=c+1;d<a;d++)this.vTemp.add2(b[1].normalOrAxis,b[2].normalOrAxis),this.checkAxisOrder(16,this.vTemp,this.center)},"~N");c$.getQuaternion=e(c$,"getQuaternion",function(a,b){return JU.Quat.newVA(a,(14>b?180:0)+(0==b?0:E(360/(b%14))))},"JU.V3,~N");e(c$,"getInfo",function(a,b,c,d,g,f){var e=null!=b;this.info=c?new java.util.Hashtable:
null;var j=new JU.V3,k;0==f&&(f=1);this.scale=f;for(var l=I(4,2,0),p=1;p<JS.PointGroup.maxAxis;p++)for(var n=this.nAxes[p];0<=--n;)l[this.axes[p][n].type][0]++;var q=(new JU.SB).append("# ").appendI(this.nAtoms).append(" atoms\n");if(e){b="draw "+b;this.drawType=d=(c=null!=d&&0<d.length)?d:"";this.drawIndex=g;var e=d.equalsIgnoreCase("Cn"),m=d.equalsIgnoreCase("Sn");q.append("set perspectivedepth off;\n");var r="_"+a+"_";c||q.append(b+"pg0").append(r).append("* delete;draw pgva").append(r).append("* delete;draw pgvp").append(r).append("* delete;");
if(!c||d.equalsIgnoreCase("Ci"))q.append(b+"pg0").append(r).append(this.haveInversionCenter?"inv ":" ").append(JU.Escape.eP(this.center)).append(this.haveInversionCenter?'"i";\n':";\n");for(var s=0.1,p=2;p<JS.PointGroup.maxAxis;p++)if(14==p&&(s=0.1),0!=this.nAxes[p]){a=!this.$isLinear?this.axes[p][0].getLabel():"C_infinity";var s=s+0.25,u=f*this.radius+s,n=14<=p;if(!c||d.equalsIgnoreCase(a)||e&&n||m&&!n)for(n=0;n<this.nAxes[p];n++)if(!(0<g&&n+1!=g)){k=this.axes[p][n];j.add2(k.normalOrAxis,this.center);
2==k.type&&(u=-u);q.append(b+"pgva").append(r).append(a).append("_").appendI(n+1).append(" width 0.05 scale ").appendF(u).append(" ").append(JU.Escape.eP(j));j.scaleAdd2(-2,k.normalOrAxis,j);var x=!this.$isLinear&&null!=this.principalAxis&&k.index==this.principalAxis.index;q.append(JU.Escape.eP(j)).append('"').append(a).append(x?"*":"").append('" color ').append(x?"red":2==k.type?"blue":"orange").append(";\n")}}if(!c||d.equalsIgnoreCase("Cs"))for(n=0;n<this.nAxes[0];n++)0<g&&n+1!=g||(k=this.axes[0][n],
q.append(b+"pgvp").append(r).appendI(n+1).append("disk scale ").appendF(2*f*this.radius).append(" CIRCLE PLANE ").append(JU.Escape.eP(this.center)),j.add2(k.normalOrAxis,this.center),q.append(JU.Escape.eP(j)).append(" color translucent yellow;\n"),j.add2(k.normalOrAxis,this.center),q.append(b+"pgvp").append(r).appendI(n+1).append("ring width 0.05 scale ").appendF(2*f*this.radius).append(" arc ").append(JU.Escape.eP(j)),j.scaleAdd2(-2,k.normalOrAxis,j),q.append(JU.Escape.eP(j)),j.add3(0.011,0.012,
0.013),q.append(JU.Escape.eP(j)).append("{0 360 0.5} color ").append(null!=this.principalPlane&&k.index==this.principalPlane.index?"red":"blue").append(";\n"));q.append("# name=").append(this.name);q.append(", nCi=").appendI(this.haveInversionCenter?1:0);q.append(", nCs=").appendI(this.nAxes[0]);q.append(", nCn=").appendI(l[1][0]);q.append(", nSn=").appendI(l[2][0]);q.append(": ");for(p=JS.PointGroup.maxAxis;2<=--p;)0<this.nAxes[p]&&(q.append(" n").append(14>p?"S":"C").appendI(p%14),q.append("=").appendI(this.nAxes[p]));
q.append(";\n");q.append("print '"+this.name+"';\n");this.drawInfo=q.toString();JU.Logger.debugging&&JU.Logger.info(this.drawInfo);return this.drawInfo}n=0;b=1;d=0;p=this.haveInversionCenter?"Ci":"center";this.haveInversionCenter&&(b++,d++);c?null!=this.center&&(this.info.put(p,this.center),this.haveInversionCenter&&this.info.put("center",this.center),this.info.put(p,this.center)):q.append("\n\n").append(this.name).append("\t").append(p).append("\t").append(JU.Escape.eP(this.center));for(p=JS.PointGroup.maxAxis;0<=
--p;)if(0<this.nAxes[p]){n=JS.PointGroup.nUnique[p];a=this.axes[p][0].getLabel();c?this.info.put("n"+a,Integer.$valueOf(this.nAxes[p])):q.append("\n\n").append(this.name).append("\tn").append(a).append("\t").appendI(this.nAxes[p]).append("\t").appendI(n);n*=this.nAxes[p];b+=n;d+=this.nAxes[p];l[this.axes[p][0].type][1]+=n;g=c?new JU.Lst:null;f=c?new JU.Lst:null;for(n=0;n<this.nAxes[p];n++)j=this.axes[p][n],c?(g.addLast(j.normalOrAxis),f.addLast(j.getM3())):q.append("\n").append(this.name).append("\t").append(a).append("_").appendI(n+
1).append("\t").appendO(j.normalOrAxis);c&&(this.info.put(a,g),this.info.put(a+"_m",f))}if(!c)return q.append("\n"),q.append("\n").append(this.name).append("\ttype\tnElements\tnUnique"),q.append("\n").append(this.name).append("\tE\t  1\t  1"),n=this.haveInversionCenter?1:0,q.append("\n").append(this.name).append("\tCi\t  ").appendI(n).append("\t  ").appendI(n),q.append("\n").append(this.name).append("\tCs\t"),JU.PT.rightJustify(q,"    ",this.nAxes[0]+"\t"),JU.PT.rightJustify(q,"    ",this.nAxes[0]+
"\n"),q.append(this.name).append("\tCn\t"),JU.PT.rightJustify(q,"    ",l[1][0]+"\t"),JU.PT.rightJustify(q,"    ",l[1][1]+"\n"),q.append(this.name).append("\tSn\t"),JU.PT.rightJustify(q,"    ",l[2][0]+"\t"),JU.PT.rightJustify(q,"    ",l[2][1]+"\n"),q.append(this.name).append("\t\tTOTAL\t"),JU.PT.rightJustify(q,"    ",b+"\n"),this.textInfo=q.toString();this.info.put("name",this.name);this.info.put("nAtoms",Integer.$valueOf(this.nAtoms));this.info.put("nTotal",Integer.$valueOf(b));this.info.put("nElements",
Integer.$valueOf(d));this.info.put("nCi",Integer.$valueOf(this.haveInversionCenter?1:0));this.haveInversionCenter&&this.info.put("Ci_m",JU.M3.newM3(JS.PointGroup.mInv));this.info.put("nCs",Integer.$valueOf(this.nAxes[0]));this.info.put("nCn",Integer.$valueOf(l[1][0]));this.info.put("nSn",Integer.$valueOf(l[2][0]));this.info.put("distanceTolerance",Float.$valueOf(this.distanceTolerance));this.info.put("linearTolerance",Float.$valueOf(this.linearTolerance));this.info.put("points",this.points);this.info.put("detail",
q.toString().$replace("\n",";"));null!=this.principalAxis&&0<this.principalAxis.index&&this.info.put("principalAxis",this.principalAxis.normalOrAxis);null!=this.principalPlane&&0<this.principalPlane.index&&this.info.put("principalPlane",this.principalPlane.normalOrAxis);return this.info},"~N,~S,~B,~S,~N,~N");e(c$,"isDrawType",function(a,b,c){return null!=this.drawInfo&&this.drawType.equals(null==a?"":a)&&this.drawIndex==b&&this.scale==c},"~S,~N,~N");c$.getSFtoInt=e(c$,"getSFtoInt",function(a){if(null==
JS.PointGroup.htSFToHM){JS.PointGroup.htSFToHM=new java.util.Hashtable;for(var b="Cn,1,2,3,4,5,6,7,8,9,10,11,12|Cnv,m,2m,3m,4mm,5m,6mm,7m,8mm,9m,10mm,11m,12mm,\u221em|Sn,,-1,,-4,,-3,,-8,,-5,,(-12)|Cnh,m,2/m,-6,4/m,-10,6/m,-14,8/m,-18,10/m,-22,12/m|Dn,,222,32,422,52,622,72,822,92,(10)22,(11)2,(12)22|Dnd,,-42m,-3m,-82m,-5m,(-12)2m,-7m,(-16)2m,-9m,(-20)2m,(-11)m,(-24)2m|Dnh,,mmm,-6m2,4/mmm,(-10)m2,6/mmm,(-14)m2,8/mmm,(-18)m2,10/mmm,(-22)m2,12/mmm,\u221e/mm|Ci,-1|Cs,m|T,23|Th,m-3|Td,-43m|O,432|Oh,m-3m".$plit("\\|"),
c=0;c<b.length;c++){var d=b[c].$plit(","),g=d[0];if(2==d.length)JS.PointGroup.htSFToHM.put(g,d[1]),System.out.println(g+"\t"+d[1]);else{for(var f=g.substring(0,1),g=g.substring(2,g.length),e=1;13>e;e++){var j=d[e];0<j.length&&(JS.PointGroup.htSFToHM.put(f+e+g,j),System.out.println(f+e+g+"\t"+j))}14==d.length&&JS.PointGroup.htSFToHM.put(f+"\u0221e"+g,d[13])}}}return JS.PointGroup.htSFToHM.get(a)},"~S");c$.$PointGroup$Operation$=function(){ra(self.c$);c$=P(function(){ta(this,arguments);this.index=this.order=
this.type=0;this.normalOrAxis=null;this.typeOrder=0;this.mat=null;L(this,arguments)},JS.PointGroup,"Operation");C(c$,function(){this.index=++this.b$["JS.PointGroup"].nOps;this.type=3;this.typeOrder=this.order=1;JU.Logger.debugging&&JU.Logger.debug("new operation -- "+JS.PointGroup.typeNames[this.type])});C(c$,function(a,b){this.index=++this.b$["JS.PointGroup"].nOps;this.type=14>b?2:1;this.typeOrder=b;this.order=b%14;this.normalOrAxis=JU.Quat.newVA(a,180).getNormal();JU.Logger.debugging&&JU.Logger.debug("new operation -- "+
(this.order==b?"S":"C")+this.order+" "+this.normalOrAxis)},"JU.V3,~N");C(c$,function(a){null!=a&&(this.index=++this.b$["JS.PointGroup"].nOps,this.type=0,this.normalOrAxis=JU.Quat.newVA(a,180).getNormal(),JU.Logger.debugging&&JU.Logger.debug("new operation -- plane "+this.normalOrAxis))},"JU.V3");e(c$,"getLabel",function(){switch(this.type){case 0:return"Cs";case 2:return"S"+this.order;default:return"C"+this.order}});e(c$,"getM3",function(){if(null!=this.mat)return this.mat;var a=JU.M3.newM3(JS.PointGroup.getQuaternion(this.normalOrAxis,
this.typeOrder).getMatrix());(0==this.type||2==this.type)&&a.mul(JS.PointGroup.mInv);this.cleanMatrix(a);return this.mat=a});e(c$,"cleanMatrix",function(a){for(var b=0;3>b;b++)for(var c=0;3>c;c++)a.setElement(b,c,this.approx0(a.getElement(b,c)))},"JU.M3");e(c$,"approx0",function(a){return 1E-15<a||-1E-15>a?a:0},"~N");c$=qa()};Y(c$,"axesMaxN",I(-1,[15,0,0,1,3,1,10,0,1,0,6,0,1,0,0,0,15,10,6,6,10,0,1]),"nUnique",I(-1,[1,0,0,2,2,4,2,0,4,0,4,0,4,0,0,0,1,2,2,4,2,0,4]),"s3",3,"s4",4,"s5",5,"s6",6,"s8",8,
"s10",10,"s12",12,"firstProper",14,"c2",16,"c3",17,"c4",18,"c5",19,"c6",20,"c8",22);c$.maxAxis=c$.prototype.maxAxis=JS.PointGroup.axesMaxN.length;Y(c$,"OPERATION_PLANE",0,"OPERATION_PROPER_AXIS",1,"OPERATION_IMPROPER_AXIS",2,"OPERATION_INVERSION_CENTER",3,"typeNames",Q(-1,["plane","proper axis","improper axis","center of inversion"]));c$.mInv=c$.prototype.mInv=JU.M3.newA9(y(-1,[-1,0,0,0,-1,0,0,0,-1]));Y(c$,"SF2HM","Cn,1,2,3,4,5,6,7,8,9,10,11,12|Cnv,m,2m,3m,4mm,5m,6mm,7m,8mm,9m,10mm,11m,12mm,\u221em|Sn,,-1,,-4,,-3,,-8,,-5,,(-12)|Cnh,m,2/m,-6,4/m,-10,6/m,-14,8/m,-18,10/m,-22,12/m|Dn,,222,32,422,52,622,72,822,92,(10)22,(11)2,(12)22|Dnd,,-42m,-3m,-82m,-5m,(-12)2m,-7m,(-16)2m,-9m,(-20)2m,(-11)m,(-24)2m|Dnh,,mmm,-6m2,4/mmm,(-10)m2,6/mmm,(-14)m2,8/mmm,(-18)m2,10/mmm,(-22)m2,12/mmm,\u221e/mm|Ci,-1|Cs,m|T,23|Th,m-3|Td,-43m|O,432|Oh,m-3m",
"htSFToHM",null);JS.PointGroup.getSFtoInt("C2")});aa("JS");X(["java.util.Hashtable"],"JS.SpaceGroup","java.util.Arrays JU.AU $.Lst $.M4 $.P3 $.PT $.SB JS.HallInfo $.HallTranslation $.SymmetryOperation JU.Logger".split(" "),function(){c$=P(function(){this.index=0;this.isSSG=!1;this.name="unknown!";this.hmSymbolAbbrShort=this.hmSymbolAlternative=this.hmSymbolAbbr=this.hmSymbolExt=this.hmSymbolFull=this.hmSymbol=this.crystalClass=this.hallSymbol=null;this.axisChoice=this.uniqueAxis=this.ambiguityType=
"\x00";this.hallInfo=this.intlTableNumberExt=this.intlTableNumberFull=this.intlTableNumber=null;this.latticeParameter=0;this.allOperations=this.finalOperations=this.operations=null;this.operationCount=0;this.latticeOp=-1;this.xyzList=null;this.modDim=0;this.doNormalize=!0;this.isBilbao=this.isBio=!1;this.latticeType="P";this.info=this.nHallOperators=null;L(this,arguments)},JS,"SpaceGroup");c$.getNull=e(c$,"getNull",function(a,b,c){JS.SpaceGroup.getSpaceGroups();a=new JS.SpaceGroup(-1,null,a);a.doNormalize=
b;c&&a.setFinalOperations();return a},"~B,~B,~B");C(c$,function(a,b,c){++JS.SpaceGroup.sgIndex;0>a&&(a=JS.SpaceGroup.sgIndex);this.index=a;this.init(c&&null==b);c&&null!=b&&this.buildSpaceGroup(b)},"~N,~S,~B");e(c$,"init",function(a){this.xyzList=new java.util.Hashtable;this.operationCount=0;a&&this.addSymmetry("x,y,z",0,!1)},"~B");c$.createSpaceGroup=e(c$,"createSpaceGroup",function(a,b,c,d){var g=null;0<=a?g=JS.SpaceGroup.getSpaceGroups()[a]:(g=S(c,JU.Lst)?JS.SpaceGroup.createSGFromList(b,c):JS.SpaceGroup.determineSpaceGroupNA(b,
c),null==g&&(g=JS.SpaceGroup.createSpaceGroupN(0>=d?b:"x1,x2,x3,x4,x5,x6,x7,x8,x9".substring(0,3*d+8))));null!=g&&g.generateAllOperators(null);return g},"~N,~S,~O,~N");c$.createSGFromList=e(c$,"createSGFromList",function(a,b){var c=new JS.SpaceGroup(-1,"0;0;--;--;--",!0);c.doNormalize=!1;c.name=a;for(var d=b.size(),g=0;g<d;g++){var f=b.get(g);if(S(f,JS.SymmetryOperation)){var e=c.addOp(f,f.xyz,!1);c.operations[e].setTimeReversal(f.timeReversal)}else c.addSymmetrySM("xyz matrix:"+f,f)}d=c.getDerivedSpaceGroup();
null!=d&&(c=d);return c},"~S,JU.Lst");e(c$,"addSymmetry",function(a,b,c){a=a.toLowerCase();return 0>a.indexOf("[[")&&0>a.indexOf("x4")&&0>a.indexOf(";")&&(0>a.indexOf("x")||0>a.indexOf("y")||0>a.indexOf("z"))?-1:this.addOperation(a,b,c)},"~S,~N,~B");e(c$,"setFinalOperations",function(){this.setFinalOperationsForAtoms(3,null,0,0,!1)});e(c$,"setFinalOperationsForAtoms",function(a,b,c,d,g){if(null==this.hallInfo&&0!=this.latticeParameter){var f=new JS.HallInfo(JS.HallTranslation.getHallLatticeEquivalent(this.latticeParameter));
this.generateAllOperators(f)}this.finalOperations=null;this.isBio=0<=this.name.indexOf("bio");this.index>=JS.SpaceGroup.getSpaceGroups().length&&(!this.isBio&&0>this.name.indexOf("SSG:")&&0>this.name.indexOf("[subsystem"))&&(f=this.getDerivedSpaceGroup(),null!=f&&(this.name=f.getName(),this.latticeType=f.latticeType,this.intlTableNumber=f.intlTableNumber));0==this.operationCount&&this.addOperation("x,y,z",1,!1);this.finalOperations=Array(this.operationCount);var f=null,e=g&&0<d&&null!=b;if(e){f=this.finalOperations[0]=
new JS.SymmetryOperation(this.operations[0],0,!0);null==f.sigma&&JS.SymmetryOperation.normalizeOperationToCentroid(a,f,b,c,d);var j=b[c],k=JU.P3.newP(j);f.rotTrans(k);if(1E-4<k.distance(j))for(var l=0;l<d;l++)j=b[c+l],k.setT(j),f.rotTrans(k),j.setT(k);g||(f=null)}for(l=0;l<this.operationCount;l++){if(0<l||null==f)f=this.finalOperations[l]=new JS.SymmetryOperation(this.operations[l],0,g);e&&null==f.sigma&&JS.SymmetryOperation.normalizeOperationToCentroid(a,f,b,c,d);f.getCentering()}},"~N,~A,~N,~N,~B");
e(c$,"getOperationCount",function(){null==this.finalOperations&&this.setFinalOperations();return this.finalOperations.length});e(c$,"getOperation",function(a){return this.finalOperations[a]},"~N");e(c$,"getAdditionalOperationsCount",function(){null==this.finalOperations&&this.setFinalOperations();null==this.allOperations&&(this.allOperations=JS.SymmetryOperation.getAdditionalOperations(this.finalOperations));return this.allOperations.length-this.getOperationCount()});e(c$,"getAdditionalOperations",
function(){this.getAdditionalOperationsCount();return this.allOperations});e(c$,"getAllOperation",function(a){return this.allOperations[a]},"~N");e(c$,"getXyz",function(a,b){return null==this.finalOperations?this.operations[a].getXyz(b):this.finalOperations[a].getXyz(b)},"~N,~B");c$.getInfo=e(c$,"getInfo",function(a,b,c,d,g){try{if(null!=a&&a.index>=JS.SpaceGroup.SG.length){var f=JS.SpaceGroup.findSpaceGroup(a.operationCount,a.getCanonicalSeitzList());null!=f&&(a=f)}if(null!=c){if(null==a){0<=b.indexOf("[")&&
(b=b.substring(0,b.indexOf("[")).trim());if(b.equals("unspecified!"))return"no space group identified in file";a=JS.SpaceGroup.determineSpaceGroupNA(b,c)}}else{if(b.equalsIgnoreCase("ALL"))return JS.SpaceGroup.dumpAll(d);if(b.equalsIgnoreCase("MAP"))return JS.SpaceGroup.dumpAll(!0);if(b.equalsIgnoreCase("ALLSEITZ"))return JS.SpaceGroup.dumpAllSeitz();a=JS.SpaceGroup.determineSpaceGroupN(b)}if(null==a){var e=JS.SpaceGroup.createSpaceGroupN(b);null!=e&&(e=JS.SpaceGroup.findSpaceGroup(e.operationCount,
e.getCanonicalSeitzList()));null!=e&&(a=e)}if(null!=a){if(d)return a.dumpInfoObj();for(var j=new JU.SB;null!=a;){j.append(a.dumpInfo());if(a.index>=JS.SpaceGroup.SG.length||!g)break;a=JS.SpaceGroup.determineSpaceGroupNS(b,a)}return j.toString()}return d?null:"?"}catch(k){if(ea(k,Exception))return"?";throw k;}},"JS.SpaceGroup,~S,~A,~B,~B");e(c$,"dumpInfo",function(){var a=this.dumpCanonicalSeitzList();if(S(a,JS.SpaceGroup))return a.dumpInfo();var b=(new JU.SB).append("\nHermann-Mauguin symbol: ");
null==this.hmSymbol||null==this.hmSymbolExt?b.append("?"):b.append(this.hmSymbol).append(0<this.hmSymbolExt.length?":"+this.hmSymbolExt:"");null!=this.intlTableNumber&&b.append("\ninternational table number: ").append(this.intlTableNumber).append(0<this.intlTableNumberExt.length?":"+this.intlTableNumberExt:"").append("\ncrystal class: "+this.crystalClass).append("\n\n").appendI(this.operationCount).append(" operators").append(null!=this.hallInfo&&!this.hallInfo.hallSymbol.equals("--")?" from Hall symbol "+
this.hallInfo.hallSymbol+"  #"+this.intlTableNumberFull:"").append(": ");for(var c=0;c<this.operationCount;c++)b.append("\n").append(this.operations[c].xyz);b.append("\n\n").append(null==this.hallInfo?"Hall symbol unknown":this.hallInfo.dumpInfo());b.append("\n\ncanonical Seitz: ").append(a).append("\n----------------------------------------------------\n");return b.toString()});e(c$,"dumpInfoObj",function(){var a=this.dumpCanonicalSeitzList();if(S(a,JS.SpaceGroup))return a.dumpInfoObj();a=new java.util.Hashtable;
a.put("HermannMauguinSymbol",null==this.hmSymbol||null==this.hmSymbolExt?"?":this.hmSymbol+(0<this.hmSymbolExt.length?":"+this.hmSymbolExt:""));null!=this.intlTableNumber&&(a.put("ita",Integer.$valueOf(JU.PT.parseInt(this.intlTableNumber))),a.put("itaFull",this.intlTableNumberFull),a.put("crystalClass",this.crystalClass),a.put("operationCount",Integer.$valueOf(this.operationCount)));for(var b=new JU.Lst,c=0;c<this.operationCount;c++)b.addLast(this.operations[c].xyz);a.put("operationsXYZ",b);a.put("HallSymbol",
null==this.hallInfo?"?":this.hallInfo.hallSymbol);return a});e(c$,"getName",function(){return this.name});e(c$,"getLatticeDesignation",function(){return JS.HallTranslation.getLatticeDesignation(this.latticeParameter)});e(c$,"setLatticeParam",function(a){this.latticeParameter=a;10<a&&(this.latticeParameter=-JS.HallTranslation.getLatticeIndex(JS.HallTranslation.getLatticeCode(a)))},"~N");e(c$,"dumpCanonicalSeitzList",function(){null!=this.nHallOperators&&(null==this.hallInfo&&(this.hallInfo=new JS.HallInfo(this.hallSymbol)),
this.generateAllOperators(null));var a=this.getCanonicalSeitzList();if(this.index>=JS.SpaceGroup.SG.length){var b=JS.SpaceGroup.findSpaceGroup(this.operationCount,a);if(null!=b)return b.getCanonicalSeitzList()}return(0<=this.index&&this.index<JS.SpaceGroup.SG.length?this.hallSymbol+" = ":"")+a});e(c$,"getDerivedSpaceGroup",function(){if(0<=this.index&&this.index<JS.SpaceGroup.SG.length||0<this.modDim||null==this.operations||0==this.operations.length||0!=this.operations[0].timeReversal)return this;
null!=this.finalOperations&&this.setFinalOperations();var a=this.getCanonicalSeitzList();return null==a?null:JS.SpaceGroup.findSpaceGroup(this.operationCount,a)});e(c$,"getCanonicalSeitzList",function(){for(var a=Array(this.operationCount),b=0;b<this.operationCount;b++)a[b]=JS.SymmetryOperation.dumpSeitz(this.operations[b],!0);java.util.Arrays.sort(a,0,this.operationCount);for(var c=(new JU.SB).append("\n["),b=0;b<this.operationCount;b++)c.append(a[b].$replace("\t"," ").$replace("\n"," ")).append("; ");
c.append("]");return c.toString()});c$.findSpaceGroup=e(c$,"findSpaceGroup",function(a,b){JS.SpaceGroup.getSpaceGroups();var c=JS.SpaceGroup.htByOpCount.get(Integer.$valueOf(a));if(null!=c)for(var d=0,g=c.size();d<g;d++){var f=c.get(d);if(0<=JS.SpaceGroup.getCanonicalSeitz(f.index).indexOf(b))return JS.SpaceGroup.SG[f.index]}return null},"~N,~S");c$.dumpAll=e(c$,"dumpAll",function(a){JS.SpaceGroup.getSpaceGroups();if(a){var b=new JU.Lst;for(a=0;a<JS.SpaceGroup.SG.length;a++)b.addLast(JS.SpaceGroup.SG[a].dumpInfoObj());
return b}b=new JU.SB;for(a=0;a<JS.SpaceGroup.SG.length;a++)b.append("\n----------------------\n"+JS.SpaceGroup.SG[a].dumpInfo());return b.toString()},"~B");c$.dumpAllSeitz=e(c$,"dumpAllSeitz",function(){JS.SpaceGroup.getSpaceGroups();for(var a=new JU.SB,b=0;b<JS.SpaceGroup.SG.length;b++)a.append("\n").appendO(JS.SpaceGroup.getCanonicalSeitz(b));return a.toString()});c$.getCanonicalSeitz=e(c$,"getCanonicalSeitz",function(a){null==JS.SpaceGroup.canonicalSeitzList&&(JS.SpaceGroup.canonicalSeitzList=
Array(JS.SpaceGroup.SG.length));var b=JS.SpaceGroup.canonicalSeitzList[a];return null==b?JS.SpaceGroup.canonicalSeitzList[a]=JS.SpaceGroup.SG[a].dumpCanonicalSeitzList().toString():b},"~N");e(c$,"setLattice",function(a,b){this.latticeParameter=JS.HallTranslation.getLatticeIndex(a);b||(this.latticeParameter=-this.latticeParameter)},"~S,~B");c$.createSpaceGroupN=e(c$,"createSpaceGroupN",function(a){JS.SpaceGroup.getSpaceGroups();a=a.trim();var b=JS.SpaceGroup.determineSpaceGroupN(a),c;null==b&&(c=new JS.HallInfo(a),
0<c.nRotations?(b=new JS.SpaceGroup(-1,"0;0;--;--;"+a,!0),b.hallInfo=c):0<=a.indexOf(",")&&(b=new JS.SpaceGroup(-1,"0;0;--;--;--",!0),b.doNormalize=!1,b.generateOperatorsFromXyzInfo(a)));null!=b&&b.generateAllOperators(null);return b},"~S");e(c$,"addOperation",function(a,b,c){if(null==a||3>a.length)return this.init(!1),-1;a=JU.PT.rep(a," ","");var d="="==a.charAt(0);d&&(a=a.substring(1));var g=this.checkXYZlist(a);if(0<=g)return g;if(a.startsWith("x1,x2,x3,x4")&&0==this.modDim)this.xyzList.clear(),
this.operationCount=0,this.modDim=JU.PT.parseInt(a.substring(a.lastIndexOf("x")+1))-3;else if(0<=a.indexOf("m")&&(a=JU.PT.rep(a,"+m","m"),a.equals("x,y,z,m")||a.equals("x,y,z(mx,my,mz)")))this.xyzList.clear(),this.operationCount=0;b=new JS.SymmetryOperation(null,b,this.doNormalize);if(!b.setMatrixFromXYZ(a,this.modDim,c))return JU.Logger.error("couldn't interpret symmetry operation: "+a),-1;"!"==a.charAt(0)&&(a=a.substring(a.lastIndexOf("!")+1));return this.addOp(b,a,d)},"~S,~N,~B");e(c$,"checkXYZlist",
function(a){return this.xyzList.containsKey(a)?this.xyzList.get(a).intValue():-1},"~S");e(c$,"addOp",function(a,b,c){var d=a.xyz;if(!c){c=this.checkXYZlist(d);if(0<=c)return c;0>this.latticeOp&&(c=JU.PT.replaceAllCharacters(0<this.modDim?JS.SymmetryOperation.replaceXn(d,this.modDim+3):d,"+123/",""),this.xyzList.containsKey(c+"!")?this.latticeOp=this.operationCount:this.xyzList.put(c+"!",Integer.$valueOf(this.operationCount)));this.xyzList.put(d,Integer.$valueOf(this.operationCount))}d.equals(b)||
this.xyzList.put(b,Integer.$valueOf(this.operationCount));null==this.operations&&(this.operations=Array(4));this.operationCount==this.operations.length&&(this.operations=JU.AU.arrayCopyObject(this.operations,2*this.operationCount));this.operations[this.operationCount++]=a;a.number=this.operationCount;0!=a.timeReversal&&(this.operations[0].timeReversal=1);JU.Logger.debugging&&JU.Logger.debug("\naddOperation "+this.operationCount+a.dumpInfo());return this.operationCount-1},"JS.SymmetryOperation,~S,~B");
e(c$,"generateOperatorsFromXyzInfo",function(a){this.init(!0);a=JU.PT.split(a.toLowerCase(),";");for(var b=0;b<a.length;b++)this.addSymmetry(a[b],0,!1)},"~S");e(c$,"generateAllOperators",function(a){if(null==a){if(0<this.operationCount)return;a=this.hallInfo;this.operations=Array(4);if(null==this.hallInfo||0==this.hallInfo.nRotations)a=this.hallInfo=new JS.HallInfo(this.hallSymbol);this.setLattice(this.hallInfo.latticeCode,this.hallInfo.isCentrosymmetric);this.init(!0)}switch(a.latticeCode){case "\x00":case "S":case "T":case "P":this.latticeType=
"P";break;default:this.latticeType=a.latticeCode}for(var b=new JU.M4,c=new JU.M4,d=Array(7),g=0;7>g;g++)d[g]=new JU.M4;this.operationCount=1;for(g=0;g<a.nRotations;g++){var f=a.rotationTerms[g];b.setM4(f.seitzMatrix12ths);f=f.order;d[0].setIdentity();for(var e=this.operationCount,j=1;j<=f;j++){var k=d[j];k.mul2(b,d[0]);d[0].setM4(k);for(var l=0;l<e;l++){c.mul2(k,this.operations[l]);c.m03=(u(c.m03)+12)%12;c.m13=(u(c.m13)+12)%12;c.m23=(u(c.m23)+12)%12;var p=JS.SymmetryOperation.getXYZFromMatrix(c,!0,
!0,!1);this.addSymmetrySM("!nohalf!"+p,c)}}}null!=this.nHallOperators&&this.operationCount!=this.nHallOperators.intValue()&&JU.Logger.error("Operator mismatch "+this.operationCount+" for "+this)},"JS.HallInfo");e(c$,"addSymmetrySM",function(a,b){var c=this.addOperation(a,0,!1);0<=c&&this.operations[c].setM4(b);return c},"~S,JU.M4");c$.determineSpaceGroupN=e(c$,"determineSpaceGroupN",function(a){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1)},"~S");c$.determineSpaceGroupNS=e(c$,"determineSpaceGroupNS",
function(a,b){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,b.index)},"~S,JS.SpaceGroup");c$.determineSpaceGroupNA=e(c$,"determineSpaceGroupNA",function(a,b){return null==b?JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1):JS.SpaceGroup.determineSpaceGroup(a,b[0],b[1],b[2],b[3],b[4],b[5],-1)},"~S,~A");c$.determineSpaceGroup=e(c$,"determineSpaceGroup",function(a,b,c,d,g,f,e,j){a=JS.SpaceGroup.determineSpaceGroupIndex(a,b,c,d,g,f,e,j);return 0<=a?JS.SpaceGroup.SG[a]:null},"~S,~N,~N,~N,~N,~N,~N,~N");
c$.isXYZList=e(c$,"isXYZList",function(a){return 0<=a.indexOf(",")&&0>a.indexOf("(")},"~S");c$.determineSpaceGroupIndex=e(c$,"determineSpaceGroupIndex",function(a,b,c,d,g,f,e,j){if(JS.SpaceGroup.isXYZList(a))return-1;JS.SpaceGroup.getSpaceGroups();0>j&&(j=JS.SpaceGroup.SG.length);a=a.trim().toLowerCase();var k=!1;a.startsWith("bilbao:")&&(k=!0,a=a.substring(7));var l=a.indexOf("hall:");0<l&&(a=a.substring(l));var p=a.startsWith("hall:")?5:a.startsWith("hm:")?3:0;switch(p){case 3:case 5:a=a.substring(p);
break;case 0:a.contains("[")&&(p=5,a=a.substring(0,a.indexOf("[")).trim())}var l=a,n,q=!1;a=a.$replace("_"," ");2<=a.length&&(n=0==a.indexOf("-")?2:1,n<a.length&&" "!=a.charAt(n)&&(a=a.substring(0,n)+" "+a.substring(n)),a=JS.SpaceGroup.toCap(a,2));var m="";if(0<(n=a.indexOf(":")))m=a.substring(n+1),a=a.substring(0,n).trim(),q=!0;5!=p&&(!q&&JU.PT.isOneOf(a,JS.SpaceGroup.ambiguousNames))&&(m="?",q=!0);var r=JU.PT.replaceAllCharacters(a," ()",""),s;if(3!=p&&!q)for(n=j;0<=--n;)if(JS.SpaceGroup.SG[n].hallSymbol.equalsIgnoreCase(a))return n;
if(5!=p){if(3!=p)for(n=j;0<=--n;)if(JS.SpaceGroup.SG[n].intlTableNumberFull.equalsIgnoreCase(l))return n;for(n=j;0<=--n;)if(JS.SpaceGroup.SG[n].hmSymbolFull.equalsIgnoreCase(l))return n;for(n=j;0<=--n;)if(null!=(s=JS.SpaceGroup.SG[n]).hmSymbolAlternative&&s.hmSymbolAlternative.equalsIgnoreCase(l))return n;if(q){for(n=j;0<=--n;)if((s=JS.SpaceGroup.SG[n]).hmSymbolAbbr.equalsIgnoreCase(r)&&s.intlTableNumberExt.equalsIgnoreCase(m))return n;for(n=j;0<=--n;)if((s=JS.SpaceGroup.SG[n]).hmSymbolAbbrShort.equalsIgnoreCase(r)&&
s.intlTableNumberExt.equalsIgnoreCase(m))return n}a=JS.SpaceGroup.determineUniqueAxis(b,c,d,g,f,e);if(!q||"?"==m.charAt(0))for(n=0;n<j;n++)if(((s=JS.SpaceGroup.SG[n]).hmSymbolAbbr.equalsIgnoreCase(r)||s.hmSymbolAbbrShort.equalsIgnoreCase(r)||s.intlTableNumber.equals(r))&&(!k||s.isBilbao))switch(s.ambiguityType){case "\x00":return n;case "a":if(s.uniqueAxis==a||"\x00"==a)return n;break;case "o":if(0==m.length){if(s.hmSymbolExt.equals("2"))return n}else if(s.hmSymbolExt.equalsIgnoreCase(m))return n;
break;case "t":if(0==m.length){if("h"==s.axisChoice)return n}else if((s.axisChoice+"").equalsIgnoreCase(m))return n}}if(0==m.length)for(n=0;n<j;n++)if((s=JS.SpaceGroup.SG[n]).intlTableNumber.equals(l)&&(!k||s.isBilbao))return n;return-1},"~S,~N,~N,~N,~N,~N,~N,~N");c$.determineUniqueAxis=e(c$,"determineUniqueAxis",function(a,b,c,d,g,f){return a==b?b==c?"\x00":"c":b==c?"a":c==a?"b":d==g?g==f?"\x00":"c":g==f?"a":f==d?"b":"\x00"},"~N,~N,~N,~N,~N,~N");e(c$,"buildSpaceGroup",function(a){a=JU.PT.split(a.toLowerCase(),
";");this.intlTableNumberFull=a[0].trim();this.isBilbao=6>a.length&&!this.intlTableNumberFull.equals("0");var b=JU.PT.split(this.intlTableNumberFull,":");this.intlTableNumber=b[0];this.intlTableNumberExt=1==b.length?"":b[1];this.ambiguityType="\x00";0<this.intlTableNumberExt.length&&(this.intlTableNumberExt.equals("h")||this.intlTableNumberExt.equals("r")?(this.ambiguityType="t",this.axisChoice=this.intlTableNumberExt.charAt(0)):this.intlTableNumberExt.startsWith("1")||this.intlTableNumberExt.startsWith("2")?
this.ambiguityType="o":2>=this.intlTableNumberExt.length?(this.ambiguityType="a",this.uniqueAxis=this.intlTableNumberExt.charAt(0)):this.intlTableNumberExt.contains("-")&&(this.ambiguityType="-"));a[1].equals("0")||(this.nHallOperators=Integer.$valueOf(a[1]),b=JS.SpaceGroup.htByOpCount.get(this.nHallOperators),null==b&&JS.SpaceGroup.htByOpCount.put(this.nHallOperators,b=new JU.Lst),b.addLast(this));this.crystalClass=JS.SpaceGroup.toCap(JU.PT.split(a[2],"^")[0],1);this.setHMSymbol(a[3]);this.hallSymbol=
a[4];1<this.hallSymbol.length&&(this.hallSymbol=JS.SpaceGroup.toCap(this.hallSymbol,2));a=this.intlTableNumber+this.hallSymbol;"0"!=this.intlTableNumber.charAt(0)&&JS.SpaceGroup.lastInfo.equals(a)&&(JS.SpaceGroup.ambiguousNames+=this.hmSymbol+";");JS.SpaceGroup.lastInfo=a;this.name=this.hallSymbol+" ["+this.hmSymbolFull+"] #"+this.intlTableNumber},"~S");e(c$,"setHMSymbol",function(a){this.hmSymbolFull=JS.SpaceGroup.toCap(a,1);this.latticeType=this.hmSymbolFull.charAt(0);a=JU.PT.split(this.hmSymbolFull,
":");this.hmSymbol=a[0];this.hmSymbolExt=1==a.length?"":a[1];a=this.hmSymbol.indexOf(" -3");1<=a&&0<="admn".indexOf(this.hmSymbol.charAt(a-1))&&(this.hmSymbolAlternative=(this.hmSymbol.substring(0,a)+" 3"+this.hmSymbol.substring(a+3)).toLowerCase());this.hmSymbolAbbr=JU.PT.rep(this.hmSymbol," ","");this.hmSymbolAbbrShort=JU.PT.rep(this.hmSymbol," 1","");this.hmSymbolAbbrShort=JU.PT.rep(this.hmSymbolAbbrShort," ","")},"~S");c$.toCap=e(c$,"toCap",function(a,b){return a.substring(0,b).toUpperCase()+
a.substring(b)},"~S,~N");e(c$,"toString",function(){return this.asString()});e(c$,"asString",function(){return""+this.intlTableNumberFull+" HM:"+this.hmSymbolFull+" Hall:"+this.hallSymbol});c$.getSpaceGroups=e(c$,"getSpaceGroups",function(){return null==JS.SpaceGroup.SG?JS.SpaceGroup.SG=JS.SpaceGroup.createSpaceGroups():JS.SpaceGroup.SG});c$.createSpaceGroups=e(c$,"createSpaceGroups",function(){var a=JS.SpaceGroup.STR_SG.length;JS.SpaceGroup.nameToGroup=new java.util.Hashtable;for(var b=Array(a),
c=0;c<a;c++)b[c]=new JS.SpaceGroup(c,JS.SpaceGroup.STR_SG[c],!0),JS.SpaceGroup.nameToGroup.put(b[c].intlTableNumberFull,b[c]);JS.SpaceGroup.STR_SG=null;return b});e(c$,"addLatticeVectors",function(a){if(0<=this.latticeOp||0==a.size())return!1;for(var b=this.latticeOp=this.operationCount,c=a.get(0).length==this.modDim+4,d=-2,g=0;g<a.size();g++){var f=a.get(g);c&&(d=u(f[this.modDim+3]),f=JU.AU.arrayCopyF(f,this.modDim+3));if(f.length>this.modDim+3)return!1;for(var e=0;e<b;e++){var j=new JS.SymmetryOperation(null,
0,!0);j.modDim=this.modDim;var k=this.operations[e];j.divisor=k.divisor;j.linearRotTrans=JU.AU.arrayCopyF(k.linearRotTrans,-1);j.setFromMatrix(f,!1);-2!=d&&j.setTimeReversal(k.timeReversal*d);j.xyzOriginal=j.xyz;this.addOp(j,j.xyz,!0)}}return!0},"JU.Lst");e(c$,"getSiteMultiplicity",function(a,b){for(var c=this.finalOperations.length,d=new JU.Lst,g=c;0<=--g;){var f=JU.P3.newP(a);this.finalOperations[g].rotTrans(f);b.unitize(f);for(var e=d.size();0<=--e;){var j=d.get(e);if(1E-6>f.distanceSquared(j)){f=
null;break}}null!=f&&d.addLast(f)}return E(c/d.size())},"JU.P3,JS.UnitCell");e(c$,"setName",function(a){this.name=a;null!=a&&a.startsWith("HM:")&&this.setHMSymbol(a.substring(3))},"~S");e(c$,"getNameType",function(a,b){var c=null,c=a.equals("HM")?this.hmSymbol:a.equals("ITA")?this.intlTableNumber:a.equals("Hall")?this.hallSymbol:"?";if(null!=c)return c;null==this.info&&(this.info=JS.SpaceGroup.getInfo(this,this.hmSymbol,b.getUnitCellParams(),!0,!1));if(S(this.info,String))return null;c=this.info.get(a.equals("Hall")?
"HallSymbol":a.equals("ITA")?"ita":"HermannMauguinSymbol");return null==c?null:c.toString()},"~S,J.api.SymmetryInterface");c$.getSpaceGroupFromITAName=e(c$,"getSpaceGroupFromITAName",function(a){JS.SpaceGroup.getSpaceGroups();for(var b=JS.SpaceGroup.SG.length,c=0;c<b;c++)if(a.equals(JS.SpaceGroup.SG[c].intlTableNumberFull))return JS.SpaceGroup.SG[c];for(c=0;c<b;c++)if(a.equals(JS.SpaceGroup.SG[c].intlTableNumber))return JS.SpaceGroup.SG[c];return null},"~S");e(c$,"checkHallOperators",function(){null!=
this.nHallOperators&&this.nHallOperators.intValue()!=this.operationCount&&this.generateAllOperators(this.hallInfo)});Y(c$,"canonicalSeitzList",null,"NAME_UNK",0,"NAME_HM",3,"NAME_HALL",5,"sgIndex",-1,"ambiguousNames","","lastInfo","","SG",null);c$.htByOpCount=c$.prototype.htByOpCount=new java.util.Hashtable;Y(c$,"nameToGroup",null,"STR_SG",Q(-1,'1;1;c1^1;p 1;p 1,2;2;ci^1;p -1;-p 1,3:b;2;c2^1;p 1 2 1;p 2y,3:b;2;c2^1;p 2;p 2y,3:c;2;c2^1;p 1 1 2;p 2,3:a;2;c2^1;p 2 1 1;p 2x,4:b;2;c2^2;p 1 21 1;p 2yb,4:b;2;c2^2;p 21;p 2yb,4:b*;2;c2^2;p 1 21 1*;p 2y1,4:c;2;c2^2;p 1 1 21;p 2c,4:c*;2;c2^2;p 1 1 21*;p 21,4:a;2;c2^2;p 21 1 1;p 2xa,4:a*;2;c2^2;p 21 1 1*;p 2x1,5:b1;4;c2^3;c 1 2 1;c 2y,5:b1;4;c2^3;c 2;c 2y,5:b2;4;c2^3;a 1 2 1;a 2y,5:b3;4;c2^3;i 1 2 1;i 2y,5:c1;4;c2^3;a 1 1 2;a 2,5:c2;4;c2^3;b 1 1 2;b 2,5:c3;4;c2^3;i 1 1 2;i 2,5:a1;4;c2^3;b 2 1 1;b 2x,5:a2;4;c2^3;c 2 1 1;c 2x,5:a3;4;c2^3;i 2 1 1;i 2x,6:b;2;cs^1;p 1 m 1;p -2y,6:b;2;cs^1;p m;p -2y,6:c;2;cs^1;p 1 1 m;p -2,6:a;2;cs^1;p m 1 1;p -2x,7:b1;2;cs^2;p 1 c 1;p -2yc,7:b1;2;cs^2;p c;p -2yc,7:b2;2;cs^2;p 1 n 1;p -2yac,7:b2;2;cs^2;p n;p -2yac,7:b3;2;cs^2;p 1 a 1;p -2ya,7:b3;2;cs^2;p a;p -2ya,7:c1;2;cs^2;p 1 1 a;p -2a,7:c2;2;cs^2;p 1 1 n;p -2ab,7:c3;2;cs^2;p 1 1 b;p -2b,7:a1;2;cs^2;p b 1 1;p -2xb,7:a2;2;cs^2;p n 1 1;p -2xbc,7:a3;2;cs^2;p c 1 1;p -2xc,8:b1;4;cs^3;c 1 m 1;c -2y,8:b1;4;cs^3;c m;c -2y,8:b2;4;cs^3;a 1 m 1;a -2y,8:b3;4;cs^3;i 1 m 1;i -2y,8:b3;4;cs^3;i m;i -2y,8:c1;4;cs^3;a 1 1 m;a -2,8:c2;4;cs^3;b 1 1 m;b -2,8:c3;4;cs^3;i 1 1 m;i -2,8:a1;4;cs^3;b m 1 1;b -2x,8:a2;4;cs^3;c m 1 1;c -2x,8:a3;4;cs^3;i m 1 1;i -2x,9:b1;4;cs^4;c 1 c 1;c -2yc,9:b1;4;cs^4;c c;c -2yc,9:b2;4;cs^4;a 1 n 1;a -2yab,9:b3;4;cs^4;i 1 a 1;i -2ya,9:-b1;4;cs^4;a 1 a 1;a -2ya,9:-b2;4;cs^4;c 1 n 1;c -2yac,9:-b3;4;cs^4;i 1 c 1;i -2yc,9:c1;4;cs^4;a 1 1 a;a -2a,9:c2;4;cs^4;b 1 1 n;b -2ab,9:c3;4;cs^4;i 1 1 b;i -2b,9:-c1;4;cs^4;b 1 1 b;b -2b,9:-c2;4;cs^4;a 1 1 n;a -2ab,9:-c3;4;cs^4;i 1 1 a;i -2a,9:a1;4;cs^4;b b 1 1;b -2xb,9:a2;4;cs^4;c n 1 1;c -2xac,9:a3;4;cs^4;i c 1 1;i -2xc,9:-a1;4;cs^4;c c 1 1;c -2xc,9:-a2;4;cs^4;b n 1 1;b -2xab,9:-a3;4;cs^4;i b 1 1;i -2xb,10:b;4;c2h^1;p 1 2/m 1;-p 2y,10:b;4;c2h^1;p 2/m;-p 2y,10:c;4;c2h^1;p 1 1 2/m;-p 2,10:a;4;c2h^1;p 2/m 1 1;-p 2x,11:b;4;c2h^2;p 1 21/m 1;-p 2yb,11:b;4;c2h^2;p 21/m;-p 2yb,11:b*;4;c2h^2;p 1 21/m 1*;-p 2y1,11:c;4;c2h^2;p 1 1 21/m;-p 2c,11:c*;4;c2h^2;p 1 1 21/m*;-p 21,11:a;4;c2h^2;p 21/m 1 1;-p 2xa,11:a*;4;c2h^2;p 21/m 1 1*;-p 2x1,12:b1;8;c2h^3;c 1 2/m 1;-c 2y,12:b1;8;c2h^3;c 2/m;-c 2y,12:b2;8;c2h^3;a 1 2/m 1;-a 2y,12:b3;8;c2h^3;i 1 2/m 1;-i 2y,12:b3;8;c2h^3;i 2/m;-i 2y,12:c1;8;c2h^3;a 1 1 2/m;-a 2,12:c2;8;c2h^3;b 1 1 2/m;-b 2,12:c3;8;c2h^3;i 1 1 2/m;-i 2,12:a1;8;c2h^3;b 2/m 1 1;-b 2x,12:a2;8;c2h^3;c 2/m 1 1;-c 2x,12:a3;8;c2h^3;i 2/m 1 1;-i 2x,13:b1;4;c2h^4;p 1 2/c 1;-p 2yc,13:b1;4;c2h^4;p 2/c;-p 2yc,13:b2;4;c2h^4;p 1 2/n 1;-p 2yac,13:b2;4;c2h^4;p 2/n;-p 2yac,13:b3;4;c2h^4;p 1 2/a 1;-p 2ya,13:b3;4;c2h^4;p 2/a;-p 2ya,13:c1;4;c2h^4;p 1 1 2/a;-p 2a,13:c2;4;c2h^4;p 1 1 2/n;-p 2ab,13:c3;4;c2h^4;p 1 1 2/b;-p 2b,13:a1;4;c2h^4;p 2/b 1 1;-p 2xb,13:a2;4;c2h^4;p 2/n 1 1;-p 2xbc,13:a3;4;c2h^4;p 2/c 1 1;-p 2xc,14:b1;4;c2h^5;p 1 21/c 1;-p 2ybc,14:b1;4;c2h^5;p 21/c;-p 2ybc,14:b2;4;c2h^5;p 1 21/n 1;-p 2yn,14:b2;4;c2h^5;p 21/n;-p 2yn,14:b3;4;c2h^5;p 1 21/a 1;-p 2yab,14:b3;4;c2h^5;p 21/a;-p 2yab,14:c1;4;c2h^5;p 1 1 21/a;-p 2ac,14:c2;4;c2h^5;p 1 1 21/n;-p 2n,14:c3;4;c2h^5;p 1 1 21/b;-p 2bc,14:a1;4;c2h^5;p 21/b 1 1;-p 2xab,14:a2;4;c2h^5;p 21/n 1 1;-p 2xn,14:a3;4;c2h^5;p 21/c 1 1;-p 2xac,15:b1;8;c2h^6;c 1 2/c 1;-c 2yc,15:b1;8;c2h^6;c 2/c;-c 2yc,15:b2;8;c2h^6;a 1 2/n 1;-a 2yab,15:b3;8;c2h^6;i 1 2/a 1;-i 2ya,15:b3;8;c2h^6;i 2/a;-i 2ya,15:-b1;8;c2h^6;a 1 2/a 1;-a 2ya,15:-b2;8;c2h^6;c 1 2/n 1;-c 2yac,15:-b2;8;c2h^6;c 2/n;-c 2yac,15:-b3;8;c2h^6;i 1 2/c 1;-i 2yc,15:-b3;8;c2h^6;i 2/c;-i 2yc,15:c1;8;c2h^6;a 1 1 2/a;-a 2a,15:c2;8;c2h^6;b 1 1 2/n;-b 2ab,15:c3;8;c2h^6;i 1 1 2/b;-i 2b,15:-c1;8;c2h^6;b 1 1 2/b;-b 2b,15:-c2;8;c2h^6;a 1 1 2/n;-a 2ab,15:-c3;8;c2h^6;i 1 1 2/a;-i 2a,15:a1;8;c2h^6;b 2/b 1 1;-b 2xb,15:a2;8;c2h^6;c 2/n 1 1;-c 2xac,15:a3;8;c2h^6;i 2/c 1 1;-i 2xc,15:-a1;8;c2h^6;c 2/c 1 1;-c 2xc,15:-a2;8;c2h^6;b 2/n 1 1;-b 2xab,15:-a3;8;c2h^6;i 2/b 1 1;-i 2xb,16;4;d2^1;p 2 2 2;p 2 2,17;4;d2^2;p 2 2 21;p 2c 2,17*;4;d2^2;p 2 2 21*;p 21 2,17:cab;4;d2^2;p 21 2 2;p 2a 2a,17:bca;4;d2^2;p 2 21 2;p 2 2b,18;4;d2^3;p 21 21 2;p 2 2ab,18:cab;4;d2^3;p 2 21 21;p 2bc 2,18:bca;4;d2^3;p 21 2 21;p 2ac 2ac,19;4;d2^4;p 21 21 21;p 2ac 2ab,20;8;d2^5;c 2 2 21;c 2c 2,20*;8;d2^5;c 2 2 21*;c 21 2,20:cab;8;d2^5;a 21 2 2;a 2a 2a,20:cab*;8;d2^5;a 21 2 2*;a 2a 21,20:bca;8;d2^5;b 2 21 2;b 2 2b,21;8;d2^6;c 2 2 2;c 2 2,21:cab;8;d2^6;a 2 2 2;a 2 2,21:bca;8;d2^6;b 2 2 2;b 2 2,22;16;d2^7;f 2 2 2;f 2 2,23;8;d2^8;i 2 2 2;i 2 2,24;8;d2^9;i 21 21 21;i 2b 2c,25;4;c2v^1;p m m 2;p 2 -2,25:cab;4;c2v^1;p 2 m m;p -2 2,25:bca;4;c2v^1;p m 2 m;p -2 -2,26;4;c2v^2;p m c 21;p 2c -2,26*;4;c2v^2;p m c 21*;p 21 -2,26:ba-c;4;c2v^2;p c m 21;p 2c -2c,26:ba-c*;4;c2v^2;p c m 21*;p 21 -2c,26:cab;4;c2v^2;p 21 m a;p -2a 2a,26:-cba;4;c2v^2;p 21 a m;p -2 2a,26:bca;4;c2v^2;p b 21 m;p -2 -2b,26:a-cb;4;c2v^2;p m 21 b;p -2b -2,27;4;c2v^3;p c c 2;p 2 -2c,27:cab;4;c2v^3;p 2 a a;p -2a 2,27:bca;4;c2v^3;p b 2 b;p -2b -2b,28;4;c2v^4;p m a 2;p 2 -2a,28*;4;c2v^4;p m a 2*;p 2 -21,28:ba-c;4;c2v^4;p b m 2;p 2 -2b,28:cab;4;c2v^4;p 2 m b;p -2b 2,28:-cba;4;c2v^4;p 2 c m;p -2c 2,28:-cba*;4;c2v^4;p 2 c m*;p -21 2,28:bca;4;c2v^4;p c 2 m;p -2c -2c,28:a-cb;4;c2v^4;p m 2 a;p -2a -2a,29;4;c2v^5;p c a 21;p 2c -2ac,29:ba-c;4;c2v^5;p b c 21;p 2c -2b,29:cab;4;c2v^5;p 21 a b;p -2b 2a,29:-cba;4;c2v^5;p 21 c a;p -2ac 2a,29:bca;4;c2v^5;p c 21 b;p -2bc -2c,29:a-cb;4;c2v^5;p b 21 a;p -2a -2ab,30;4;c2v^6;p n c 2;p 2 -2bc,30:ba-c;4;c2v^6;p c n 2;p 2 -2ac,30:cab;4;c2v^6;p 2 n a;p -2ac 2,30:-cba;4;c2v^6;p 2 a n;p -2ab 2,30:bca;4;c2v^6;p b 2 n;p -2ab -2ab,30:a-cb;4;c2v^6;p n 2 b;p -2bc -2bc,31;4;c2v^7;p m n 21;p 2ac -2,31:ba-c;4;c2v^7;p n m 21;p 2bc -2bc,31:cab;4;c2v^7;p 21 m n;p -2ab 2ab,31:-cba;4;c2v^7;p 21 n m;p -2 2ac,31:bca;4;c2v^7;p n 21 m;p -2 -2bc,31:a-cb;4;c2v^7;p m 21 n;p -2ab -2,32;4;c2v^8;p b a 2;p 2 -2ab,32:cab;4;c2v^8;p 2 c b;p -2bc 2,32:bca;4;c2v^8;p c 2 a;p -2ac -2ac,33;4;c2v^9;p n a 21;p 2c -2n,33*;4;c2v^9;p n a 21*;p 21 -2n,33:ba-c;4;c2v^9;p b n 21;p 2c -2ab,33:ba-c*;4;c2v^9;p b n 21*;p 21 -2ab,33:cab;4;c2v^9;p 21 n b;p -2bc 2a,33:cab*;4;c2v^9;p 21 n b*;p -2bc 21,33:-cba;4;c2v^9;p 21 c n;p -2n 2a,33:-cba*;4;c2v^9;p 21 c n*;p -2n 21,33:bca;4;c2v^9;p c 21 n;p -2n -2ac,33:a-cb;4;c2v^9;p n 21 a;p -2ac -2n,34;4;c2v^10;p n n 2;p 2 -2n,34:cab;4;c2v^10;p 2 n n;p -2n 2,34:bca;4;c2v^10;p n 2 n;p -2n -2n,35;8;c2v^11;c m m 2;c 2 -2,35:cab;8;c2v^11;a 2 m m;a -2 2,35:bca;8;c2v^11;b m 2 m;b -2 -2,36;8;c2v^12;c m c 21;c 2c -2,36*;8;c2v^12;c m c 21*;c 21 -2,36:ba-c;8;c2v^12;c c m 21;c 2c -2c,36:ba-c*;8;c2v^12;c c m 21*;c 21 -2c,36:cab;8;c2v^12;a 21 m a;a -2a 2a,36:cab*;8;c2v^12;a 21 m a*;a -2a 21,36:-cba;8;c2v^12;a 21 a m;a -2 2a,36:-cba*;8;c2v^12;a 21 a m*;a -2 21,36:bca;8;c2v^12;b b 21 m;b -2 -2b,36:a-cb;8;c2v^12;b m 21 b;b -2b -2,37;8;c2v^13;c c c 2;c 2 -2c,37:cab;8;c2v^13;a 2 a a;a -2a 2,37:bca;8;c2v^13;b b 2 b;b -2b -2b,38;8;c2v^14;a m m 2;a 2 -2,38:ba-c;8;c2v^14;b m m 2;b 2 -2,38:cab;8;c2v^14;b 2 m m;b -2 2,38:-cba;8;c2v^14;c 2 m m;c -2 2,38:bca;8;c2v^14;c m 2 m;c -2 -2,38:a-cb;8;c2v^14;a m 2 m;a -2 -2,39;8;c2v^15;a e m 2;a 2 -2b,39;8;c2v^15;a b m 2;a 2 -2b,39:ba-c;8;c2v^15;b m a 2;b 2 -2a,39:cab;8;c2v^15;b 2 c m;b -2a 2,39:-cba;8;c2v^15;c 2 m b;c -2a 2,39:bca;8;c2v^15;c m 2 a;c -2a -2a,39:a-cb;8;c2v^15;a c 2 m;a -2b -2b,40;8;c2v^16;a m a 2;a 2 -2a,40:ba-c;8;c2v^16;b b m 2;b 2 -2b,40:cab;8;c2v^16;b 2 m b;b -2b 2,40:-cba;8;c2v^16;c 2 c m;c -2c 2,40:bca;8;c2v^16;c c 2 m;c -2c -2c,40:a-cb;8;c2v^16;a m 2 a;a -2a -2a,41;8;c2v^17;a e a 2;a 2 -2ab,41;8;c2v^17;a b a 2;a 2 -2ab;-b,41:ba-c;8;c2v^17;b b a 2;b 2 -2ab,41:cab;8;c2v^17;b 2 c b;b -2ab 2,41:-cba;8;c2v^17;c 2 c b;c -2ac 2,41:bca;8;c2v^17;c c 2 a;c -2ac -2ac,41:a-cb;8;c2v^17;a c 2 a;a -2ab -2ab,42;16;c2v^18;f m m 2;f 2 -2,42:cab;16;c2v^18;f 2 m m;f -2 2,42:bca;16;c2v^18;f m 2 m;f -2 -2,43;16;c2v^19;f d d 2;f 2 -2d,43:cab;16;c2v^19;f 2 d d;f -2d 2,43:bca;16;c2v^19;f d 2 d;f -2d -2d,44;8;c2v^20;i m m 2;i 2 -2,44:cab;8;c2v^20;i 2 m m;i -2 2,44:bca;8;c2v^20;i m 2 m;i -2 -2,45;8;c2v^21;i b a 2;i 2 -2c,45:cab;8;c2v^21;i 2 c b;i -2a 2,45:bca;8;c2v^21;i c 2 a;i -2b -2b,46;8;c2v^22;i m a 2;i 2 -2a,46:ba-c;8;c2v^22;i b m 2;i 2 -2b,46:cab;8;c2v^22;i 2 m b;i -2b 2,46:-cba;8;c2v^22;i 2 c m;i -2c 2,46:bca;8;c2v^22;i c 2 m;i -2c -2c,46:a-cb;8;c2v^22;i m 2 a;i -2a -2a,47;8;d2h^1;p m m m;-p 2 2,48:1;8;d2h^2;p n n n:1;p 2 2 -1n;-b,48:2;8;d2h^2;p n n n:2;-p 2ab 2bc,49;8;d2h^3;p c c m;-p 2 2c,49:cab;8;d2h^3;p m a a;-p 2a 2,49:bca;8;d2h^3;p b m b;-p 2b 2b,50:1;8;d2h^4;p b a n:1;p 2 2 -1ab;-b,50:2;8;d2h^4;p b a n:2;-p 2ab 2b,50:1cab;8;d2h^4;p n c b:1;p 2 2 -1bc,50:2cab;8;d2h^4;p n c b:2;-p 2b 2bc,50:1bca;8;d2h^4;p c n a:1;p 2 2 -1ac,50:2bca;8;d2h^4;p c n a:2;-p 2a 2c,51;8;d2h^5;p m m a;-p 2a 2a,51:ba-c;8;d2h^5;p m m b;-p 2b 2,51:cab;8;d2h^5;p b m m;-p 2 2b,51:-cba;8;d2h^5;p c m m;-p 2c 2c,51:bca;8;d2h^5;p m c m;-p 2c 2,51:a-cb;8;d2h^5;p m a m;-p 2 2a,52;8;d2h^6;p n n a;-p 2a 2bc,52:ba-c;8;d2h^6;p n n b;-p 2b 2n,52:cab;8;d2h^6;p b n n;-p 2n 2b,52:-cba;8;d2h^6;p c n n;-p 2ab 2c,52:bca;8;d2h^6;p n c n;-p 2ab 2n,52:a-cb;8;d2h^6;p n a n;-p 2n 2bc,53;8;d2h^7;p m n a;-p 2ac 2,53:ba-c;8;d2h^7;p n m b;-p 2bc 2bc,53:cab;8;d2h^7;p b m n;-p 2ab 2ab,53:-cba;8;d2h^7;p c n m;-p 2 2ac,53:bca;8;d2h^7;p n c m;-p 2 2bc,53:a-cb;8;d2h^7;p m a n;-p 2ab 2,54;8;d2h^8;p c c a;-p 2a 2ac,54:ba-c;8;d2h^8;p c c b;-p 2b 2c,54:cab;8;d2h^8;p b a a;-p 2a 2b,54:-cba;8;d2h^8;p c a a;-p 2ac 2c,54:bca;8;d2h^8;p b c b;-p 2bc 2b,54:a-cb;8;d2h^8;p b a b;-p 2b 2ab,55;8;d2h^9;p b a m;-p 2 2ab,55:cab;8;d2h^9;p m c b;-p 2bc 2,55:bca;8;d2h^9;p c m a;-p 2ac 2ac,56;8;d2h^10;p c c n;-p 2ab 2ac,56:cab;8;d2h^10;p n a a;-p 2ac 2bc,56:bca;8;d2h^10;p b n b;-p 2bc 2ab,57;8;d2h^11;p b c m;-p 2c 2b,57:ba-c;8;d2h^11;p c a m;-p 2c 2ac,57:cab;8;d2h^11;p m c a;-p 2ac 2a,57:-cba;8;d2h^11;p m a b;-p 2b 2a,57:bca;8;d2h^11;p b m a;-p 2a 2ab,57:a-cb;8;d2h^11;p c m b;-p 2bc 2c,58;8;d2h^12;p n n m;-p 2 2n,58:cab;8;d2h^12;p m n n;-p 2n 2,58:bca;8;d2h^12;p n m n;-p 2n 2n,59:1;8;d2h^13;p m m n:1;p 2 2ab -1ab;-b,59:2;8;d2h^13;p m m n:2;-p 2ab 2a,59:1cab;8;d2h^13;p n m m:1;p 2bc 2 -1bc,59:2cab;8;d2h^13;p n m m:2;-p 2c 2bc,59:1bca;8;d2h^13;p m n m:1;p 2ac 2ac -1ac,59:2bca;8;d2h^13;p m n m:2;-p 2c 2a,60;8;d2h^14;p b c n;-p 2n 2ab,60:ba-c;8;d2h^14;p c a n;-p 2n 2c,60:cab;8;d2h^14;p n c a;-p 2a 2n,60:-cba;8;d2h^14;p n a b;-p 2bc 2n,60:bca;8;d2h^14;p b n a;-p 2ac 2b,60:a-cb;8;d2h^14;p c n b;-p 2b 2ac,61;8;d2h^15;p b c a;-p 2ac 2ab,61:ba-c;8;d2h^15;p c a b;-p 2bc 2ac,62;8;d2h^16;p n m a;-p 2ac 2n,62:ba-c;8;d2h^16;p m n b;-p 2bc 2a,62:cab;8;d2h^16;p b n m;-p 2c 2ab,62:-cba;8;d2h^16;p c m n;-p 2n 2ac,62:bca;8;d2h^16;p m c n;-p 2n 2a,62:a-cb;8;d2h^16;p n a m;-p 2c 2n,63;16;d2h^17;c m c m;-c 2c 2,63:ba-c;16;d2h^17;c c m m;-c 2c 2c,63:cab;16;d2h^17;a m m a;-a 2a 2a,63:-cba;16;d2h^17;a m a m;-a 2 2a,63:bca;16;d2h^17;b b m m;-b 2 2b,63:a-cb;16;d2h^17;b m m b;-b 2b 2,64;16;d2h^18;c m c e;-c 2ac 2,64;16;d2h^18;c m c a;-c 2ac 2,64:ba-c;16;d2h^18;c c m b;-c 2ac 2ac,64:cab;16;d2h^18;a b m a;-a 2ab 2ab,64:-cba;16;d2h^18;a c a m;-a 2 2ab,64:bca;16;d2h^18;b b c m;-b 2 2ab,64:a-cb;16;d2h^18;b m a b;-b 2ab 2,65;16;d2h^19;c m m m;-c 2 2,65:cab;16;d2h^19;a m m m;-a 2 2,65:bca;16;d2h^19;b m m m;-b 2 2,66;16;d2h^20;c c c m;-c 2 2c,66:cab;16;d2h^20;a m a a;-a 2a 2,66:bca;16;d2h^20;b b m b;-b 2b 2b,67;16;d2h^21;c m m e;-c 2a 2,67;16;d2h^21;c m m a;-c 2a 2,67:ba-c;16;d2h^21;c m m b;-c 2a 2a,67:cab;16;d2h^21;a b m m;-a 2b 2b,67:-cba;16;d2h^21;a c m m;-a 2 2b,67:bca;16;d2h^21;b m c m;-b 2 2a,67:a-cb;16;d2h^21;b m a m;-b 2a 2,68:1;16;d2h^22;c c c e:1;c 2 2 -1ac;-b,68:1;16;d2h^22;c c c a:1;c 2 2 -1ac;-b,68:2;16;d2h^22;c c c e:2;-c 2a 2ac,68:2;16;d2h^22;c c c a:2;-c 2a 2ac,68:1ba-c;16;d2h^22;c c c b:1;c 2 2 -1ac,68:2ba-c;16;d2h^22;c c c b:2;-c 2a 2c,68:1cab;16;d2h^22;a b a a:1;a 2 2 -1ab,68:2cab;16;d2h^22;a b a a:2;-a 2a 2b,68:1-cba;16;d2h^22;a c a a:1;a 2 2 -1ab,68:2-cba;16;d2h^22;a c a a:2;-a 2ab 2b,68:1bca;16;d2h^22;b b c b:1;b 2 2 -1ab,68:2bca;16;d2h^22;b b c b:2;-b 2ab 2b,68:1a-cb;16;d2h^22;b b a b:1;b 2 2 -1ab,68:2a-cb;16;d2h^22;b b a b:2;-b 2b 2ab,69;32;d2h^23;f m m m;-f 2 2,70:1;32;d2h^24;f d d d:1;f 2 2 -1d;-b,70:2;32;d2h^24;f d d d:2;-f 2uv 2vw,71;16;d2h^25;i m m m;-i 2 2,72;16;d2h^26;i b a m;-i 2 2c,72:cab;16;d2h^26;i m c b;-i 2a 2,72:bca;16;d2h^26;i c m a;-i 2b 2b,73;16;d2h^27;i b c a;-i 2b 2c,73:ba-c;16;d2h^27;i c a b;-i 2a 2b,74;16;d2h^28;i m m a;-i 2b 2,74:ba-c;16;d2h^28;i m m b;-i 2a 2a,74:cab;16;d2h^28;i b m m;-i 2c 2c,74:-cba;16;d2h^28;i c m m;-i 2 2b,74:bca;16;d2h^28;i m c m;-i 2 2a,74:a-cb;16;d2h^28;i m a m;-i 2c 2,75;4;c4^1;p 4;p 4,76;4;c4^2;p 41;p 4w,76*;4;c4^2;p 41*;p 41,77;4;c4^3;p 42;p 4c,77*;4;c4^3;p 42*;p 42,78;4;c4^4;p 43;p 4cw,78*;4;c4^4;p 43*;p 43,79;8;c4^5;i 4;i 4,80;8;c4^6;i 41;i 4bw,81;4;s4^1;p -4;p -4,82;8;s4^2;i -4;i -4,83;8;c4h^1;p 4/m;-p 4,84;8;c4h^2;p 42/m;-p 4c,84*;8;c4h^2;p 42/m*;-p 42,85:1;8;c4h^3;p 4/n:1;p 4ab -1ab;-b,85:2;8;c4h^3;p 4/n:2;-p 4a,86:1;8;c4h^4;p 42/n:1;p 4n -1n;-b,86:2;8;c4h^4;p 42/n:2;-p 4bc,87;16;c4h^5;i 4/m;-i 4,88:1;16;c4h^6;i 41/a:1;i 4bw -1bw;-b,88:2;16;c4h^6;i 41/a:2;-i 4ad,89;8;d4^1;p 4 2 2;p 4 2,90;8;d4^2;p 4 21 2;p 4ab 2ab,91;8;d4^3;p 41 2 2;p 4w 2c,91*;8;d4^3;p 41 2 2*;p 41 2c,92;8;d4^4;p 41 21 2;p 4abw 2nw,93;8;d4^5;p 42 2 2;p 4c 2,93*;8;d4^5;p 42 2 2*;p 42 2,94;8;d4^6;p 42 21 2;p 4n 2n,95;8;d4^7;p 43 2 2;p 4cw 2c,95*;8;d4^7;p 43 2 2*;p 43 2c,96;8;d4^8;p 43 21 2;p 4nw 2abw,97;16;d4^9;i 4 2 2;i 4 2,98;16;d4^10;i 41 2 2;i 4bw 2bw,99;8;c4v^1;p 4 m m;p 4 -2,100;8;c4v^2;p 4 b m;p 4 -2ab,101;8;c4v^3;p 42 c m;p 4c -2c,101*;8;c4v^3;p 42 c m*;p 42 -2c,102;8;c4v^4;p 42 n m;p 4n -2n,103;8;c4v^5;p 4 c c;p 4 -2c,104;8;c4v^6;p 4 n c;p 4 -2n,105;8;c4v^7;p 42 m c;p 4c -2,105*;8;c4v^7;p 42 m c*;p 42 -2,106;8;c4v^8;p 42 b c;p 4c -2ab,106*;8;c4v^8;p 42 b c*;p 42 -2ab,107;16;c4v^9;i 4 m m;i 4 -2,108;16;c4v^10;i 4 c m;i 4 -2c,109;16;c4v^11;i 41 m d;i 4bw -2,110;16;c4v^12;i 41 c d;i 4bw -2c,111;8;d2d^1;p -4 2 m;p -4 2,112;8;d2d^2;p -4 2 c;p -4 2c,113;8;d2d^3;p -4 21 m;p -4 2ab,114;8;d2d^4;p -4 21 c;p -4 2n,115;8;d2d^5;p -4 m 2;p -4 -2,116;8;d2d^6;p -4 c 2;p -4 -2c,117;8;d2d^7;p -4 b 2;p -4 -2ab,118;8;d2d^8;p -4 n 2;p -4 -2n,119;16;d2d^9;i -4 m 2;i -4 -2,120;16;d2d^10;i -4 c 2;i -4 -2c,121;16;d2d^11;i -4 2 m;i -4 2,122;16;d2d^12;i -4 2 d;i -4 2bw,123;16;d4h^1;p 4/m m m;-p 4 2,124;16;d4h^2;p 4/m c c;-p 4 2c,125:1;16;d4h^3;p 4/n b m:1;p 4 2 -1ab;-b,125:2;16;d4h^3;p 4/n b m:2;-p 4a 2b,126:1;16;d4h^4;p 4/n n c:1;p 4 2 -1n;-b,126:2;16;d4h^4;p 4/n n c:2;-p 4a 2bc,127;16;d4h^5;p 4/m b m;-p 4 2ab,128;16;d4h^6;p 4/m n c;-p 4 2n,129:1;16;d4h^7;p 4/n m m:1;p 4ab 2ab -1ab;-b,129:2;16;d4h^7;p 4/n m m:2;-p 4a 2a,130:1;16;d4h^8;p 4/n c c:1;p 4ab 2n -1ab;-b,130:2;16;d4h^8;p 4/n c c:2;-p 4a 2ac,131;16;d4h^9;p 42/m m c;-p 4c 2,132;16;d4h^10;p 42/m c m;-p 4c 2c,133:1;16;d4h^11;p 42/n b c:1;p 4n 2c -1n;-b,133:2;16;d4h^11;p 42/n b c:2;-p 4ac 2b,134:1;16;d4h^12;p 42/n n m:1;p 4n 2 -1n;-b,134:2;16;d4h^12;p 42/n n m:2;-p 4ac 2bc,135;16;d4h^13;p 42/m b c;-p 4c 2ab,135*;16;d4h^13;p 42/m b c*;-p 42 2ab,136;16;d4h^14;p 42/m n m;-p 4n 2n,137:1;16;d4h^15;p 42/n m c:1;p 4n 2n -1n;-b,137:2;16;d4h^15;p 42/n m c:2;-p 4ac 2a,138:1;16;d4h^16;p 42/n c m:1;p 4n 2ab -1n;-b,138:2;16;d4h^16;p 42/n c m:2;-p 4ac 2ac,139;32;d4h^17;i 4/m m m;-i 4 2,140;32;d4h^18;i 4/m c m;-i 4 2c,141:1;32;d4h^19;i 41/a m d:1;i 4bw 2bw -1bw;-b,141:2;32;d4h^19;i 41/a m d:2;-i 4bd 2,142:1;32;d4h^20;i 41/a c d:1;i 4bw 2aw -1bw;-b,142:2;32;d4h^20;i 41/a c d:2;-i 4bd 2c,143;3;c3^1;p 3;p 3,144;3;c3^2;p 31;p 31,145;3;c3^3;p 32;p 32,146:h;9;c3^4;r 3:h;r 3,146:r;3;c3^4;r 3:r;p 3*,147;6;c3i^1;p -3;-p 3,148:h;18;c3i^2;r -3:h;-r 3,148:r;6;c3i^2;r -3:r;-p 3*,149;6;d3^1;p 3 1 2;p 3 2,150;6;d3^2;p 3 2 1;p 3 2",151;6;d3^3;p 31 1 2;p 31 2 (0 0 4),152;6;d3^4;p 31 2 1;p 31 2",153;6;d3^5;p 32 1 2;p 32 2 (0 0 2),154;6;d3^6;p 32 2 1;p 32 2",154:_2;6;d3^6;p 32 2 1;p 32 2" (0 0 4);-b,155:h;18;d3^7;r 3 2:h;r 3 2",155:r;6;d3^7;r 3 2:r;p 3* 2,156;6;c3v^1;p 3 m 1;p 3 -2",157;6;c3v^2;p 3 1 m;p 3 -2,158;6;c3v^3;p 3 c 1;p 3 -2"c,159;6;c3v^4;p 3 1 c;p 3 -2c,160:h;18;c3v^5;r 3 m:h;r 3 -2",160:r;6;c3v^5;r 3 m:r;p 3* -2,161:h;18;c3v^6;r 3 c:h;r 3 -2"c,161:r;6;c3v^6;r 3 c:r;p 3* -2n,162;12;d3d^1;p -3 1 m;-p 3 2,163;12;d3d^2;p -3 1 c;-p 3 2c,164;12;d3d^3;p -3 m 1;-p 3 2",165;12;d3d^4;p -3 c 1;-p 3 2"c,166:h;36;d3d^5;r -3 m:h;-r 3 2",166:r;12;d3d^5;r -3 m:r;-p 3* 2,167:h;36;d3d^6;r -3 c:h;-r 3 2"c,167:r;12;d3d^6;r -3 c:r;-p 3* 2n,168;6;c6^1;p 6;p 6,169;6;c6^2;p 61;p 61,170;6;c6^3;p 65;p 65,171;6;c6^4;p 62;p 62,172;6;c6^5;p 64;p 64,173;6;c6^6;p 63;p 6c,173*;6;c6^6;p 63*;p 63 ,174;6;c3h^1;p -6;p -6,175;12;c6h^1;p 6/m;-p 6,176;12;c6h^2;p 63/m;-p 6c,176*;12;c6h^2;p 63/m*;-p 63,177;12;d6^1;p 6 2 2;p 6 2,178;12;d6^2;p 61 2 2;p 61 2 (0 0 5),179;12;d6^3;p 65 2 2;p 65 2 (0 0 1),180;12;d6^4;p 62 2 2;p 62 2 (0 0 4),181;12;d6^5;p 64 2 2;p 64 2 (0 0 2),182;12;d6^6;p 63 2 2;p 6c 2c,182*;12;d6^6;p 63 2 2*;p 63 2c,183;12;c6v^1;p 6 m m;p 6 -2,184;12;c6v^2;p 6 c c;p 6 -2c,185;12;c6v^3;p 63 c m;p 6c -2,185*;12;c6v^3;p 63 c m*;p 63 -2,186;12;c6v^4;p 63 m c;p 6c -2c,186*;12;c6v^4;p 63 m c*;p 63 -2c,187;12;d3h^1;p -6 m 2;p -6 2,188;12;d3h^2;p -6 c 2;p -6c 2,189;12;d3h^3;p -6 2 m;p -6 -2,190;12;d3h^4;p -6 2 c;p -6c -2c,191;24;d6h^1;p 6/m m m;-p 6 2,192;24;d6h^2;p 6/m c c;-p 6 2c,193;24;d6h^3;p 63/m c m;-p 6c 2,193*;24;d6h^3;p 63/m c m*;-p 63 2,194;24;d6h^4;p 63/m m c;-p 6c 2c,194*;24;d6h^4;p 63/m m c*;-p 63 2c,195;12;t^1;p 2 3;p 2 2 3,196;48;t^2;f 2 3;f 2 2 3,197;24;t^3;i 2 3;i 2 2 3,198;12;t^4;p 21 3;p 2ac 2ab 3,199;24;t^5;i 21 3;i 2b 2c 3,200;24;th^1;p m -3;-p 2 2 3,201:1;24;th^2;p n -3:1;p 2 2 3 -1n;-b,201:2;24;th^2;p n -3:2;-p 2ab 2bc 3,202;96;th^3;f m -3;-f 2 2 3,203:1;96;th^4;f d -3:1;f 2 2 3 -1d;-b,203:2;96;th^4;f d -3:2;-f 2uv 2vw 3,204;48;th^5;i m -3;-i 2 2 3,205;24;th^6;p a -3;-p 2ac 2ab 3,206;48;th^7;i a -3;-i 2b 2c 3,207;24;o^1;p 4 3 2;p 4 2 3,208;24;o^2;p 42 3 2;p 4n 2 3,209;96;o^3;f 4 3 2;f 4 2 3,210;96;o^4;f 41 3 2;f 4d 2 3,211;48;o^5;i 4 3 2;i 4 2 3,212;24;o^6;p 43 3 2;p 4acd 2ab 3,213;24;o^7;p 41 3 2;p 4bd 2ab 3,214;48;o^8;i 41 3 2;i 4bd 2c 3,215;24;td^1;p -4 3 m;p -4 2 3,216;96;td^2;f -4 3 m;f -4 2 3,217;48;td^3;i -4 3 m;i -4 2 3,218;24;td^4;p -4 3 n;p -4n 2 3,219;96;td^5;f -4 3 c;f -4a 2 3,220;48;td^6;i -4 3 d;i -4bd 2c 3,221;48;oh^1;p m -3 m;-p 4 2 3,222:1;48;oh^2;p n -3 n:1;p 4 2 3 -1n;-b,222:2;48;oh^2;p n -3 n:2;-p 4a 2bc 3,223;48;oh^3;p m -3 n;-p 4n 2 3,224:1;48;oh^4;p n -3 m:1;p 4n 2 3 -1n;-b,224:2;48;oh^4;p n -3 m:2;-p 4bc 2bc 3,225;192;oh^5;f m -3 m;-f 4 2 3,226;192;oh^6;f m -3 c;-f 4a 2 3,227:1;192;oh^7;f d -3 m:1;f 4d 2 3 -1d;-b,227:2;192;oh^7;f d -3 m:2;-f 4vw 2vw 3,228:1;192;oh^8;f d -3 c:1;f 4d 2 3 -1ad;-b,228:2;192;oh^8;f d -3 c:2;-f 4ud 2vw 3,229;96;oh^9;i m -3 m;-i 4 2 3,230;96;oh^10;i a -3 d;-i 4bd 2c 3'.split(",")))});
aa("JS");X(null,"JS.HallInfo",["JU.P3i","$.SB","JS.HallRotationTerm","$.HallTranslation","JU.Logger"],function(){c$=P(function(){this.primitiveHallSymbol=this.hallSymbol=null;this.latticeCode="\x00";this.latticeExtension=null;this.isCentrosymmetric=!1;this.nRotations=0;this.vectorCode=this.vector12ths=this.rotationTerms=null;L(this,arguments)},JS,"HallInfo");ha(c$,function(){this.rotationTerms=Array(16)});C(c$,function(a){try{a.startsWith("Hall:")&&(a=a.substring(5).trim());var b=this.hallSymbol=
a.trim(),b=this.extractLatticeInfo(b);if(0!=JS.HallTranslation.getLatticeIndex(this.latticeCode)){this.latticeExtension=JS.HallTranslation.getLatticeExtension(this.latticeCode,this.isCentrosymmetric);b=this.extractVectorInfo(b)+this.latticeExtension;JU.Logger.debugging&&JU.Logger.debug("Hallinfo: "+a+" "+b);a=0;var c="\x00";for(this.primitiveHallSymbol="P";0<b.length&&16>this.nRotations;){var b=this.extractRotationInfo(b,a,c),d=this.rotationTerms[this.nRotations-1];a=d.order;c=d.axisType;this.primitiveHallSymbol+=
" "+d.primitiveCode}this.primitiveHallSymbol+=this.vectorCode}}catch(g){if(ea(g,Exception))JU.Logger.error("Invalid Hall symbol "+g),this.nRotations=0;else throw g;}},"~S");e(c$,"dumpInfo",function(){var a=new JU.SB;a.append("\nHall symbol: ").append(this.hallSymbol).append("\nprimitive Hall symbol: ").append(this.primitiveHallSymbol).append("\nlattice type: ").append(this.getLatticeDesignation());for(var b=0;b<this.nRotations;b++)a.append("\n\nrotation term ").appendI(b+1).append(this.rotationTerms[b].dumpInfo(this.vectorCode));
return a.toString()});e(c$,"getLatticeDesignation",function(){return JS.HallTranslation.getLatticeDesignation2(this.latticeCode,this.isCentrosymmetric)});e(c$,"extractLatticeInfo",function(a){var b=a.indexOf(" ");if(0>b)return"";var c=a.substring(0,b).toUpperCase();this.latticeCode=c.charAt(0);"-"==this.latticeCode&&(this.isCentrosymmetric=!0,this.latticeCode=c.charAt(1));return a.substring(b+1).trim()},"~S");e(c$,"extractVectorInfo",function(a){this.vector12ths=new JU.P3i;this.vectorCode="";var b=
a.indexOf("("),c=a.indexOf(")",b);0<b&&c>b&&(c=a.substring(b+1,c),this.vectorCode=" ("+c+")",a=a.substring(0,b).trim(),b=c.indexOf(" "),0<=b&&(this.vector12ths.x=Integer.parseInt(c.substring(0,b)),c=c.substring(b+1).trim(),b=c.indexOf(" "),0<=b&&(this.vector12ths.y=Integer.parseInt(c.substring(0,b)),c=c.substring(b+1).trim())),this.vector12ths.z=Integer.parseInt(c));return a},"~S");e(c$,"extractRotationInfo",function(a,b,c){var d=a.indexOf(" "),g;0<=d?(g=a.substring(0,d),a=a.substring(d+1).trim()):
(g=a,a="");this.rotationTerms[this.nRotations]=new JS.HallRotationTerm(this,g,b,c);this.nRotations++;return a},"~S,~N,~S");m(c$,"toString",function(){return this.hallSymbol})});aa("JS");X(["JU.M4"],"JS.HallRotationTerm",["JU.SB","JS.HallRotation","$.HallTranslation","$.SymmetryOperation","JU.Logger"],function(){c$=P(function(){this.seitzMatrix12ths=this.translation=this.rotation=this.translationString=this.lookupCode=this.primitiveCode=this.inputCode=null;this.isImproper=!1;this.order=0;this.diagonalReferenceAxis=
this.axisType="\x00";this.allPositive=!0;L(this,arguments)},JS,"HallRotationTerm");ha(c$,function(){this.seitzMatrix12ths=new JU.M4});C(c$,function(a,b,c,d){this.inputCode=b;b+="   ";"-"==b.charAt(0)&&(this.isImproper=!0,b=b.substring(1));this.primitiveCode="";this.order=b.charCodeAt(0)-48;this.axisType=this.diagonalReferenceAxis="\x00";var g=2,f;switch(f=b.charAt(1)){case "x":case "y":case "z":switch(b.charAt(2)){case "'":case '"':this.diagonalReferenceAxis=f,f=b.charAt(2),g++}case "*":this.axisType=
f;break;case "'":case '"':this.axisType=f;switch(b.charAt(2)){case "x":case "y":case "z":this.diagonalReferenceAxis=b.charAt(2);g++;break;default:this.diagonalReferenceAxis=d}break;default:this.axisType=1==this.order?"_":0==a.nRotations?"z":2==a.nRotations?"*":2==c||4==c?"x":"'",b=b.substring(0,1)+this.axisType+b.substring(1)}this.primitiveCode+="_"==this.axisType?"1":b.substring(0,2);"\x00"!=this.diagonalReferenceAxis&&(b=b.substring(0,1)+this.diagonalReferenceAxis+this.axisType+b.substring(g),this.primitiveCode+=
this.diagonalReferenceAxis,g=3);this.lookupCode=b.substring(0,g);this.rotation=JS.HallRotation.lookup(this.lookupCode);if(null==this.rotation)JU.Logger.error("Rotation lookup could not find "+this.inputCode+" ? "+this.lookupCode);else{this.translation=new JS.HallTranslation("\x00",null);this.translationString="";for(c=b.length;g<c;g++)d=b.charAt(g),d=JS.HallTranslation.getHallTranslation(d,this.order),null!=d&&(this.translationString+=""+d.translationCode,this.translation.rotationShift12ths+=d.rotationShift12ths,
this.translation.vectorShift12ths.add(d.vectorShift12ths));this.primitiveCode=(this.isImproper?"-":"")+this.primitiveCode+this.translationString;this.seitzMatrix12ths.setM4(this.isImproper?this.rotation.seitzMatrixInv:this.rotation.seitzMatrix);this.seitzMatrix12ths.m03=this.translation.vectorShift12ths.x;this.seitzMatrix12ths.m13=this.translation.vectorShift12ths.y;this.seitzMatrix12ths.m23=this.translation.vectorShift12ths.z;switch(this.axisType){case "x":this.seitzMatrix12ths.m03+=this.translation.rotationShift12ths;
break;case "y":this.seitzMatrix12ths.m13+=this.translation.rotationShift12ths;break;case "z":this.seitzMatrix12ths.m23+=this.translation.rotationShift12ths}0<a.vectorCode.length&&(g=JU.M4.newM4(null),c=JU.M4.newM4(null),a=a.vector12ths,g.m03=a.x,g.m13=a.y,g.m23=a.z,c.m03=-a.x,c.m13=-a.y,c.m23=-a.z,this.seitzMatrix12ths.mul2(g,this.seitzMatrix12ths),this.seitzMatrix12ths.mul(c));JU.Logger.debugging&&JU.Logger.debug("code = "+b+"; primitive code ="+this.primitiveCode+"\n Seitz Matrix(12ths):"+this.seitzMatrix12ths)}},
"JS.HallInfo,~S,~N,~S");e(c$,"dumpInfo",function(a){var b=new JU.SB;b.append("\ninput code: ").append(this.inputCode).append("; primitive code: ").append(this.primitiveCode).append("\norder: ").appendI(this.order).append(this.isImproper?" (improper axis)":"");"_"!=this.axisType&&(b.append("; axisType: ").appendC(this.axisType),"\x00"!=this.diagonalReferenceAxis&&b.appendC(this.diagonalReferenceAxis));0<this.translationString.length&&b.append("; translation: ").append(this.translationString);0<a.length&&
b.append("; vector offset: ").append(a);null!=this.rotation&&b.append("\noperator: ").append(this.getXYZ(this.allPositive)).append("\nSeitz matrix:\n").append(JS.SymmetryOperation.dumpSeitz(this.seitzMatrix12ths,!1));return b.toString()},"~S");e(c$,"getXYZ",function(a){return JS.SymmetryOperation.getXYZFromMatrix(this.seitzMatrix12ths,!0,a,!0)},"~B")});aa("JS");X(["JU.M4"],"JS.HallRotation",null,function(){c$=P(function(){this.seitzMatrixInv=this.seitzMatrix=this.rotCode=null;L(this,arguments)},JS,
"HallRotation");ha(c$,function(){this.seitzMatrix=new JU.M4;this.seitzMatrixInv=new JU.M4});C(c$,function(a,b){this.rotCode=a;var c=y(16,0),d=y(16,0);c[15]=d[15]=1;for(var g=0,f=0;11>f;g++){var e=0;switch(b.charAt(g)){case " ":f++;continue;case "+":case "1":e=1;break;case "-":e=-1}c[f]=e;d[f]=-e;f++}this.seitzMatrix.setA(c);this.seitzMatrixInv.setA(d)},"~S,~S");c$.lookup=e(c$,"lookup",function(a){for(var b=JS.HallRotation.getHallTerms().length;0<=--b;)if(JS.HallRotation.hallRotationTerms[b].rotCode.equals(a))return JS.HallRotation.hallRotationTerms[b];
return null},"~S");c$.getHallTerms=e(c$,"getHallTerms",function(){return null==JS.HallRotation.hallRotationTerms?JS.HallRotation.hallRotationTerms=Q(-1,[new JS.HallRotation("1_","+00 0+0 00+"),new JS.HallRotation("2x","+00 0-0 00-"),new JS.HallRotation("2y","-00 0+0 00-"),new JS.HallRotation("2z","-00 0-0 00+"),new JS.HallRotation("2'","0-0 -00 00-"),new JS.HallRotation('2"',"0+0 +00 00-"),new JS.HallRotation("2x'","-00 00- 0-0"),new JS.HallRotation('2x"',"-00 00+ 0+0"),new JS.HallRotation("2y'",
"00- 0-0 -00"),new JS.HallRotation('2y"',"00+ 0-0 +00"),new JS.HallRotation("2z'","0-0 -00 00-"),new JS.HallRotation('2z"',"0+0 +00 00-"),new JS.HallRotation("3x","+00 00- 0+-"),new JS.HallRotation("3y","-0+ 0+0 -00"),new JS.HallRotation("3z","0-0 +-0 00+"),new JS.HallRotation("3*","00+ +00 0+0"),new JS.HallRotation("4x","+00 00- 0+0"),new JS.HallRotation("4y","00+ 0+0 -00"),new JS.HallRotation("4z","0-0 +00 00+"),new JS.HallRotation("6x","+00 0+- 0+0"),new JS.HallRotation("6y","00+ 0+0 -0+"),new JS.HallRotation("6z",
"+-0 +00 00+")]):JS.HallRotation.hallRotationTerms});Y(c$,"hallRotationTerms",null)});aa("JS");X(null,"JS.HallTranslation",["JU.P3i"],function(){c$=P(function(){this.translationCode="\x00";this.rotationShift12ths=this.rotationOrder=0;this.vectorShift12ths=null;L(this,arguments)},JS,"HallTranslation");C(c$,function(a,b){this.translationCode=a;if(null!=b){if(0<=b.z){this.vectorShift12ths=b;return}this.rotationOrder=b.x;this.rotationShift12ths=b.y}this.vectorShift12ths=new JU.P3i},"~S,JU.P3i");c$.getHallLatticeEquivalent=
e(c$,"getHallLatticeEquivalent",function(a){var b=JS.HallTranslation.getLatticeCode(a);return(0<a?"-":"")+b+" 1"},"~N");c$.getLatticeIndex=e(c$,"getLatticeIndex",function(a){for(var b=1,c=3;b<=JS.HallTranslation.nLatticeTypes;b++,c+=3)if(JS.HallTranslation.latticeTranslationData[c].charAt(0)==a)return b;return 0},"~S");c$.getLatticeCode=e(c$,"getLatticeCode",function(a){0>a&&(a=-a);return 0==a?"\x00":a>JS.HallTranslation.nLatticeTypes?JS.HallTranslation.getLatticeCode(JS.HallTranslation.getLatticeIndex(String.fromCharCode(a))):
JS.HallTranslation.latticeTranslationData[3*a].charAt(0)},"~N");c$.getLatticeDesignation=e(c$,"getLatticeDesignation",function(a){var b=0<a;0>a&&(a=-a);return 0==a||a>JS.HallTranslation.nLatticeTypes?"":(b?"-":"")+JS.HallTranslation.getLatticeCode(a)+": "+(b?"centrosymmetric ":"")+JS.HallTranslation.latticeTranslationData[3*a+1]},"~N");c$.getLatticeDesignation2=e(c$,"getLatticeDesignation2",function(a,b){var c=JS.HallTranslation.getLatticeIndex(a);b||(c=-c);return JS.HallTranslation.getLatticeDesignation(c)},
"~S,~B");c$.getLatticeExtension=e(c$,"getLatticeExtension",function(a,b){for(var c=1,d=3;c<=JS.HallTranslation.nLatticeTypes;c++,d+=3)if(JS.HallTranslation.latticeTranslationData[d].charAt(0)==a)return JS.HallTranslation.latticeTranslationData[d+2]+(b?" -1":"");return""},"~S,~B");c$.getHallTerms=e(c$,"getHallTerms",function(){return null==JS.HallTranslation.hallTranslationTerms?JS.HallTranslation.hallTranslationTerms=Q(-1,[new JS.HallTranslation("a",JU.P3i.new3(6,0,0)),new JS.HallTranslation("b",
JU.P3i.new3(0,6,0)),new JS.HallTranslation("c",JU.P3i.new3(0,0,6)),new JS.HallTranslation("n",JU.P3i.new3(6,6,6)),new JS.HallTranslation("u",JU.P3i.new3(3,0,0)),new JS.HallTranslation("v",JU.P3i.new3(0,3,0)),new JS.HallTranslation("w",JU.P3i.new3(0,0,3)),new JS.HallTranslation("d",JU.P3i.new3(3,3,3)),new JS.HallTranslation("1",JU.P3i.new3(2,6,-1)),new JS.HallTranslation("1",JU.P3i.new3(3,4,-1)),new JS.HallTranslation("2",JU.P3i.new3(3,8,-1)),new JS.HallTranslation("1",JU.P3i.new3(4,3,-1)),new JS.HallTranslation("3",
JU.P3i.new3(4,9,-1)),new JS.HallTranslation("1",JU.P3i.new3(6,2,-1)),new JS.HallTranslation("2",JU.P3i.new3(6,4,-1)),new JS.HallTranslation("4",JU.P3i.new3(6,8,-1)),new JS.HallTranslation("5",JU.P3i.new3(6,10,-1)),new JS.HallTranslation("r",JU.P3i.new3(4,8,8)),new JS.HallTranslation("s",JU.P3i.new3(8,8,4)),new JS.HallTranslation("t",JU.P3i.new3(8,4,8))]):JS.HallTranslation.hallTranslationTerms});c$.getHallTranslation=e(c$,"getHallTranslation",function(a,b){for(var c=null,d=JS.HallTranslation.getHallTerms().length;0<=
--d;){var g=JS.HallTranslation.hallTranslationTerms[d];if(g.translationCode==a&&(0==g.rotationOrder||g.rotationOrder==b)){c=new JS.HallTranslation(a,null);c.translationCode=a;c.rotationShift12ths=g.rotationShift12ths;c.vectorShift12ths=g.vectorShift12ths;break}}return c},"~S,~N");Y(c$,"latticeTranslationData",Q(-1,"\x00;unknown;;P;primitive;;I;body-centered; 1n;R;rhombohedral; 1r 1r;F;face-centered; 1ab 1bc 1ac;A;A-centered; 1bc;B;B-centered; 1ac;C;C-centered; 1ab;S;rhombohedral(S); 1s 1s;T;rhombohedral(T); 1t 1t".split(";")));
c$.nLatticeTypes=c$.prototype.nLatticeTypes=E(JS.HallTranslation.latticeTranslationData.length/3)-1;Y(c$,"hallTranslationTerms",null)});aa("JS");X(["JU.M4","$.P3"],"JS.SymmetryOperation","java.lang.Boolean $.Character $.Float java.util.HashSet $.Hashtable JU.Lst $.Matrix $.Measure $.P4 $.PT $.SB $.V3 JS.Symmetry JU.BoxInfo $.Logger $.Parser".split(" "),function(){c$=P(function(){this.xyz=this.xyzCanonical=this.xyzOriginal=null;this.doNormalize=!0;this.isFinalized=!1;this.opId=0;this.info=this.centering=
null;this.opType=-1;this.opOrder=0;this.opIsCCW=this.opPlane=this.opAxis=this.opPoint2=this.opPoint=this.opTrans=null;this.isCoincident=this.isIrrelevant=!1;this.myLabels=null;this.modDim=0;this.rsvs=this.linearRotTrans=null;this.isBio=!1;this.sigma=null;this.number=0;this.subsystemCode=null;this.timeReversal=0;this.isCenteringOp=this.unCentered=!1;this.magOp=2147483647;this.divisor=12;this.opAxisCode=this.opX=null;this.opIsLong=!1;L(this,arguments)},JS,"SymmetryOperation",JU.M4);e(c$,"getOpName",
function(a){-1==this.opType&&this.setOpTypeAndOrder();switch(this.opType){case 0:return"I";case 1:return"Trans"+JS.SymmetryOperation.op48(this.opTrans);case 2:return"Rot"+this.opOrder+JS.SymmetryOperation.op48(this.opPoint)+JS.SymmetryOperation.op48(this.opAxis)+this.opIsCCW;case 4:return"Inv"+JS.SymmetryOperation.op48(this.opPoint);case 8:return(0==a?"":"Plane")+this.opPlane;case 3:return"Screw"+this.opOrder+JS.SymmetryOperation.op48(this.opPoint)+JS.SymmetryOperation.op48(this.opAxis)+JS.SymmetryOperation.op48(this.opTrans)+
this.opIsCCW;case 6:return"Nbar"+this.opOrder+JS.SymmetryOperation.op48(this.opPoint)+JS.SymmetryOperation.op48(this.opAxis)+this.opIsCCW;case 9:return(0==a?"":"Glide")+this.opPlane+(2==a?JS.SymmetryOperation.op48(this.opTrans):"")}System.out.println("SymmetryOperation REJECTED TYPE FOR "+this);return""},"~N");e(c$,"getOpTitle",function(){-1==this.opType&&this.setOpTypeAndOrder();switch(this.opType){case 0:return"identity ";case 1:return"translation "+JS.SymmetryOperation.opFrac(this.opTrans);case 2:return"rotation "+
this.opOrder;case 4:return"inversion center "+JS.SymmetryOperation.opFrac(this.opPoint);case 8:return"reflection ";case 3:return"screw rotation "+this.opOrder+(null==this.opIsCCW?"":this.opIsCCW===Boolean.TRUE?"(+) ":"(-) ")+JS.SymmetryOperation.opFrac(this.opTrans);case 6:return this.opOrder+"-bar "+(null==this.opIsCCW?"":this.opIsCCW===Boolean.TRUE?"(+) ":"(-) ")+JS.SymmetryOperation.opFrac(this.opPoint);case 9:return"glide reflection "+JS.SymmetryOperation.opFrac(this.opTrans)}return""});c$.opFrac=
e(c$,"opFrac",function(a){return"{"+JS.SymmetryOperation.opF(a.x)+" "+JS.SymmetryOperation.opF(a.y)+" "+JS.SymmetryOperation.opF(a.z)+"}"},"JU.T3");c$.opF=e(c$,"opF",function(a){var b=0>a;b&&(a=-a);var c=0;1<=a&&(c=u(a),a-=c);a=Math.round(48*a);var d;d=0==a%48?1:0==a%24?2:0==a%16?3:0==a%12?4:0==a%8?6:0==a%6?8:0==a%4?12:0==a%3?16:0==a%2?24:48;return(b?"-":"")+(c*d+E(a*d/48))+(1==d?"":"/"+d)},"~N");c$.op48=e(c$,"op48",function(a){return null==a?(System.err.println("SymmetryOperation.op48 null"),"(null)"):
"{"+Math.round(48*a.x)+" "+Math.round(48*a.y)+" "+Math.round(48*a.z)+"}"},"JU.T3");e(c$,"setSigma",function(a,b){this.subsystemCode=a;this.sigma=b},"~S,JU.Matrix");C(c$,function(a,b,c){pa(this,JS.SymmetryOperation,[]);this.doNormalize=c;null==a?this.opId=b:(this.xyzOriginal=a.xyzOriginal,this.xyz=a.xyz,this.divisor=a.divisor,this.opId=a.opId,this.modDim=a.modDim,this.myLabels=a.myLabels,this.number=a.number,this.linearRotTrans=a.linearRotTrans,this.sigma=a.sigma,this.subsystemCode=a.subsystemCode,
this.timeReversal=a.timeReversal,this.setMatrix(!1),a.isFinalized||this.doFinalize())},"JS.SymmetryOperation,~N,~B");e(c$,"setGamma",function(a){for(var b=3+this.modDim,c=(this.rsvs=new JU.Matrix(null,b+1,b+1)).getArray(),d=oa(b,0),g=0,f=0;f<b;f++){for(var e=0;e<b;e++)c[f][e]=this.linearRotTrans[g++];d[f]=(a?-1:1)*this.linearRotTrans[g++]}c[b][b]=1;a&&(this.rsvs=this.rsvs.inverse());for(f=0;f<b;f++)c[f][b]=d[f];c=this.rsvs.getSubmatrix(0,0,3,3).getArray();for(f=0;3>f;f++)for(e=0;4>e;e++)this.setElement(f,
e,3>e?c[f][e]:d[f]);this.setElement(3,3,1)},"~B");e(c$,"doFinalize",function(){JS.SymmetryOperation.div12(this,this.divisor);if(0<this.modDim)for(var a=this.rsvs.getArray(),b=a.length-1;0<=--b;)a[b][3+this.modDim]=JS.SymmetryOperation.finalizeD(a[b][3+this.modDim],this.divisor);this.isFinalized=!0});c$.div12=e(c$,"div12",function(a,b){a.m03=JS.SymmetryOperation.finalizeF(a.m03,b);a.m13=JS.SymmetryOperation.finalizeF(a.m13,b);a.m23=JS.SymmetryOperation.finalizeF(a.m23,b);return a},"JU.M4,~N");c$.finalizeF=
e(c$,"finalizeF",function(a,b){if(0==b){if(0==a)return 0;var c=u(a);return 1*(c>>8)/(c&255)}return a/b},"~N,~N");c$.finalizeD=e(c$,"finalizeD",function(a,b){if(0==b){if(0==a)return 0;var c=E(a);return 1*(c>>8)/(c&255)}return a/b},"~N,~N");e(c$,"getXyz",function(a){return a&&0==this.modDim||null==this.xyzOriginal?this.xyz:this.xyzOriginal},"~B");e(c$,"getxyzTrans",function(a){var b=JU.M4.newM4(this);b.add(a);return JS.SymmetryOperation.getXYZFromMatrix(b,!1,!1,!1)},"JU.T3");e(c$,"dumpInfo",function(){return"\n"+
this.xyz+"\ninternal matrix representation:\n"+this.toString()});c$.dumpSeitz=e(c$,"dumpSeitz",function(a,b){for(var c=new JU.SB,d=y(4,0),g=0;3>g;g++){a.getRow(g,d);c.append("[\t");for(var f=0;3>f;f++)c.appendI(u(d[f])).append("\t");f=d[3];f!=u(f)&&(f*=12);c.append(JS.SymmetryOperation.twelfthsOf(b?JS.SymmetryOperation.normalizeTwelfths(f/12,12,!0):u(f))).append("\t]\n")}return c.toString()},"JU.M4,~B");e(c$,"setMatrixFromXYZ",function(a,b,c){if(null==a)return!1;this.xyzOriginal=a;this.divisor=JS.SymmetryOperation.setDivisor(a);
a=a.toLowerCase();this.setModDim(b);var d=!1,g=!0;a.startsWith("!")&&(a.startsWith("!nohalf!")?(g=!1,this.xyzOriginal=a=a.substring(8)):(d=!1,a=a.substring(1)));if(0==a.indexOf("xyz matrix:"))return this.xyz=a,JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans),this.setFromMatrix(null,d);if(0==a.indexOf("[[")){a=a.$replace("["," ").$replace("]"," ").$replace(","," ");JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans);for(b=this.linearRotTrans.length;0<=--b;)if(Float.isNaN(this.linearRotTrans[b]))return!1;
this.setMatrix(d);this.isFinalized=!0;this.xyz=(this.isBio=0<=a.indexOf("bio"))?this.xyzOriginal=ka(this,JS.SymmetryOperation,"toString",[]):JS.SymmetryOperation.getXYZFromMatrix(this,!1,!1,!1);return!0}if(0==b&&0<=a.indexOf("x4"))for(b=14;4<=--b;)if(0<=a.indexOf("x"+b)){this.setModDim(b-3);break}b=null;a.endsWith("m")?(this.timeReversal=0<=a.indexOf("-m")?-1:1,c=!0):0<=a.indexOf("mz)")&&(c=a.indexOf("("),b=a.substring(c+1,a.length-1),a=a.substring(0,c),c=!1);g=JS.SymmetryOperation.getMatrixFromString(this,
a,this.linearRotTrans,c,g);if(null==g)return!1;this.xyzCanonical=g;null!=b&&(c=1==JU.M4.newA16(this.linearRotTrans).determinant3(),this.timeReversal=0>a.indexOf("-x")==0>b.indexOf("-mx")==c?1:-1);this.setMatrix(d);this.xyz=d?JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,!1):this.doNormalize?g:a;0!=this.timeReversal&&(this.xyz+=1==this.timeReversal?",m":",-m");JU.Logger.debugging&&JU.Logger.debug(""+this);return!0},"~S,~N,~B");c$.setDivisor=e(c$,"setDivisor",function(a){for(var b=a.indexOf("/"),
c=a.length;0<b&&b<c-1;){var d=a.charAt(b+1);if(0>"2346".indexOf(d)||b<c-2&&Character.isDigit(a.charAt(b+2)))return 0;b=a.indexOf("/",b+1)}return 12},"~S");e(c$,"setModDim",function(a){this.modDim=a;0<a&&(this.myLabels=JS.SymmetryOperation.labelsXn);this.linearRotTrans=y((a+4)*(a+4),0)},"~N");e(c$,"setMatrix",function(a){16<this.linearRotTrans.length?this.setGamma(a):(this.setA(this.linearRotTrans),a&&(a=JU.P3.new3(this.m03,this.m13,this.m23),this.invert(),this.rotate(a),a.scale(-1),this.setTranslation(a)))},
"~B");e(c$,"setFromMatrix",function(a,b){var c=0,d=0;this.myLabels=0==this.modDim?JS.SymmetryOperation.labelsXYZ:JS.SymmetryOperation.labelsXn;for(var g=0,f=3+this.modDim,e=0;g<f;e++){if(Float.isNaN(this.linearRotTrans[e]))return!1;c=this.linearRotTrans[e];1E-5>Math.abs(c)&&(c=0);if(0==(e+1)%(f+1)){var j=0==this.divisor?u(c)&255:this.divisor;0==j&&(j=12);c=JS.SymmetryOperation.finalizeF(c,this.divisor);null!=a&&d<a.length&&(c+=a[d++]);c=JS.SymmetryOperation.normalizeTwelfths((0>c?-1:1)*Math.abs(c*
j)/j,j,this.doNormalize);0==this.divisor&&(c=JS.SymmetryOperation.toDivisor(c,j));g++}this.linearRotTrans[e]=c}this.linearRotTrans[this.linearRotTrans.length-1]=this.divisor;this.setMatrix(b);this.isFinalized=null==a;this.xyz=JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,!1);return!0},"~A,~B");c$.getMatrixFromXYZ=e(c$,"getMatrixFromXYZ",function(a,b){var c=y(16,0);a=JS.SymmetryOperation.getMatrixFromString(null,a,c,!1,b);if(null==a)return null;var d=new JU.M4;d.setA(c);return JS.SymmetryOperation.div12(d,
JS.SymmetryOperation.setDivisor(a))},"~S,~B");c$.getJmolCanonicalXYZ=e(c$,"getJmolCanonicalXYZ",function(a){try{return JS.SymmetryOperation.getMatrixFromString(null,a,null,!1,!0)}catch(b){if(ea(b,Exception))return null;throw b;}},"~S");c$.getMatrixFromString=e(c$,"getMatrixFromString",function(a,b,c,d,g){var f=!1,e=!1,j=!1;b=JU.PT.rep(b,"[bio[","");var k=null==a?0:a.modDim,l=4+k,p=null==a?JS.SymmetryOperation.setDivisor(b):a.divisor,n=g&&(null==a?!b.startsWith("!"):a.doNormalize),q=0<k?3:0;null!=
c&&(c[c.length-1]=1);var m=b.indexOf(";")+1;0!=m&&(d=!0,m==b.length&&(b+="0,0,0"));var r=-1;a=null==a||0==k?null:a.myLabels;null==a&&(a=JS.SymmetryOperation.labelsXYZ);b=b.toLowerCase()+",";b=b.$replace("(",",");0<k&&(b=JS.SymmetryOperation.replaceXn(b,k+3));for(var s=0,y=0,x=0,t,z=0,E=0,R=0,D=1,B="",N="",H=I(1,0),v=b.length,G=0;G<v;G++){switch(t=b.charAt(G)){case ";":break;case "'":case " ":case "{":case "}":case "!":continue;case "-":j=!0;continue;case "+":j=!1;continue;case "/":E=0;f=!0;continue;
case "x":case "y":case "z":case "a":case "b":case "c":case "d":case "e":case "f":case "g":case "h":y=x*l;f="x"<=t?t.charCodeAt(0)-120:t.charCodeAt(0)-97+q;s=y+f;j=j?-1:1;d&&0!=z?(null!=c&&(c[s]=z),j=u(z),z=0):null!=c&&(c[s]=j);B+=JS.SymmetryOperation.plusMinus(B,j,a[f],!1);break;case ",":if(0!=m){if(0<m){r=G;G=m-1;m=-G;E=z=0;continue}m=G+1;G=r}z=JS.SymmetryOperation.normalizeTwelfths(z,0==E?12:0==p?E:p,n);null!=c&&(c[y+l-1]=0==p&&0<E?z=JS.SymmetryOperation.toDivisor(R,E):z);B+=JS.SymmetryOperation.xyzFraction12(z,
0==p?E:p,!1,g);N+=(""===N?"":",")+B;if(x==l-2)return N;E=R=z=0;B="";if(2<x++&&0==k)return JU.Logger.warn("Symmetry Operation? "+b),null;break;case ".":e=!0;D=1;continue;case "0":if(!e&&12==p&&(f||!d))continue;default:var F=t.charCodeAt(0)-48;if(0<=F&&9>=F){if(e){D/=10;0>z&&(j=!0);z+=D*F*(j?-1:1);continue}if(f){H[0]=G;E=JU.PT.parseIntNext(b,H);if(0>E)return null;G=H[0]-1;0==z?null!=c&&(c[s]/=E):(R=u(z),z/=E)}else z=10*z+(j?-1:1)*F}else JU.Logger.warn("symmetry character?"+t)}e=f=j=!1}return null},
"JS.SymmetryOperation,~S,~A,~B,~B");c$.replaceXn=e(c$,"replaceXn",function(a,b){for(var c=b;0<=--c;)a=JU.PT.rep(a,JS.SymmetryOperation.labelsXn[c],JS.SymmetryOperation.labelsXnSub[c]);return a},"~S,~N");c$.toDivisor=e(c$,"toDivisor",function(a,b){var c=u(a);c!=a&&(c=a-c,b=u(Math.abs(b/c)),c=u(Math.abs(a)/c));return(c<<8)+b},"~N,~N");c$.xyzFraction12=e(c$,"xyzFraction12",function(a,b,c,d){if(0==a)return"";12!=b&&(a=u(a),b=a&255,a>>=8);var g=E(b/2);if(c)for(;0>a;)a+=b;else if(d){for(;a>g;)a-=b;for(;a<
-g;)a+=b}b=12==b?JS.SymmetryOperation.twelfthsOf(a):0==a?"0":a+"/"+b;return"0"==b.charAt(0)?"":0<a?"+"+b:b},"~N,~N,~B,~B");c$.twelfthsOf=e(c$,"twelfthsOf",function(a){var b="";0>a&&(a=-a,b="-");var c=12,d=Math.round(a);if(0.01<Math.abs(d-a)){a/=12;for(c=3;20>c;c++){var g=a*c,d=Math.round(g);if(0.01>Math.abs(d-g))break}if(20==c)return b+a}else{if(12==d)return b+"1";if(12>d)return b+JS.SymmetryOperation.twelfths[d%12];switch(d%12){case 0:return b+E(d/12);case 2:case 10:c=6;break;case 3:case 9:c=4;break;
case 4:case 8:c=3;break;case 6:c=2}d=E(d*c/12)}return b+d+"/"+c},"~N");c$.plusMinus=e(c$,"plusMinus",function(a,b,c,d){var g;return(0==b?"":(0>b?"-":0==a.length?"":"+")+(1==b||-1==b?"":1>(g=Math.abs(b))&&d?JS.SymmetryOperation.twelfthsOf(12*g):""+u(g)))+c},"~S,~N,~S,~B");c$.normalizeTwelfths=e(c$,"normalizeTwelfths",function(a,b,c){a*=b;var d=E(b/2);if(c){for(;a>d;)a-=b;for(;a<=-d;)a+=b}return a},"~N,~N,~B");c$.getXYZFromMatrix=e(c$,"getXYZFromMatrix",function(a,b,c,d){return JS.SymmetryOperation.getXYZFromMatrixFrac(a,
b,c,d,!1)},"JU.M4,~B,~B,~B");c$.getXYZFromMatrixFrac=e(c$,"getXYZFromMatrixFrac",function(a,b,c,d,g){var f="",e=S(a,JS.SymmetryOperation)?a:null;if(null!=e&&0<e.modDim)return JS.SymmetryOperation.getXYZFromRsVs(e.rsvs.getRotation(),e.rsvs.getTranslation(),b);var e=y(4,0),j=u(a.getElement(3,3));1==j?j=12:a.setElement(3,3,1);for(var k=0;3>k;k++){var l=3>k?0:3;a.getRow(k,e);for(var p="",n=0;3>n;n++){var q=e[n];0!=JS.SymmetryOperation.approx(q)&&(p+=JS.SymmetryOperation.plusMinus(p,q,JS.SymmetryOperation.labelsXYZ[n+
l],g))}if(0!=(b?e[3]:JS.SymmetryOperation.approx(e[3])))p+=JS.SymmetryOperation.xyzFraction12(b?e[3]:e[3]*j,j,c,d);f+=","+p}return f.substring(1)},"JU.M4,~B,~B,~B,~B");e(c$,"rotateAxes",function(a,b,c,d){var g=Array(3);this.getRotationScale(d);for(var f=a.length;0<=--f;)c.setT(a[f]),b.toFractional(c,!0),d.rotate(c),b.toCartesian(c,!0),g[f]=JU.V3.newV(c);return g},"~A,JS.UnitCell,JU.P3,JU.M3");e(c$,"fcoord2",function(a){return 12==this.divisor?JS.SymmetryOperation.fcoord(a):this.fc2(u(this.linearRotTrans[3]))+
" "+this.fc2(u(this.linearRotTrans[7]))+" "+this.fc2(u(this.linearRotTrans[11]))},"JU.T3");e(c$,"fc2",function(a){var b=a&255;a>>=8;return 0==a?"0":a+"/"+b},"~N");c$.fcoord=e(c$,"fcoord",function(a){return JS.SymmetryOperation.fc(a.x)+" "+JS.SymmetryOperation.fc(a.y)+" "+JS.SymmetryOperation.fc(a.z)},"JU.T3");c$.fc=e(c$,"fc",function(a){var b=Math.abs(a);a=0>a?"-":"";b=u(JS.SymmetryOperation.approx(24*b));return b/24==u(b/24)?a+E(b/24):0!=b%8?a+JS.SymmetryOperation.twelfthsOf(b>>1):0==b?"0":24==b?
a+"1":a+E(b/8)+"/3"},"~N");c$.approx=e(c$,"approx",function(a){return JU.PT.approx(a,100)},"~N");c$.approx6=e(c$,"approx6",function(a){return JU.PT.approx(a,1E6)},"~N");c$.getXYZFromRsVs=e(c$,"getXYZFromRsVs",function(a,b,c){a=a.getArray();b=b.getArray();for(var d=a.length,g="",f=0;f<d;f++){for(var g=g+",",e=0;e<d;e++){var j=a[f][e];0!=j&&(g+=(0>j?"-":g.endsWith(",")?"":"+")+(1==Math.abs(j)?"":""+E(Math.abs(j)))+"x"+(e+1))}g+=JS.SymmetryOperation.xyzFraction12(E(b[f][0]*(c?1:12)),12,!1,!0)}return JU.PT.rep(g.substring(1),
",+",",")},"JU.Matrix,JU.Matrix,~B");e(c$,"toString",function(){return null==this.rsvs?ka(this,JS.SymmetryOperation,"toString",[]):ka(this,JS.SymmetryOperation,"toString",[])+" "+this.rsvs.toString()});e(c$,"getMagneticOp",function(){return 2147483647==this.magOp?this.magOp=u(this.determinant3()*this.timeReversal):this.magOp});e(c$,"setTimeReversal",function(a){this.timeReversal=a;0<=this.xyz.indexOf("m")&&(this.xyz=this.xyz.substring(0,this.xyz.indexOf("m")));0!=a&&(this.xyz+=1==a?",m":",-m")},"~N");
e(c$,"getCentering",function(){this.isFinalized||this.doFinalize();null==this.centering&&!this.unCentered&&(0==this.modDim&&1==this.m00&&1==this.m11&&1==this.m22&&0==this.m01&&0==this.m02&&0==this.m10&&0==this.m12&&0==this.m20&&0==this.m21&&(0!=this.m03||0!=this.m13||0!=this.m23)?(this.isCenteringOp=!0,this.centering=JU.V3.new3(this.m03,this.m13,this.m23)):(this.unCentered=!0,this.centering=null));return this.centering});e(c$,"fixMagneticXYZ",function(a,b,c){if(0==this.timeReversal)return b;var d=
b.indexOf("m"),d=d-E((3-this.timeReversal)/2);b=0>d?b:b.substring(0,d);if(!c)return b+(0<this.timeReversal?" +1":" -1");a=JU.M4.newM4(a);a.m03=a.m13=a.m23=0;0>this.getMagneticOp()&&a.scale(-1);return b+="("+JU.PT.rep(JU.PT.rep(JU.PT.rep(JS.SymmetryOperation.getXYZFromMatrix(a,!1,!1,!1),"x","mx"),"y","my"),"z","mz")+")"},"JU.M4,~S,~B");e(c$,"getInfo",function(){null==this.info&&(this.info=new java.util.Hashtable,this.info.put("xyz",this.xyz),null!=this.centering&&this.info.put("centering",this.centering),
this.info.put("index",Integer.$valueOf(this.number-1)),this.info.put("isCenteringOp",Boolean.$valueOf(this.isCenteringOp)),null!=this.linearRotTrans&&this.info.put("linearRotTrans",this.linearRotTrans),this.info.put("modulationDimension",Integer.$valueOf(this.modDim)),this.info.put("matrix",JU.M4.newM4(this)),3.4028235E38!=this.magOp&&this.info.put("magOp",Float.$valueOf(this.magOp)),this.info.put("id",Integer.$valueOf(this.opId)),this.info.put("timeReversal",Integer.$valueOf(this.timeReversal)),
null!=this.xyzOriginal&&this.info.put("xyzOriginal",this.xyzOriginal));return this.info});c$.normalizeOperationToCentroid=e(c$,"normalizeOperationToCentroid",function(a,b,c,d,g){if(!(0>=g)){var f=0,e=0,j=0;null==JS.SymmetryOperation.atomTest&&(JS.SymmetryOperation.atomTest=new JU.P3);for(var k=d+g;d<k;d++)JS.Symmetry.newPoint(b,c[d],0,0,0,JS.SymmetryOperation.atomTest),f+=JS.SymmetryOperation.atomTest.x,e+=JS.SymmetryOperation.atomTest.y,j+=JS.SymmetryOperation.atomTest.z;f/=g;e/=g;for(j/=g;-0.001>
f||1.001<=f;)b.m03+=0>f?1:-1,f+=0>f?1:-1;if(1<a)for(;-0.001>e||1.001<=e;)b.m13+=0>e?1:-1,e+=0>e?1:-1;if(2<a)for(;-0.001>j||1.001<=j;)b.m23+=0>j?1:-1,j+=0>j?1:-1}},"~N,JU.M4,~A,~N,~N");c$.getLatticeCentering=e(c$,"getLatticeCentering",function(a){for(var b=new JU.Lst,c=0;c<a.length;c++){var d=null==a[c]?null:a[c].getCentering();null!=d&&b.addLast(JU.P3.newP(d))}return b},"~A");e(c$,"getOpIsCCW",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opIsCCW});e(c$,"getOpType",function(){-1==
this.opType&&this.setOpTypeAndOrder();return this.opType});e(c$,"getOpOrder",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opOrder});e(c$,"getOpPoint",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opPoint});e(c$,"getOpAxis",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opAxis});e(c$,"getOpPoint2",function(){return this.opPoint2});e(c$,"getOpTrans",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opTrans});c$.opGet3code=e(c$,
"opGet3code",function(a){for(var b=0,c=y(4,0),d=0;3>d;d++){a.getRow(d,c);for(var e=0;3>e;e++)switch(u(c[e])){case 1:b|=e+1<<(2-d<<3);break;case -1:b|=16+e+1<<(2-d<<3)}}return b},"JU.M4");c$.opGet3x=e(c$,"opGet3x",function(a){if(0!=a.m22)return JS.SymmetryOperation.x;a=JS.SymmetryOperation.opGet3code(a);for(var b=0;8>b;b++)if(a==JS.SymmetryOperation.C3codes[b])return null==JS.SymmetryOperation.xneg&&(JS.SymmetryOperation.xneg=JU.V3.newV(JS.SymmetryOperation.x),JS.SymmetryOperation.xneg.scale(-1)),
JS.SymmetryOperation.xneg;return JS.SymmetryOperation.x},"JU.M4");e(c$,"setOpTypeAndOrder",function(){this.clearOp();var a=Math.round(this.determinant3()),b=Math.round(this.m00+this.m11+this.m22),c=0,d=0,e=JS.SymmetryOperation.x;switch(b){case 3:JS.SymmetryOperation.hasTrans(this)?(this.opType=1,this.opTrans=new JU.V3,this.getTranslation(this.opTrans),this.opOrder=2):(this.opType=0,this.opOrder=1);return;case -3:this.opType=4;c=2;break;default:c=b*a+3,5==c&&(c=6),0<a?(this.opType=2,d=E(180*Math.acos((b-
1)/2)/3.141592653589793),120==d&&(null==this.opX&&(this.opX=JS.SymmetryOperation.opGet3x(this)),e=this.opX)):2==c?this.opType=8:(this.opType=6,3==c&&(c=6),d=E(180*Math.acos((-b-1)/2)/3.141592653589793),120==d&&(null==this.opX&&(this.opX=JS.SymmetryOperation.opGet3x(this)),e=this.opX))}this.opOrder=c;var f=new JU.M4,a=new JU.P3,b=JU.P3.newP(e);f.setM4(this);for(var h=new JU.P3,j=JU.P3.newP(b),k=new JU.P3,l=JU.P3.newP(b),p=new JU.P3,n=1;n<c;n++)f.mul(this),this.rotTrans(a),this.rotTrans(b),1==n&&p.setT(b),
h.add(a),j.add(b),6==this.opType&&(0==n%2?l.add(b):k.add(b));this.opTrans=new JU.V3;f.getTranslation(this.opTrans);this.opTrans.scale(1/c);f=JS.SymmetryOperation.approx6(this.opTrans.length());0==f&&(this.opTrans=null);p=1;this.opPoint=new JU.P3;var n=null,q=!0;switch(this.opType){case 4:j.add2(b,e);j.scale(0.5);this.opPoint=JU.P3.newP(JS.SymmetryOperation.opClean6(j));q=JS.SymmetryOperation.checkOpPoint(this.opPoint);break;case 6:k.scale(2/c);l.scale(2/c);n=JU.V3.newVsub(k,l);n.normalize();this.opAxis=
JS.SymmetryOperation.opClean6(n);h.add2(k,l);j.scale(1/c);this.opPoint.setT(JS.SymmetryOperation.opClean6(j));q=JS.SymmetryOperation.checkOpPoint(this.opPoint);180!=d&&(b.cross(e,b),this.opIsCCW=Boolean.$valueOf(0>b.dot(n)));break;case 2:n=JU.V3.newVsub(j,h);n.normalize();this.opAxis=JS.SymmetryOperation.opClean6(n);h.scale(1/c);a.setT(h);0<f&&h.sub(this.opTrans);this.opPoint.setT(JS.SymmetryOperation.opClean6(h));180!=d&&(b.cross(e,b),this.opIsCCW=Boolean.$valueOf(0>b.dot(n)));if(q=(new Boolean(q&
JS.SymmetryOperation.checkOpAxis(a,0==f?this.opAxis:this.opTrans,h,new JU.V3,new JU.V3,null))).valueOf())this.opPoint.setT(h),JS.SymmetryOperation.checkOpAxis(this.opPoint,this.opAxis,h,new JU.V3,new JU.V3,this.opPoint)&&(this.opPoint2=JU.P3.newP(h)),0<f&&(h.scaleAdd2(0.5,this.opTrans,this.opPoint),q=JS.SymmetryOperation.checkOpPoint(h),null!=this.opPoint2&&(h.scaleAdd2(0.5,this.opTrans,this.opPoint2),JS.SymmetryOperation.checkOpPoint(h)||(this.opPoint2=null)));0>n.dot(a)&&(q=!1);0<f&&0==this.opTrans.z&&
1.25==this.opTrans.lengthSquared()?(p=1.25,this.opIsLong=!0):p=0.78;break;case 8:this.opPoint.setT(a),this.opPoint.scale(0.5),JS.SymmetryOperation.approx6(this.opPoint.length()),this.opTrans=JU.V3.newV(a),this.rotTrans(this.opTrans),this.opTrans.scale(0.5),f=JS.SymmetryOperation.approx6(this.opTrans.length()),this.opAxis=JU.V3.newVsub(b,e),0<f&&(this.opAxis.sub(this.opTrans),this.normalizeOpTrans(this.opTrans)),this.opAxis.normalize(),JS.SymmetryOperation.approx6Pt(this.opAxis),this.opPlane=new JU.P4,
q=JS.SymmetryOperation.checkOpPlane(this.opPoint,this.opAxis,this.opPlane),JS.SymmetryOperation.normalizePlane(this.opPlane),this.opAxis.setT(this.opPlane),0<f&&0==this.opTrans.z&&1.25==this.opTrans.lengthSquared()?(p=1.25,this.opIsLong=!0):p=0.78}if(0<f){if(this.opType|=1,JS.SymmetryOperation.opClean6(this.opTrans),Math.abs(JS.SymmetryOperation.approx(this.opTrans.x))>=p||Math.abs(JS.SymmetryOperation.approx(this.opTrans.y))>=p||Math.abs(JS.SymmetryOperation.approx(this.opTrans.z))>=p)q=!1}else this.opTrans=
null;q||(this.isIrrelevant=!0)});e(c$,"normalizeOpTrans",function(){},"JU.V3");c$.normalizePlane=e(c$,"normalizePlane",function(a){JS.SymmetryOperation.approx6Pt(a);a.w=JS.SymmetryOperation.approx6(a.w);(0<a.w||0==a.w&&(0>a.x||0==a.x&&0>a.y||0==a.y&&0>a.z))&&a.scale4(-1);JS.SymmetryOperation.opClean6(a);a.w=JS.SymmetryOperation.approx6(a.w)},"JU.P4");c$.isCoaxial=e(c$,"isCoaxial",function(a){return 1==Math.abs(JS.SymmetryOperation.approx(a.x))||1==Math.abs(JS.SymmetryOperation.approx(a.y))||1==Math.abs(JS.SymmetryOperation.approx(a.z))},
"JU.T3");e(c$,"clearOp",function(){this.isFinalized||this.doFinalize();this.isIrrelevant=!1;this.opIsCCW=this.opPlane=this.opPoint=this.opPoint2=this.opTrans=null;this.opIsLong=!1});c$.hasTrans=e(c$,"hasTrans",function(a){return 0!=JS.SymmetryOperation.approx6(a.m03)||0!=JS.SymmetryOperation.approx6(a.m13)||0!=JS.SymmetryOperation.approx6(a.m23)},"JU.M4");c$.checkOpAxis=e(c$,"checkOpAxis",function(a,b,c,d,e,f){null==JS.SymmetryOperation.opPlanes&&(JS.SymmetryOperation.opPlanes=JU.BoxInfo.getBoxFacesFromOABC(null));
for(var h=JU.BoxInfo.faceOrder,j=null==f?1:-1,k=0;6>k;k++){var l=JU.Measure.getIntersection(a,b,JS.SymmetryOperation.opPlanes[h[k]],c,d,e);if(null!=l&&JS.SymmetryOperation.checkOpPoint(l)&&0>b.dot(d)*j&&(null==f||0<=JS.SymmetryOperation.approx(f.distance(l)-0.5)))return!0}return!1},"JU.P3,JU.V3,JU.P3,JU.V3,JU.V3,JU.P3");c$.opClean6=e(c$,"opClean6",function(a){0==JS.SymmetryOperation.approx6(a.x)&&(a.x=0);0==JS.SymmetryOperation.approx6(a.y)&&(a.y=0);0==JS.SymmetryOperation.approx6(a.z)&&(a.z=0);return a},
"JU.T3");c$.checkOpPoint=e(c$,"checkOpPoint",function(a){return JS.SymmetryOperation.checkOK(a.x,0)&&JS.SymmetryOperation.checkOK(a.y,0)&&JS.SymmetryOperation.checkOK(a.z,0)},"JU.T3");c$.checkOK=e(c$,"checkOK",function(a,b){return 0!=b||0<=JS.SymmetryOperation.approx(a)&&1>=JS.SymmetryOperation.approx(a)},"~N,~N");c$.checkOpPlane=e(c$,"checkOpPlane",function(a,b,c){JU.Measure.getPlaneThroughPoint(a,b,c);c.w=JS.SymmetryOperation.approx6(c.w);for(var d=JU.BoxInfo.unitCubePoints,e=0,f=0,h=8;0<=--h;){var j=
JU.Measure.getPlaneProjection(d[h],c,a,b);switch(u(Math.signum(JS.SymmetryOperation.approx6(j)))){case 1:if(0<f)return!0;e++;break;case -1:if(0<e)return!0;f++}}return!(8==f||8==e)},"JU.P3,JU.V3,JU.P4");c$.getAdditionalOperations=e(c$,"getAdditionalOperations",function(a){for(var b=a.length,c=new JU.Lst,d=new java.util.HashSet,e=new java.util.Hashtable,f=0;f<b;f++){var h=a[f];c.addLast(h);var j=h.getOpName(1);d.add(j+";");0!=(h.getOpType()&8)&&JS.SymmetryOperation.addPlaneMap(e,h)}for(f=1;f<b;f++)a[f].addOps(d,
c,e,b,f);return c.toArray(Array(c.size()))},"~A");e(c$,"addOps",function(a,b,c,d,e){var f=new JU.V3;this.getTranslation(f);for(var h=8==(this.getOpType()&8),j=new JU.V3,k=null,l=3;-2<=--l;)for(var p=3;-2<=--p;)for(var n=3;-2<=--n;)null==k&&(k=new JS.SymmetryOperation(null,0,!1)),j.set(l,p,n),!this.checkOpSimilar(j)&&k.opCheckAdd(this,f,d,j,a,b,e+1)&&(h&&JS.SymmetryOperation.addPlaneMap(c,k),k=null)},"java.util.HashSet,JU.Lst,java.util.Map,~N,~N");c$.addPlaneMap=e(c$,"addPlaneMap",function(a,b){var c=
b.getOpName(0),d=a.get(c);b.isCoincident=!1;var e=8==b.opType;if(null==d)a.put(c,d=new JU.Lst);else if(c=d.get(0),c.isCoincident)b.isCoincident=!0;else if(e||8==c.opType){b.isCoincident=!0;for(e=d.size();0<=--e;)d.get(e).isCoincident=!0}d.addLast(b)},"java.util.Map,JS.SymmetryOperation");e(c$,"checkOpSimilar",function(a){switch(this.getOpType()&-2){default:return!1;case 0:return!0;case 2:return 0==JS.SymmetryOperation.approx6(a.dot(this.opAxis)-a.length());case 8:return 0==JS.SymmetryOperation.approx6(a.dot(this.opAxis))}},
"JU.V3");e(c$,"opCheckAdd",function(a,b,c,d,e,f,h){this.setM4(a);c=JU.V3.newV(d);c.add(b);this.setTranslation(c);this.isFinalized=!0;11==h&&(1==d.x&&0==d.y&&0==d.z)&&System.out.println("SO test"+a);this.setOpTypeAndOrder();return!this.isIrrelevant&&(0!=this.opType&&1!=this.opType)&&(a=this.getOpName(1)+";",!e.contains(a))?(e.add(a),f.addLast(this),this.isFinalized=!0,this.xyz=JS.SymmetryOperation.getXYZFromMatrix(this,!1,!1,!1),!0):!1},"JS.SymmetryOperation,JU.V3,~N,JU.V3,java.util.HashSet,JU.Lst,~N");
c$.approx6Pt=e(c$,"approx6Pt",function(a){null!=a&&(a.x=JS.SymmetryOperation.approx6(a.x),a.y=JS.SymmetryOperation.approx6(a.y),a.z=JS.SymmetryOperation.approx6(a.z))},"JU.T3");c$.normalize12ths=e(c$,"normalize12ths",function(a){a.x=JU.PT.approx(a.x,12);a.y=JU.PT.approx(a.y,12);a.z=JU.PT.approx(a.z,12)},"JU.V3");e(c$,"getCode",function(){if(null!=this.opAxisCode)return this.opAxisCode;var a=this.getOpName(2).charAt(0),b=this.opOrder,c=null==this.opIsCCW?0:this.opIsCCW===Boolean.TRUE?1:2;switch(a){case "G":a=
JS.SymmetryOperation.getGlideFromTrans(this.opTrans,this.opPlane);case "P":JS.SymmetryOperation.isCoaxial(this.opAxis)||(a="P"==a?"p":String.fromCharCode(a.charCodeAt(0)-32));break;case "S":var d=this.opTrans.length();if(null!=this.opIsCCW&&d<(1<d?6:0.5)==(this.opIsCCW===Boolean.TRUE))a="w";break;case "R":JS.SymmetryOperation.isCoaxial(this.opAxis)||(a="o"),0==this.opPoint.length()&&(a="o"==a?"q":"Q")}return this.opAxisCode=""+a+"."+String.fromCharCode(48+b)+"."+c+"."});c$.getGlideFromTrans=e(c$,
"getGlideFromTrans",function(a,b){var c=Math.abs(JS.SymmetryOperation.approx(a.x)),d=Math.abs(JS.SymmetryOperation.approx(a.y)),e=Math.abs(JS.SymmetryOperation.approx(a.z));return 0!=c&&0!=d&&0!=e?(0.25==c||0.75==c)&&(0.25==d||0.75==d)&&(0.25==e||0.75==e)?"d":0.5==c&&0.5==d&&0.5==e?"n":"g":0!=c&&0!=d||0!=d&&0!=e||0!=e&&0!=c?0.25==c&&0.25==d||0.25==c&&0.25==e||0.25==d&&0.25==e?"d":0.5==c&&0.5==d||0.5==c&&0.5==e||0.5==d&&0.5==e?0==c&&0==b.x||0==d&&0==b.y||0==e&&0==b.z?"g":"n":"g":0!=c?"a":0!=d?"b":
"c"},"JU.T3,JU.T3");Y(c$,"atomTest",null,"TYPE_UNKNOWN",-1,"TYPE_IDENTITY",0,"TYPE_TRANSLATION",1,"TYPE_ROTATION",2,"TYPE_INVERSION",4,"TYPE_REFLECTION",8,"TYPE_SCREW_ROTATION",3,"TYPE_ROTOINVERSION",6,"TYPE_GLIDE_REFLECTION",9,"PLANE_MODE_POSITION_ONLY",0,"PLANE_MODE_NOTRANS",1,"PLANE_MODE_FULL",2,"DIVISOR_MASK",255,"DIVISOR_OFFSET",8,"twelfths",Q(-1,"0 1/12 1/6 1/4 1/3 5/12 1/2 7/12 2/3 3/4 5/6 11/12".split(" ")));c$.labelsXYZ=c$.prototype.labelsXYZ=Q(-1,["x","y","z"]);c$.labelsXn=c$.prototype.labelsXn=
Q(-1,"x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12 x13".split(" "));c$.labelsXnSub=c$.prototype.labelsXnSub=Q(-1,"xyzabcdefghij".split(""));c$.x=c$.prototype.x=JU.P3.new3(3.141592653589793,2.718281828459045,8.539734222673566);Y(c$,"C3codes",I(-1,[200978,1184513,1245458,135953,1245442,131857,200962,1180417]),"xneg",null,"opPlanes",null)});aa("JS");X(null,"JS.SymmetryInfo",["JU.PT","JS.SpaceGroup","$.SymmetryOperation","JU.SimpleUnitCell"],function(){c$=P(function(){this.isMultiCell=this.coordinatesAreFractional=
!1;this.cellRange=this.infoStr=this.additionalOperations=this.symmetryOperations=this.sgName=null;this.latticeType="P";this.intlTableNoFull=this.intlTableNo=null;L(this,arguments)},JS,"SymmetryInfo");C(c$,function(){});e(c$,"setSymmetryInfo",function(a,b,c){var d;if(null==c){this.cellRange=a.get("unitCellRange");this.sgName=a.get("spaceGroup");if(null==this.sgName||""===this.sgName)this.sgName="spacegroup unspecified";this.intlTableNo=a.get("intlTableNo");this.intlTableNoFull=a.get("intlTableNoFull");
c=a.get("latticeType");this.latticeType=null==c?"P":c.charAt(0);d=a.containsKey("symmetryCount")?a.get("symmetryCount").intValue():0;this.symmetryOperations=a.remove("symmetryOps");this.isMultiCell=(this.coordinatesAreFractional=a.containsKey("coordinatesAreFractional")?a.get("coordinatesAreFractional").booleanValue():!1)&&null!=this.symmetryOperations}else this.cellRange=null,this.sgName=c.getName(),this.intlTableNoFull=c.intlTableNumberFull,this.intlTableNo=c.intlTableNumber,this.latticeType=c.latticeType,
d=c.getOperationCount(),this.symmetryOperations=c.finalOperations,this.coordinatesAreFractional=!0;this.infoStr="Spacegroup: "+this.sgName;if(null!=this.symmetryOperations){var e="";c="\nNumber of symmetry operations: "+(0==d?1:d)+"\nSymmetry Operations:";for(var f=0;f<d;f++){var h=this.symmetryOperations[f];c+="\n"+h.fixMagneticXYZ(h,h.xyz,!0);h.isCenteringOp&&(e+=" ("+JU.PT.rep(JU.PT.replaceAllCharacters(h.xyz,"xyz","0"),"0+","")+")")}0<e.length&&(this.infoStr+="\nCentering: "+e);this.infoStr+=
c;this.infoStr+="\n"}null==b&&(b=a.get("unitCellParams"));b=JU.SimpleUnitCell.isValid(b)?b:null;null==b&&(this.coordinatesAreFractional=!1,this.cellRange=this.symmetryOperations=null,this.infoStr="");return b},"java.util.Map,~A,JS.SpaceGroup");e(c$,"getAdditionalOperations",function(){null==this.additionalOperations&&null!=this.symmetryOperations&&(this.additionalOperations=JS.SymmetryOperation.getAdditionalOperations(this.symmetryOperations));return this.additionalOperations});e(c$,"getSpaceGroupFromOperators",
function(){return JS.SpaceGroup.determineSpaceGroupN(this.sgName)})});aa("JS");X(["JU.P3","$.V3"],"JS.SymmetryDesc","java.lang.Boolean $.Float java.util.Hashtable JU.BS $.Lst $.M4 $.Measure $.P4 $.PT $.Quat $.SB JM.Atom JS.T JS.SpaceGroup $.Symmetry $.SymmetryOperation JU.Escape $.Logger".split(" "),function(){c$=P(function(){this.modelSet=null;L(this,arguments)},JS,"SymmetryDesc");C(c$,function(){});e(c$,"set",function(a){this.modelSet=a;return this},"JM.ModelSet");c$.getType=e(c$,"getType",function(a){var b;
if(null==a)return 1073742001;if(a.equalsIgnoreCase("matrix"))return 12;if(a.equalsIgnoreCase("description"))return 1825200146;if(a.equalsIgnoreCase("axispoint"))return 134217751;if(a.equalsIgnoreCase("time"))return 268441089;if(a.equalsIgnoreCase("info"))return 1275068418;if(a.equalsIgnoreCase("element"))return 1086326789;if(a.equalsIgnoreCase("invariant"))return 36868;b=JS.T.getTokFromName(a);if(0!=b)return b;b=JS.SymmetryDesc.getKeyType(a);return 0>b?b:1073742327},"~S");c$.getKeyType=e(c$,"getKeyType",
function(a){"type".equals(a)&&(a="_type");for(var b=0;b<JS.SymmetryDesc.keys.length;b++)if(a.equalsIgnoreCase(JS.SymmetryDesc.keys[b]))return-1-b;return 0},"~S");c$.nullReturn=e(c$,"nullReturn",function(a){switch(a){case 135176:return";draw ID sym* delete;draw ID sg* delete;";case 1073741961:case 1825200146:case 1073741974:case 1145047050:case 1145047053:case 11:case 1073742078:return"";case 1153433601:return new JU.BS;default:return null}},"~N");c$.getInfo=e(c$,"getInfo",function(a,b){if(0==a.length)return"";
if(0>b&&-b<=JS.SymmetryDesc.keys.length&&-b<=a.length)return a[-1-b];switch(b){case 1073742327:case 1073741982:return a;case 1275068418:for(var c=new java.util.Hashtable,d=0,e=a.length;d<e;d++){var f=3==d?"draw":7==d?"axispoint":JS.SymmetryDesc.keys[d];null!=a[d]&&c.put(f,a[d])}return c;case 1073741961:return a[0]+"  \t"+a[2];case 1145047050:return a[0];case 1145047053:return a[19];case 1073742078:return a[1];default:case 1825200146:return a[2];case 134217764:if(!JU.Logger.debugging)return a[3];case 135176:return a[3]+
"\nprint "+JU.PT.esc(a[0]+" "+a[2]);case 1145047051:return a[4];case 1073742178:return a[5];case 12289:return a[6];case 134217751:return a[7];case 1073741854:return a[8];case 134217729:return a[9];case 12:return a[10];case 1814695966:return a[11];case 4160:return a[12];case 268441089:return a[13];case 134217750:return a[14];case 1140850696:return a[15];case 1073741974:return a[16];case 1086326789:return Q(-1,[a[6],a[7],a[8],a[14],a[5]]);case 36868:return null!=a[6]?a[6]:null!=a[8]?Q(-1,[a[7],a[8],
a[5]]):null!=a[5]?"none":null!=a[14]?a[14]:"identity"}},"~A,~N");c$.getInfoBS=e(c$,"getInfoBS",function(a){var b=new JU.BS;if(0>a&&-a<=JS.SymmetryDesc.keys.length)return b.set(-1-a),b;switch(a){case 0:case 1153433601:case 1073742001:case 1073742327:case 1073741982:case 1275068418:b.setBits(0,JS.SymmetryDesc.keys.length);break;case 1073741961:b.set(0);b.set(2);break;case 1145047050:b.set(0);break;case 1145047053:b.set(19);break;case 1073742078:b.set(1);break;default:case 1825200146:b.set(2);break;
case 135176:b.set(0);b.set(2);b.set(3);break;case 1145047051:b.set(4);break;case 1073742178:b.set(5);break;case 12289:b.set(6);break;case 134217751:b.set(7);break;case 1073741854:b.set(8);break;case 134217729:b.set(9);break;case 12:b.set(10);break;case 1814695966:b.set(11);break;case 4160:b.set(12);break;case 268441089:b.set(13);break;case 134217750:b.set(14);break;case 1140850696:b.set(15);break;case 1073741974:b.set(16);break;case 1086326789:case 36868:b.set(5),b.set(6),b.set(7),b.set(8),b.set(14),
b.set(22)}return b},"~N");e(c$,"createInfoArray",function(a,b,c,d,e,f,h,j,k,l,p){a.isFinalized||a.doFinalize();var n=1==k.cardinality()&&k.get(10),q=-1==a.timeReversal;0==f&&(f=1);JS.SymmetryDesc.ptemp.set(0,0,0);JS.SymmetryDesc.vtrans.set(0,0,0);var m=null,r=null==c||Float.isNaN(c.x)?new JU.P3:c;if(null!=d){JS.SymmetryDesc.pta01.setT(r);JS.SymmetryDesc.pta02.setT(d);b.toFractional(JS.SymmetryDesc.pta01,!0);b.toFractional(JS.SymmetryDesc.pta02,!0);a.rotTrans(JS.SymmetryDesc.pta01);JS.SymmetryDesc.ptemp.setT(JS.SymmetryDesc.pta01);
b.unitize(JS.SymmetryDesc.pta01);JS.SymmetryDesc.vtrans.setT(JS.SymmetryDesc.pta02);b.unitize(JS.SymmetryDesc.pta02);if(1.96E-6<=JS.SymmetryDesc.pta01.distanceSquared(JS.SymmetryDesc.pta02))return null;JS.SymmetryDesc.vtrans.sub(JS.SymmetryDesc.ptemp)}var s=JU.M4.newM4(a);s.add(JS.SymmetryDesc.vtrans);k.get(10)&&(null!=d&&r.equals(d))&&(s.m00=Math.round(s.m00),s.m01=Math.round(s.m01),s.m02=Math.round(s.m02),s.m03=Math.round(s.m03),s.m10=Math.round(s.m10),s.m11=Math.round(s.m11),s.m12=Math.round(s.m12),
s.m13=Math.round(s.m13),s.m20=Math.round(s.m20),s.m21=Math.round(s.m21),s.m22=Math.round(s.m22),s.m23=Math.round(s.m23));var y=0!=a.timeReversal;if(n&&!y)return a=JS.SymmetryDesc.getKeyType("matrix"),b=Array(-a),b[-1-a]=s,b;n=new JU.V3;JS.SymmetryDesc.pta01.set(1,0,0);JS.SymmetryDesc.pta02.set(0,1,0);var x=JU.P3.new3(0,0,1);JS.SymmetryDesc.pta01.add(r);JS.SymmetryDesc.pta02.add(r);x.add(r);var t=JS.SymmetryDesc.rotTransCart(a,b,r,JS.SymmetryDesc.vtrans),z=JS.SymmetryDesc.rotTransCart(a,b,JS.SymmetryDesc.pta01,
JS.SymmetryDesc.vtrans),Q=JS.SymmetryDesc.rotTransCart(a,b,JS.SymmetryDesc.pta02,JS.SymmetryDesc.vtrans),R=JS.SymmetryDesc.rotTransCart(a,b,x,JS.SymmetryDesc.vtrans),D=JU.V3.newVsub(z,t),B=JU.V3.newVsub(Q,t),N=JU.V3.newVsub(R,t);JS.SymmetryOperation.approx6Pt(JS.SymmetryDesc.vtrans);JS.SymmetryDesc.vtemp.cross(D,B);var H=0>JS.SymmetryDesc.vtemp.dot(N);H&&(z.sub2(t,D),Q.sub2(t,B),R.sub2(t,N));var v=JU.Quat.getQuaternionFrame(t,z,Q).div(JU.Quat.getQuaternionFrame(r,JS.SymmetryDesc.pta01,JS.SymmetryDesc.pta02)),
v=JU.Quat.new4(v.q1,v.q2,v.q3,v.q0),G=JU.Measure.computeHelicalAxis(r,t,v),v=JU.P3.newP(G[0]),F=JU.P3.newP(G[1]),C=u(Math.abs(JU.PT.approx(G[3].x,1))),L=JS.SymmetryOperation.approx(G[3].y);H&&(z.add2(t,D),Q.add2(t,B),R.add2(t,N));G=JU.V3.newVsub(t,r);0.1>G.length()&&(G=null);var I=null,P=null,M=null,ca=0,$=0,Y=0==C,fa=!Y,aa=!1,ba=!1,W=!fa&&!H;if(fa||H)G=null;if(H&&Y)P=JU.P3.newP(r),P.add(t),P.scale(0.5),I=t,aa=!0;else if(H){var O=0==L?new JU.V3:F,w=0;switch(C){case 60:w=0.6666667;break;case 120:w=
2;break;case 90:w=1;break;case 180:M=JU.P3.newP(r);M.add(O);v.scaleAdd2(0.5,O,r);0.1<M.distance(t)?(G=JU.V3.newVsub(t,M),JS.SymmetryDesc.setFractional(b,G,JS.SymmetryDesc.ptemp,null),n.setT(JS.SymmetryDesc.ptemp)):G=null;JS.SymmetryDesc.vtemp.setT(F);JS.SymmetryDesc.vtemp.normalize();ca=-JS.SymmetryDesc.vtemp.x*v.x-JS.SymmetryDesc.vtemp.y*v.y-JS.SymmetryDesc.vtemp.z*v.z;m=JU.P4.new4(JS.SymmetryDesc.vtemp.x,JS.SymmetryDesc.vtemp.y,JS.SymmetryDesc.vtemp.z,ca);$=0.01>Math.abs(ca)&&0.4<JS.SymmetryDesc.vtemp.x*
JS.SymmetryDesc.vtemp.y?1.3:1.05;H=fa=!1;ba=!0;break;default:H=!1}0!=w&&(JS.SymmetryDesc.vtemp.sub2(r,v),JS.SymmetryDesc.vtemp.add(t),JS.SymmetryDesc.vtemp.sub(v),JS.SymmetryDesc.vtemp.sub(O),JS.SymmetryDesc.vtemp.scale(w),v.add(JS.SymmetryDesc.vtemp),P=new JU.P3,P.scaleAdd2(0.5,O,v),I=new JU.P3,I.scaleAdd2(-2,P,t),I.scale(-1))}else null!=G&&(JS.SymmetryDesc.ptemp.setT(G),b.toFractional(JS.SymmetryDesc.ptemp,!1),n.setT(JS.SymmetryDesc.ptemp),b.toCartesian(JS.SymmetryDesc.ptemp,!1),G.setT(JS.SymmetryDesc.ptemp));
var da=C;JS.SymmetryDesc.approx0(F);if(fa){var T=new JU.P3;JS.SymmetryDesc.vtemp.setT(F);w=C;H?(T.setT(I),w=I):0==L?(w=t,T.setT(v)):(w=t,T.scaleAdd2(0.5,JS.SymmetryDesc.vtemp,v));JS.SymmetryDesc.ptemp.add2(v,JS.SymmetryDesc.vtemp);w=Math.round(JU.Measure.computeTorsion(r,v,JS.SymmetryDesc.ptemp,w,!0));0!=JS.SymmetryOperation.approx(w)&&(C=w,0>C&&(C=360+C))}var ca=w=null,Z=String.fromCharCode(0),X=a.getOpOrder(),V=a.getOpIsCCW();if(k.get(2)||k.get(15)){w=ca="identity";if(aa)JS.SymmetryDesc.ptemp.setT(P),
b.toFractional(JS.SymmetryDesc.ptemp,!1),w="Ci: "+JS.SymmetryDesc.strCoord(a,JS.SymmetryDesc.ptemp,a.isBio),ca="inversion center";else if(fa)w=null==V||H||0==L?"":V===Boolean.TRUE?"(+)":"(-)",H?w=E(360/da)+"-bar"+w+" axis":0!=L?(JS.SymmetryDesc.ptemp.setT(F),b.toFractional(JS.SymmetryDesc.ptemp,!1),w=E(360/da)+w+" ("+JS.SymmetryDesc.strCoord(a,JS.SymmetryDesc.ptemp,a.isBio)+") screw axis"):w="C"+E(360/da)+w+" axis",ca=w;else if(null!=G){var ea=" "+JS.SymmetryDesc.strCoord(a,n,a.isBio);Y?(ca=w="translation",
w+=":"+ea):ba&&(ea=" "+JS.SymmetryDesc.strCoord(a,n,a.isBio),Z=JS.SymmetryOperation.getGlideFromTrans(n,F),ca=w=Z+"-glide plane",w+="|translation:"+ea)}else ba&&(ca=w="mirror plane");H&&!aa&&(JS.SymmetryDesc.ptemp.setT(P),b.toFractional(JS.SymmetryDesc.ptemp,!1),w+="|at "+JS.SymmetryDesc.strCoord(a,JS.SymmetryDesc.ptemp,a.isBio));q&&(w+="|time-reversed",ca+=" (time-reversed)")}var ha=!0,ea=fa&&!H&&0!=L;ea||(ha=JS.SymmetryDesc.checkHandedness(b,F),ha||(C=-C,0>C&&(C=360+C),F.scale(-1)));var la=!1,K=
null;if(null!=e&&k.get(3))if(0==a.getOpType()||p&&a.isIrrelevant)System.out.println("!!SD irrelevent "+a.getOpTitle()+a.getOpPoint()),K="";else{var ga=null,K="\ndraw ID "+e+"_",A=new JU.SB;A.append(K).append("* delete");l||(JS.SymmetryDesc.drawLine(A,K+"frame1X",0.15,r,JS.SymmetryDesc.pta01,"red"),JS.SymmetryDesc.drawLine(A,K+"frame1Y",0.15,r,JS.SymmetryDesc.pta02,"green"),JS.SymmetryDesc.drawLine(A,K+"frame1Z",0.15,r,x,"blue"));var x=null,ia=0,ja=0.2>r.distance(t);e=l?"<hover>"+e+": "+a.xyz+"\n"+
w+"</hover>":null;if(fa){var Z="red",da=C,ka=1;JS.SymmetryDesc.vtemp.setT(F);H&&(Z="purple");$="";l&&(v.setT(a.getOpPoint()),b.toCartesian(v,!1));T=new JU.P3;0!=L&&!H?(ga=K+"screw",Z=V===Boolean.TRUE?"orange":V===Boolean.FALSE?"yellow":4==X?"lightgray":"grey",l||(JS.SymmetryDesc.drawLine(A,K+"rotLine1",0.1,r,v,"red"),JS.SymmetryDesc.ptemp.add2(v,JS.SymmetryDesc.vtemp),JS.SymmetryDesc.drawLine(A,K+"rotLine2",0.1,t,JS.SymmetryDesc.ptemp,"red"),T.scaleAdd2(0.5,JS.SymmetryDesc.vtemp,v))):(T.setT(v),ha||
!ja&&!l&&v.sub2(v,JS.SymmetryDesc.vtemp),H?(ga=K+"rotinv",l?(JS.SymmetryDesc.vtemp.normalize(),V===Boolean.TRUE&&JS.SymmetryDesc.vtemp.scale(-1)):0==L?(T.setT(P),JS.SymmetryDesc.vtemp.scale(3*f),ja?(JS.SymmetryDesc.ptemp.scaleAdd2(0.25,JS.SymmetryDesc.vtemp,v),v.scaleAdd2(-0.24,JS.SymmetryDesc.vtemp,v),T.scaleAdd2(0.31,JS.SymmetryDesc.vtemp,T),Z="cyan"):(JS.SymmetryDesc.ptemp.scaleAdd2(-1,JS.SymmetryDesc.vtemp,v),JS.SymmetryDesc.drawLine(A,K+"rotLine1",0.1,r,P,"red"),JS.SymmetryDesc.drawLine(A,K+
"rotLine2",0.1,I,P,"red"))):ja||(ka=r.distance(T),JS.SymmetryDesc.drawLine(A,K+"rotLine1",0.1,r,T,"red"),JS.SymmetryDesc.drawLine(A,K+"rotLine2",0.1,I,T,"red"))):(ga=K+"rot",JS.SymmetryDesc.vtemp.scale(3*f),!ja&&!l&&(JS.SymmetryDesc.drawLine(A,K+"rotLine1",0.1,r,T,"red"),JS.SymmetryDesc.drawLine(A,K+"rotLine2",0.1,t,T,"red")),T.setT(v),0==L&&ja&&T.scaleAdd2(0.25,JS.SymmetryDesc.vtemp,T)));l||(180<da&&(da=180-da),JS.SymmetryDesc.ptemp.add2(T,JS.SymmetryDesc.vtemp),A.append(K).append("rotRotArrow arrow width 0.1 scale "+
JU.PT.escF(ka)+" arc ").append(JU.Escape.eP(T)).append(JU.Escape.eP(JS.SymmetryDesc.ptemp)),JS.SymmetryDesc.ptemp.setT(r),0.1>JS.SymmetryDesc.ptemp.distance(t)&&JS.SymmetryDesc.ptemp.set(Math.random(),Math.random(),Math.random()),A.append(JU.Escape.eP(JS.SymmetryDesc.ptemp)),JS.SymmetryDesc.ptemp.set(0,da-5*Math.signum(da),0),A.append(JU.Escape.eP(JS.SymmetryDesc.ptemp)).append(" color red"));(la=la||!a.opIsLong&&p&&0<L&&!H&&a.getOpTrans().length()>(2==X?0.71:3==X?0.578:4==X?0.51:0.3))&&System.out.println("SD ignoring "+
a.getOpTrans().length()+" "+a.getOpTitle()+a.xyz);f=null;if(0==L&&!H){JS.SymmetryDesc.ptemp.scaleAdd2(0.5,JS.SymmetryDesc.vtemp,v);v.scaleAdd2(l?-0.5:-0.45,JS.SymmetryDesc.vtemp,v);if(p&&null!=(f=a.getOpPoint2()))T.setT(f),b.toCartesian(T,!1),T.scaleAdd2(-0.5,JS.SymmetryDesc.vtemp,T);l&&this.scaleByOrder(JS.SymmetryDesc.vtemp,X,V)}else p&&0!=L&&!H&&0.4<(O=a.getOpTrans().length())?V!==Boolean.TRUE&&null!=V&&0.5==O&&(la=!0):l&&H&&(f=z,JS.SymmetryDesc.vtemp.scale(-1),this.scaleByOrder(JS.SymmetryDesc.vtemp,
X,V),$="80");0<L&&!H&&($=""+(90-u(90*(1*JS.SymmetryDesc.vtemp.length()/L))));la||(p=ga+X+"rotVector1",JS.SymmetryDesc.drawVector(A,K,p,"vector","0.1"+$,v,JS.SymmetryDesc.vtemp,q?"gray":Z,e),null!=f&&JS.SymmetryDesc.drawVector(A,K,p+"b","vector","0.1"+$,T,JS.SymmetryDesc.vtemp,q?"gray":Z,e))}else if(ba){JS.SymmetryDesc.ptemp.sub2(M,r);!l&&0.2<r.distance(M)&&JS.SymmetryDesc.drawVector(A,K,"planeVector","vector","0.05",r,JS.SymmetryDesc.ptemp,q?"gray":"cyan",null);O=JU.P4.newPt(m);if(null==G)Z="green";
else{ga=K+"glide";switch(Z){case "g":Z="gold";break;case "a":Z="magenta";break;case "b":Z="violet";break;case "c":Z="blue";break;case "n":Z="orange";break;case "d":Z="grey";break;default:Z="grey"}O.w+=0.01;l||(JS.SymmetryDesc.drawFrameLine("X",M,D,0.15,JS.SymmetryDesc.ptemp,A,ga,"red"),JS.SymmetryDesc.drawFrameLine("Y",M,B,0.15,JS.SymmetryDesc.ptemp,A,ga,"green"),JS.SymmetryDesc.drawFrameLine("Z",M,N,0.15,JS.SymmetryDesc.ptemp,A,ga,"blue"))}O=this.modelSet.vwr.getTriangulator().intersectPlane(O,b.getCanonicalCopy($,
!0),3);if(null!=O){L=l&&a.isCoincident;x=new JU.P3;A.length();for(f=O.size();0<=--f;)$=O.get(f),A.append(K).append(null==G?"m":"g").append("planep").appendI(f).append(" ").append(JU.Escape.eP($[0])).append(JU.Escape.eP($[1])),3==$.length?(!L||0==f%2!=(null==G))&&A.append(JU.Escape.eP($[2])):(x.add($[0]),x.add($[1]),ia+=2),A.append(" color translucent ").append(Z),null!=e&&A.append(" ").append(JU.PT.esc(e))}if(null==O||0==O.size())p?la=!0:(JS.SymmetryDesc.ptemp.add2(v,F),A.append(K).append("planeCircle scale 2.0 circle ").append(JU.Escape.eP(v)).append(JU.Escape.eP(JS.SymmetryDesc.ptemp)).append(" color translucent ").append(Z).append(" mesh fill"),
null!=e&&A.append(" ").append(JU.PT.esc(e)))}H&&(ga=K+"inv",aa?(A.append(K).append("invPoint diameter 0.4 ").append(JU.Escape.eP(P)),null!=e&&A.append(" ").append(JU.PT.esc(e)),JS.SymmetryDesc.ptemp.sub2(I,r),l||JS.SymmetryDesc.drawVector(A,K,"Arrow","vector","0.05",r,JS.SymmetryDesc.ptemp,q?"gray":"cyan",null)):(4==X&&(A.append(K).append("RotPoint diameter 0.3 color red").append(JU.Escape.eP(P)),null!=e&&A.append(" ").append(JU.PT.esc(e))),l||(A.append(" color cyan"),ja||(JS.SymmetryDesc.ptemp.sub2(t,
I),JS.SymmetryDesc.drawVector(A,K,"Arrow","vector","0.05",I,JS.SymmetryDesc.ptemp,q?"gray":"cyan",null)),1073742066!=h&&(JS.SymmetryDesc.vtemp.setT(D),JS.SymmetryDesc.vtemp.scale(-1),JS.SymmetryDesc.drawFrameLine("X",I,JS.SymmetryDesc.vtemp,0.15,JS.SymmetryDesc.ptemp,A,ga,"red"),JS.SymmetryDesc.vtemp.setT(B),JS.SymmetryDesc.vtemp.scale(-1),JS.SymmetryDesc.drawFrameLine("Y",I,JS.SymmetryDesc.vtemp,0.15,JS.SymmetryDesc.ptemp,A,ga,"green"),JS.SymmetryDesc.vtemp.setT(N),JS.SymmetryDesc.vtemp.scale(-1),
JS.SymmetryDesc.drawFrameLine("Z",I,JS.SymmetryDesc.vtemp,0.15,JS.SymmetryDesc.ptemp,A,ga,"blue")))));null!=G&&(ba&&l?null!=x&&(M=x,M.scale(1/ia),M.scaleAdd2(-0.5,G,M)):null==M&&(M=l?new JU.P3:JU.P3.newP(r)),null!=M&&!la&&JS.SymmetryDesc.drawVector(A,K,"transVector","vector",W?"0.1":"0.05",M,G,q&&!H&&!ba&&!fa?"darkGray":"gold",e));l||(JS.SymmetryDesc.ptemp2.setT(t),JS.SymmetryDesc.ptemp.sub2(z,t),JS.SymmetryDesc.ptemp.scaleAdd2(0.9,JS.SymmetryDesc.ptemp,JS.SymmetryDesc.ptemp2),JS.SymmetryDesc.drawLine(A,
K+"frame2X",0.2,JS.SymmetryDesc.ptemp2,JS.SymmetryDesc.ptemp,"red"),JS.SymmetryDesc.ptemp.sub2(Q,t),JS.SymmetryDesc.ptemp.scaleAdd2(0.9,JS.SymmetryDesc.ptemp,JS.SymmetryDesc.ptemp2),JS.SymmetryDesc.drawLine(A,K+"frame2Y",0.2,JS.SymmetryDesc.ptemp2,JS.SymmetryDesc.ptemp,"green"),JS.SymmetryDesc.ptemp.sub2(R,t),JS.SymmetryDesc.ptemp.scaleAdd2(0.9,JS.SymmetryDesc.ptemp,JS.SymmetryDesc.ptemp2),JS.SymmetryDesc.drawLine(A,K+"frame2Z",0.2,JS.SymmetryDesc.ptemp2,JS.SymmetryDesc.ptemp,"purple"),A.append("\nsym_point = "+
JU.Escape.eP(r)),A.append("\nvar p0 = "+JU.Escape.eP(JS.SymmetryDesc.ptemp2)),S(r,JM.Atom)?(A.append("\nvar set2 = within(0.2,p0);if(!set2){set2 = within(0.2,p0.uxyz.xyz)}"),A.append("\n set2 &= {_"+r.getElementSymbol()+"}")):A.append("\nvar set2 = p0.uxyz"),A.append("\nsym_target = set2;if (set2) {"),!ja&&(1073742066!=h&&null==d&&!j)&&(A.append(K).append("offsetFrameX diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(D)).append("*0.9} color red"),A.append(K).append("offsetFrameY diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(B)).append("*0.9} color green"),
A.append(K).append("offsetFrameZ diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(N)).append("*0.9} color purple")),A.append("\n}\n"));K=A.toString();JU.Logger.debugging&&JU.Logger.info(K)}null==G&&(n=null);ea&&(G=JU.V3.newV(F),JS.SymmetryDesc.ptemp.setT(G),b.toFractional(JS.SymmetryDesc.ptemp,!1),n=JU.V3.newV(JS.SymmetryDesc.ptemp));ba&&(C=0);H?aa&&(n=G=F=v=null):Y&&(F=v=null);null!=F&&F.normalize();h=null;if(k.get(0)||k.get(17))h=a.isBio?s.toString():0<a.modDim?a.xyzOriginal:JS.SymmetryOperation.getXYZFromMatrix(s,
!1,!1,!1),y&&(h=a.fixMagneticXYZ(s,h,!0));j=Array(20);for(f=k.nextSetBit(0);0<=f;f=k.nextSetBit(f+1))switch(f){case 0:j[f]=h;break;case 19:null!=c&&(null==d&&!a.isBio&&0==a.modDim)&&(JS.SymmetryDesc.pta02.setT(c),b.toFractional(JS.SymmetryDesc.pta02,!0),s.rotTrans(JS.SymmetryDesc.pta02),JS.SymmetryDesc.ptemp.setT(JS.SymmetryDesc.pta02),b.unitize(JS.SymmetryDesc.pta02),JS.SymmetryDesc.vtrans.sub2(JS.SymmetryDesc.pta02,JS.SymmetryDesc.ptemp),s=JU.M4.newM4(a),s.add(JS.SymmetryDesc.vtrans),l=JS.SymmetryOperation.getXYZFromMatrix(s,
!1,!1,!1),y&&(l=a.fixMagneticXYZ(s,l,!0)),j[f]=l);break;case 1:j[f]=a.xyzOriginal;break;case 2:j[f]=w;break;case 3:j[f]=K;break;case 4:j[f]=JS.SymmetryDesc.approx0(n);break;case 5:j[f]=JS.SymmetryDesc.approx0(G);break;case 6:j[f]=JS.SymmetryDesc.approx0(P);break;case 7:j[f]=JS.SymmetryDesc.approx0(null!=v&&k.get(22)?r:v);break;case 8:j[f]=null==m?JS.SymmetryDesc.approx0(F):null;break;case 9:j[f]=0!=C?Integer.$valueOf(C):null;break;case 10:j[f]=s;break;case 11:j[f]=0<JS.SymmetryDesc.vtrans.lengthSquared()?
JS.SymmetryDesc.vtrans:null;break;case 12:j[f]=a.getCentering();break;case 13:j[f]=Integer.$valueOf(a.timeReversal);break;case 14:null!=m&&k.get(22)&&(O=JU.Measure.distanceToPlane(m,r),m.w-=O);j[f]=m;break;case 15:j[f]=ca;break;case 16:j[f]=Integer.$valueOf(a.number);break;case 17:l=null;!a.isBio&&!h.equals(a.xyzOriginal)&&0<a.number&&(q=JS.SymmetryOperation.getMatrixFromXYZ(a.xyzOriginal,!1),q.sub(s),l=new JU.P3,q.getTranslation(l));j[f]=(0>a.number?0:a.number)+(null==l?" [0 0 0]":" ["+u(-l.x)+" "+
u(-l.y)+" "+u(-l.z)+"]");break;case 18:j[f]=a.xyzCanonical}return j},"JS.SymmetryOperation,J.api.SymmetryInterface,JU.P3,JU.P3,~S,~N,~N,~B,JU.BS,~B,~B");e(c$,"scaleByOrder",function(a,b,c){a.scale(1+0.3/b+(null==c?0:c===Boolean.TRUE?0.02:-0.02))},"JU.V3,~N,Boolean");c$.checkHandedness=e(c$,"checkHandedness",function(a,b){var c,d,e;JS.SymmetryDesc.ptemp.set(1,0,0);a.toCartesian(JS.SymmetryDesc.ptemp,!1);c=JS.SymmetryDesc.approx0d(JS.SymmetryDesc.ptemp.dot(b));JS.SymmetryDesc.ptemp.set(0,1,0);a.toCartesian(JS.SymmetryDesc.ptemp,
!1);d=JS.SymmetryDesc.approx0d(JS.SymmetryDesc.ptemp.dot(b));JS.SymmetryDesc.ptemp.set(0,0,1);a.toCartesian(JS.SymmetryDesc.ptemp,!1);e=JS.SymmetryDesc.approx0d(JS.SymmetryDesc.ptemp.dot(b));return 0==c?0==d?0<e:0<d:0==e?0<c:0==d?0<e:0<c*d*e},"J.api.SymmetryInterface,JU.P3");c$.drawLine=e(c$,"drawLine",function(a,b,c,d,e,f){a.append(b).append(" diameter ").appendD(c).append(JU.Escape.eP(d)).append(JU.Escape.eP(e)).append(" color ").append(f)},"JU.SB,~S,~N,JU.P3,JU.P3,~S");c$.drawFrameLine=e(c$,"drawFrameLine",
function(a,b,c,d,e,f,h,j){e.setT(b);e.add(c);JS.SymmetryDesc.drawLine(f,h+"Pt"+a,d,b,e,"translucent "+j)},"~S,JU.P3,JU.V3,~N,JU.P3,JU.SB,~S,~S");c$.drawVector=e(c$,"drawVector",function(a,b,c,d,e,f,h,j,k){d.equals("vline")&&(JS.SymmetryDesc.ptemp2.add2(f,h),d="",h=JS.SymmetryDesc.ptemp2);a.append(b).append(c).append(" diameter ").append(e+" ").append(d).append(JU.Escape.eP(f)).append(JU.Escape.eP(h)).append(" color ").append(j);null!=k&&a.append(' "'+k+'"')},"JU.SB,~S,~S,~S,~S,JU.T3,JU.T3,~S,~S");
c$.setFractional=e(c$,"setFractional",function(a,b,c,d){c.setT(b);null!=d&&a.toUnitCell(c,d);a.toFractional(c,!1)},"J.api.SymmetryInterface,JU.T3,JU.P3,JU.P3");c$.rotTransCart=e(c$,"rotTransCart",function(a,b,c,d){c=JU.P3.newP(c);b.toFractional(c,!1);a.rotTrans(c);c.add(d);b.toCartesian(c,!1);return c},"JS.SymmetryOperation,J.api.SymmetryInterface,JU.P3,JU.V3");c$.strCoord=e(c$,"strCoord",function(a,b,c){JS.SymmetryDesc.approx0(b);return c?b.x+" "+b.y+" "+b.z:a.fcoord2(b)},"JS.SymmetryOperation,JU.T3,~B");
c$.approx0=e(c$,"approx0",function(a){null!=a&&(a.x=JS.SymmetryDesc.approx0d(a.x),a.y=JS.SymmetryDesc.approx0d(a.y),a.z=JS.SymmetryDesc.approx0d(a.z));return a},"JU.T3");c$.approx0d=e(c$,"approx0d",function(a){return 1E-4>Math.abs(a)?0:a},"~N");e(c$,"getSymmetryInfo",function(a,b,c,d,e,f,h,j,k,l,p,n,m,u){var r=0,s=JS.SymmetryDesc.nullReturn(l);switch(l){case 1073741994:return""+c.getLatticeType();case 1073742001:r=1825200146;break;case 135176:r=135176;break;case 1275068418:switch(r=JS.SymmetryDesc.getType(k),
r){case 1153433601:case 1073741961:case 1073742001:case 134217751:case 1086326789:case 36868:l=r;break;default:r=JS.SymmetryDesc.getKeyType(k)}}var y=JS.SymmetryDesc.getInfoBS(r),x=-2==n,t=e,z=1073742066==m&&(1153433601==l||134217751==l)?j:null;null!=z&&(j=null);var E=t=null,C=null;if(null==j){if(null==d){C=x?c.getAdditionalOperations():c.getSymmetryOperations();if(null==C||Math.abs(e)>C.length||0==e)return s;t=Math.abs(e)-1;d=null==f?C[t].xyz:C[t].getxyzTrans(f);E=C[t].xyzOriginal}else t=e=0;var D=
new JS.Symmetry;D.setSpaceGroup(!1);var B=null!=c&&c.isBio();j=B?D.addBioMoleculeOperation(c.getSpaceGroup().finalOperations[t],0>e):D.addSpaceGroupOperation((0>e?"!":"=")+d,Math.abs(e));if(0>j)return s;var N=D.getSpaceGroupOperation(j);u&&(N.isCoincident=C[t].isCoincident);null!=E&&(N.xyzOriginal=E);N.number=e;B||N.getCentering();null==h&&0<=b&&(h=this.modelSet.at[b]);if(134217751==l||1153433601==l){if(B||null==h)return s;D.setUnitCell(c);JS.SymmetryDesc.ptemp.setT(h);c.toFractional(JS.SymmetryDesc.ptemp,
!1);if(Float.isNaN(JS.SymmetryDesc.ptemp.x))return s;r=new JU.P3;D.newSpaceGroupPoint(JS.SymmetryDesc.ptemp,j,null,0,0,0,r);1073742066==m&&(c.unitize(r),r.add(z));D.toCartesian(r,!1);return 1153433601==l?this.getAtom(c,a,b,r):r}t=this.createInfoArray(N,c,h,null,null==k?"sym":k,p,m,null!=f,y,u,x);1275068418==l&&null!=k&&(r=JS.SymmetryDesc.getKeyType(k))}else{x="info";z=!1;switch(l){case 1275068418:r=JS.SymmetryDesc.getKeyType(k);k=x=null;0==n&&(n=-1);break;case 1073742001:k=x=null;0==n&&(n=-1);z=!0;
y.set(21);y.set(0);y.set(19);break;case 135176:null==k&&(k=u?"sg":"sym");x="all";z=!0;break;case 1153433601:k=x=null;default:0==n&&(n=1)}m=this.getSymopInfoForPoints(c,a,e,f,h,j,k,x,p,n,m,y);if(z)return m;if(S(m,String))return s;t=m;if(1153433601==l)return!S(h,JM.Atom)&&!S(j,JM.Atom)&&(b=-1),null==t?s:this.getAtom(c,a,b,t[7])}if(null==t)return s;a=0<t.length&&S(t[0],Array);if(0>n&&0>=e&&null==d&&(1275068418==l||a)){1275068418==l&&(0<t.length&&!S(t[0],Array))&&(t=Q(-1,[t]));a=new JU.Lst;for(j=0;j<
t.length;j++)a.addLast(JS.SymmetryDesc.getInfo(t[j],0>r?r:l));return a}if(0>r&&(0<=n||0<e||null!=d))l=r;0<n&&a&&(t=t[0]);135176==l&&(u&&-2==n)&&(l=134217764);return JS.SymmetryDesc.getInfo(t,l)},"~N,~N,J.api.SymmetryInterface,~S,~N,JU.P3,JU.P3,JU.P3,~S,~N,~N,~N,~N,~B");e(c$,"getAtom",function(a,b,c,d){var e=null;0<=c&&this.modelSet.getAtomBitsMDa(1094715402,Integer.$valueOf(this.modelSet.at[c].getElementNumber()),e=new JU.BS);c=new JU.BS;this.modelSet.getAtomsWithin(0.02,d,c,b);null!=e&&c.and(e);
c.isEmpty()&&(d=JU.P3.newP(d),a.toUnitCell(d,null),a.toCartesian(d,!1),this.modelSet.getAtomsWithin(0.02,d,c,b),null!=e&&c.and(e));return c},"J.api.SymmetryInterface,~N,~N,JU.T3");e(c$,"getSymopInfoForPoints",function(a,b,c,d,e,f,h,j,k,l,p,n){d=n.get(21)||n.get(3)&&3==n.cardinality();n.clear(21);var m=d?"":null;f=this.getSpaceGroupInfo(a,b,null,c,e,f,h,k,l,!1,!0,p,null,n);if(null==f)return m;a=f.get("operations");if(null==a)return m;b=d?new JU.SB:null;c--;e=!d&&0>c;f=f.get("symmetryInfo");l="label".equals(j);
for(k=j=0;k<a.length;k++)if(!(null==a[k]||0<=c&&c!=k))if(d){if(null!=h)return a[k][3]+"\nprint "+JU.PT.esc(f);0<b.length()&&b.appendC("\n");l||(0>c&&b.appendI(k+1).appendC("\t"),b.append(a[k][0]).appendC("\t"));b.append(a[k][2])}else{if(!e)return a[k];a[j++]=a[k]}if(!d){c=Array(j);for(k=0;k<j;k++)c[k]=a[k];return c}return 0==b.length()?null!=h?"draw "+h+"* delete":m:b.toString()},"J.api.SymmetryInterface,~N,~N,JU.P3,JU.P3,JU.P3,~S,~S,~N,~N,~N,JU.BS");e(c$,"getSymopInfo",function(a,b,c,d,e,f,h,j,k,
l,p,n){0==j&&(j=JS.SymmetryDesc.getType(h));var m=1153433601==j?new JU.BS:"",u=0<=a?this.modelSet.at[a].mi:this.modelSet.vwr.am.cmi;if(0>u)return m;var r=this.modelSet.am[u].biosymmetry;if(null==r&&null==(r=this.modelSet.getUnitCell(u)))r=(new JS.Symmetry).setUnitCell(null,!1);if(135176!=j||2147483647!=c&&null==n)return this.getSymmetryInfo(u,a,r,b,c,d,e,f,h,j,k,l,p,!1);if(null==r)return m;j="";c=null==b&&(0>l&&null==n)&&-2==l?r.getAdditionalOperations():r.getSymmetryOperations();if(null!=c)if(null==
h&&(h="sg"),m=c.length,null!=e&&null==f||null!=n){null==n&&(n=r.getInvariantSymops(e,null));for(var m=n.length,s=0;s<m;s++)0<l&&l!=s+1||(c=n[s],j+=this.getSymmetryInfo(u,a,r,b,c,d,e,f,h+c,135176,k,l,p,null==e))}else for(c=1;c<=m;c++)j+=this.getSymmetryInfo(u,a,r,b,c,d,e,f,h+c,135176,k,l,p,!0);return j},"~N,~S,~N,JU.P3,JU.P3,JU.P3,~S,~N,~N,~N,~N,~A");e(c$,"getSpaceGroupInfo",function(a,b,c,d,e,f,h,j,k,l,p,n,m,u){null==u&&(u=new JU.BS,u.setBits(0,JS.SymmetryDesc.keys.length),u.clear(19));var r=1==u.cardinality()&&
u.get(10),s=null,y=!r&&null==e&&null==h&&0>=k&&u.cardinality()>=JS.SymmetryDesc.keys.length,x=!1,t=null,z=null!=c&&0<c.length,C=z&&0<=c.indexOf("[--]");if(p||!z){var E=y&&0==d;if(r)m=a;else{0>b&&(b=S(e,JM.Atom)?e.mi:this.modelSet.vwr.am.cmi);if(0>b)t="no single current model";else if(null==m&&!(x=null!=(m=this.modelSet.am[b].biosymmetry))&&null==(m=this.modelSet.getUnitCell(b)))t="not applicable";null!=t?(s=new java.util.Hashtable,s.put("spaceGroupInfo",""),s.put("spaceGroupNote",t),s.put("symmetryInfo",
"")):y&&(s=this.modelSet.getInfo(b,"spaceGroupInfo"));if(null!=s)return s;c=m.getSpaceGroupName()}var s=new java.util.Hashtable,t=m.getSymmetryOperations(),D=x?m.spaceGroup:null,y=C?"":null,B=0;if(null!=t){r||(x?a.setSpaceGroupTo(JS.SpaceGroup.getNull(!1,!1,!1)):a.setSpaceGroup(!1));0!=t[0].timeReversal&&(a.getSpaceGroupOperation(0).timeReversal=1);for(var N=Array(t.length),H="",v=0,G=0;v<t.length&&G!=k;v++){var F=t[v],L=F.xyzOriginal,I;if(r)I=v;else{I=!(0==v&&0<=F.xyz.indexOf("x4"))&&null!=a.getSpaceGroupOperation(v)?
v:x?a.addBioMoleculeOperation(D.finalOperations[v],!1):a.addSpaceGroupOperation("="+F.xyz,v+1);if(0>I)continue;F=a.getSpaceGroupOperation(v);if(null==F)continue;F.xyzOriginal=L}null!=y&&(y+=";"+F.xyz);F=0<d&&d-1!=I?null:this.createInfoArray(F,m,e,f,h,j,n,!1,u,!1,!1);if(null!=F&&!(0<k&&++G!=k)&&(N[v]=F,r||(H+="\n"+(v+1)+"\t"+F[u.get(19)?19:0]+"\t  "+F[2]),B++,0<d))break}s.put("operations",N);r||s.put("symmetryInfo",0==H.length?"":H.substring(1))}if(r)return s;t=0==B?"\n no symmetry operations":0>=
k&&0>=d?"\n"+B+" symmetry operation"+(1==B?":\n":"s:\n"):"";null!=y&&(c=y.substring(y.indexOf(";")+1));E&&this.modelSet.setInfo(b,"spaceGroupInfo",s)}else s=new java.util.Hashtable;s.put("spaceGroupName",c);s.put("spaceGroupNote",null==t?"":t);if(x)a=c;else if(z&&!C&&a.setSpaceGroupName(c),a=a.getSpaceGroupInfoObj(c,null==m?null:m.getUnitCellParams(),l,!p),null==a||a.equals("?"))a="?",s.put("spaceGroupNote","could not identify space group from name: "+c+'\nformat: show spacegroup "2" or "P 2c" or "C m m m" or "x, y, z;-x ,-y, -z"');
s.put("spaceGroupInfo",a);return s},"J.api.SymmetryInterface,~N,~S,~N,JU.P3,JU.P3,~S,~N,~N,~B,~B,~N,J.api.SymmetryInterface,JU.BS");e(c$,"getTransform",function(a,b,c,d,e){null==JS.SymmetryDesc.pta01&&(JS.SymmetryDesc.pta01=new JU.P3,JS.SymmetryDesc.pta02=new JU.P3,JS.SymmetryDesc.ptemp=new JU.P3,JS.SymmetryDesc.vtrans=new JU.V3);JS.SymmetryDesc.pta02.setT(d);JS.SymmetryDesc.vtrans.setT(JS.SymmetryDesc.pta02);a.unitize(JS.SymmetryDesc.pta02);d=3.4028235E38;for(var f=-1,h=0,j=b.length;h<j;h++){var k=
b[h];JS.SymmetryDesc.pta01.setT(c);k.rotTrans(JS.SymmetryDesc.pta01);JS.SymmetryDesc.ptemp.setT(JS.SymmetryDesc.pta01);a.unitize(JS.SymmetryDesc.pta01);var l=JS.SymmetryDesc.pta01.distanceSquared(JS.SymmetryDesc.pta02);if(1.96E-6>l){JS.SymmetryDesc.vtrans.sub(JS.SymmetryDesc.ptemp);JS.SymmetryOperation.normalize12ths(JS.SymmetryDesc.vtrans);k=JU.M4.newM4(k);k.add(JS.SymmetryDesc.vtrans);JS.SymmetryDesc.pta01.setT(c);k.rotTrans(JS.SymmetryDesc.pta01);a.unitize(JS.SymmetryDesc.pta01);l=JS.SymmetryDesc.pta01.distanceSquared(JS.SymmetryDesc.pta02);
if(1.96E-6<=l)continue;return k}l<d&&(d=l,f=h)}e&&(k=b[f],JS.SymmetryDesc.pta01.setT(c),k.rotTrans(JS.SymmetryDesc.pta01),a.unitize(JS.SymmetryDesc.pta01),System.err.println(""+f+" "+JS.SymmetryDesc.pta01.distance(JS.SymmetryDesc.pta02)+" "+JS.SymmetryDesc.pta01+" "+JS.SymmetryDesc.pta02+" "+JU.V3.newVsub(JS.SymmetryDesc.pta02,JS.SymmetryDesc.pta01)));return null},"JS.UnitCell,~A,JU.P3,JU.P3,~B");Y(c$,"THIN_LINE","0.05","THICK_LINE","0.1","RET_XYZ",0,"RET_XYZORIGINAL",1,"RET_LABEL",2,"RET_DRAW",3,
"RET_FTRANS",4,"RET_CTRANS",5,"RET_INVCTR",6,"RET_POINT",7,"RET_AXISVECTOR",8,"RET_ROTANGLE",9,"RET_MATRIX",10,"RET_UNITTRANS",11,"RET_CTRVECTOR",12,"RET_TIMEREV",13,"RET_PLANE",14,"RET_TYPE",15,"RET_ID",16,"RET_CIF2",17,"RET_XYZCANON",18,"RET_XYZNORMALIZED",19,"RET_COUNT",20,"RET_LIST",21,"RET_INVARIANT",22,"keys",Q(-1,["xyz","xyzOriginal","label",null,"fractionalTranslation","cartesianTranslation","inversionCenter",null,"axisVector","rotationAngle","matrix","unitTranslation","centeringVector","timeReversal",
"plane","_type","id","cif2","xyzCanonical","xyzNormalized"]));c$.vtemp=c$.prototype.vtemp=new JU.V3;c$.ptemp=c$.prototype.ptemp=new JU.P3;c$.ptemp2=c$.prototype.ptemp2=new JU.P3;c$.pta01=c$.prototype.pta01=new JU.P3;c$.pta02=c$.prototype.pta02=new JU.P3;c$.vtrans=c$.prototype.vtrans=new JU.V3});aa("JS");X(["JU.SimpleUnitCell","JU.P3","JV.JC"],"JS.UnitCell","java.lang.Double $.Float java.util.Hashtable JU.Lst $.M3 $.M4 $.P4 $.PT $.Quat $.T4 $.V3 J.api.Interface JS.Symmetry JU.BoxInfo $.Escape".split(" "),
function(){c$=P(function(){this.fractionalOffset=this.vertices=null;this.allFractionalRelative=!1;this.moreInfo=this.unitCellMultiplied=this.unitCellMultiplier=this.cartesianOffset=null;this.name="";L(this,arguments)},JS,"UnitCell",JU.SimpleUnitCell,Cloneable);ha(c$,function(){this.cartesianOffset=new JU.P3});c$.fromOABC=e(c$,"fromOABC",function(a,b){var c=new JS.UnitCell;3==a.length&&(a=Q(-1,[new JU.P3,a[0],a[1],a[2]]));var d=y(-1,[-1,0,0,0,0,0,a[1].x,a[1].y,a[1].z,a[2].x,a[2].y,a[2].z,a[3].x,a[3].y,
a[3].z]);c.init(d);c.allFractionalRelative=b;c.initUnitcellVertices();c.setCartesianOffset(a[0]);return c},"~A,~B");c$.fromParams=e(c$,"fromParams",function(a,b){var c=new JS.UnitCell;c.init(a);c.initUnitcellVertices();c.allFractionalRelative=b;return c},"~A,~B");e(c$,"initOrientation",function(a){if(null!=a){var b=new JU.M4;b.setToM3(a);this.matrixFractionalToCartesian.mul2(b,this.matrixFractionalToCartesian);this.matrixCartesianToFractional.setM4(this.matrixFractionalToCartesian).invert();this.initUnitcellVertices()}},
"JU.M3");e(c$,"toUnitCell",function(a,b){null!=this.matrixCartesianToFractional&&(null==b?(this.matrixCartesianToFractional.rotTrans(a),this.unitize(a),this.matrixFractionalToCartesian.rotTrans(a)):(this.matrixCtoFNoOffset.rotTrans(a),this.unitize(a),a.add(b),this.matrixFtoCNoOffset.rotTrans(a)))},"JU.T3,JU.T3");e(c$,"toUnitCellRnd",function(a,b){null!=this.matrixCartesianToFractional&&(null==b?(this.matrixCartesianToFractional.rotTrans(a),this.unitizeRnd(a),this.matrixFractionalToCartesian.rotTrans(a)):
(this.matrixCtoFNoOffset.rotTrans(a),this.unitizeRnd(a),a.add(b),this.matrixFtoCNoOffset.rotTrans(a)))},"JU.T3,JU.T3");e(c$,"unitize",function(a){JU.SimpleUnitCell.unitizeDim(this.dimension,a)},"JU.T3");e(c$,"unitizeRnd",function(a){JU.SimpleUnitCell.unitizeDimRnd(this.dimension,a)},"JU.T3");e(c$,"reset",function(){this.unitCellMultiplied=this.unitCellMultiplier=null;this.setOffset(JU.P3.new3(0,0,0))});e(c$,"setOffset",function(a){if(null!=a){this.unitCellMultiplied=null;var b=S(a,JU.T4)?a:null,c=
null==b?1.4E-45:b.w,d=999999<c;if(null!=b?0>=c||d:100<=a.x||100<=a.y)if(this.unitCellMultiplier=0==a.z&&a.x==a.y&&!d?null:d?JU.P4.newPt(b):JU.P3.newP(a),this.unitCellMultiplied=null,null==b||0==b.w||d)return;if(this.hasOffset()||0<a.lengthSquared())this.fractionalOffset=new JU.P3,this.fractionalOffset.setT(a);this.matrixCartesianToFractional.m03=-a.x;this.matrixCartesianToFractional.m13=-a.y;this.matrixCartesianToFractional.m23=-a.z;this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=
0;this.matrixFractionalToCartesian.m13=0;this.matrixFractionalToCartesian.m23=0;this.matrixFractionalToCartesian.rotTrans(this.cartesianOffset);this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=this.cartesianOffset.z;this.allFractionalRelative&&(this.matrixCtoFNoOffset.setM4(this.matrixCartesianToFractional),this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian))}},"JU.T3");e(c$,"setCartesianOffset",
function(a){this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=this.cartesianOffset.z;a=this.hasOffset();this.fractionalOffset=new JU.P3;this.fractionalOffset.setT(this.cartesianOffset);this.matrixCartesianToFractional.m03=0;this.matrixCartesianToFractional.m13=0;this.matrixCartesianToFractional.m23=0;this.matrixCartesianToFractional.rotTrans(this.fractionalOffset);
this.matrixCartesianToFractional.m03=-this.fractionalOffset.x;this.matrixCartesianToFractional.m13=-this.fractionalOffset.y;this.matrixCartesianToFractional.m23=-this.fractionalOffset.z;this.allFractionalRelative&&(this.matrixCtoFNoOffset.setM4(this.matrixCartesianToFractional),this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian));!a&&0==this.fractionalOffset.lengthSquared()&&(this.fractionalOffset=null)},"JU.T3");e(c$,"getInfo",function(){var a=this.getUnitCellMultiplied();if(a!==this)return a.getInfo();
a=new java.util.Hashtable;a.put("params",this.unitCellParams);a.put("oabc",this.getUnitCellVectors());a.put("volume",Double.$valueOf(this.volume));a.put("matFtoC",this.matrixFractionalToCartesian);a.put("matCtoF",this.matrixCartesianToFractional);return a});e(c$,"dumpInfo",function(a,b){var c=b?this.getUnitCellMultiplied():this;return c!==this?c.dumpInfo(a,!1):"a="+this.a+", b="+this.b+", c="+this.c+", alpha="+this.alpha+", beta="+this.beta+", gamma="+this.gamma+"\noabc="+JU.Escape.eAP(this.getUnitCellVectors())+
"\nvolume="+this.volume+(a?"\nfractional to cartesian: "+this.matrixFractionalToCartesian+"\ncartesian to fractional: "+this.matrixCartesianToFractional:"")},"~B,~B");e(c$,"getUnitCellMultiplied",function(){if(null==this.unitCellMultiplier||0<this.unitCellMultiplier.z&&this.unitCellMultiplier.z==u(this.unitCellMultiplier.z))return this;if(null==this.unitCellMultiplied){var a=JU.BoxInfo.toOABC(this.getScaledCell(!0),null);this.unitCellMultiplied=JS.UnitCell.fromOABC(a,!1)}return this.unitCellMultiplied});
e(c$,"getVertices",function(){return this.vertices});e(c$,"getCartesianOffset",function(){return this.cartesianOffset});e(c$,"getFractionalOffset",function(){return this.fractionalOffset});e(c$,"getTensor",function(a,b){var c=J.api.Interface.getUtil("Tensor",a,"file");if(0==b[0]&&0==b[1]&&0==b[2]){var d=b[7],e=y(-1,[d,d,d]);return c.setFromEigenVectors(JS.UnitCell.unitVectors,e,"iso","Uiso="+d,null)}c.parBorU=b;var d=oa(6,0),f=u(b[6]);if(12==f)d[0]=19.739208802178716*b[0],d[1]=19.739208802178716*
b[1],d[2]=19.739208802178716*b[2],d[3]=39.47841760435743*b[3],d[4]=39.47841760435743*b[4],d[5]=39.47841760435743*b[5],b[7]=(b[0]+b[1]+b[3])/3;else{var e=4==f||5==f||8==f||9==f,h=2-f%2,j=8==f||9==f||10==f?19.739208802178716:4==f||5==f?0.25:2==f||3==f?Math.log(2):1,f=b[0]*j*(e?this.a_*this.a_:1),k=b[1]*j*(e?this.b_*this.b_:1),l=b[2]*j*(e?this.c_*this.c_:1),m=b[3]*j*(e?this.a_*this.b_:1)*h,n=b[4]*j*(e?this.a_*this.c_:1)*h,e=b[5]*j*(e?this.b_*this.c_:1)*h;b[7]=Math.pow(f/19.739208802178716/this.a_/this.a_*
k/19.739208802178716/this.b_/this.b_*l/19.739208802178716/this.c_/this.c_,0.3333);d[0]=this.a*this.a*f+this.b*this.b*this.cosGamma*this.cosGamma*k+this.c*this.c*this.cosBeta*this.cosBeta*l+this.a*this.b*this.cosGamma*m+this.b*this.c*this.cosGamma*this.cosBeta*e+this.a*this.c*this.cosBeta*n;d[1]=this.b*this.b*this.sinGamma*this.sinGamma*k+this.c*this.c*this.cA_*this.cA_*l+this.b*this.c*this.cA_*this.sinGamma*e;d[2]=this.c*this.c*this.cB_*this.cB_*l;d[3]=2*this.b*this.b*this.cosGamma*this.sinGamma*
k+2*this.c*this.c*this.cA_*this.cosBeta*l+this.a*this.b*this.sinGamma*m+this.b*this.c*(this.cA_*this.cosGamma+this.sinGamma*this.cosBeta)*e+this.a*this.c*this.cA_*n;d[4]=2*this.c*this.c*this.cB_*this.cosBeta*l+this.b*this.c*this.cosGamma*e+this.a*this.c*this.cB_*n;d[5]=2*this.c*this.c*this.cA_*this.cB_*l+this.b*this.c*this.cB_*this.sinGamma*e}return c.setFromThermalEquation(d,JU.Escape.eAF(b))},"JV.Viewer,~A");e(c$,"getCanonicalCopy",function(a,b){var c=this.getScaledCell(b);return JU.BoxInfo.getCanonicalCopy(c,
a)},"~N,~B");e(c$,"getScaledCell",function(a){var b=Array(8),c=null,d=null;a&&(null!=this.unitCellMultiplier&&0==this.unitCellMultiplier.z)&&(c=new JU.P3,d=new JU.P3,JU.SimpleUnitCell.ijkToPoint3f(u(this.unitCellMultiplier.x),c,0,0),JU.SimpleUnitCell.ijkToPoint3f(u(this.unitCellMultiplier.y),d,0,0),d.sub(c));for(var e=null==this.unitCellMultiplier||0==this.unitCellMultiplier.z?1:Math.abs(this.unitCellMultiplier.z),f=0;8>f;f++){var h=b[f]=JU.P3.newP(JU.BoxInfo.unitCubePoints[f]);null!=c&&b[f].add3(c.x+
d.x*h.x,c.y+d.y*h.y,c.z+d.z*h.z);b[f].scale(e);this.matrixFractionalToCartesian.rotTrans(h);a||h.sub(this.cartesianOffset)}return b},"~B");e(c$,"initUnitcellVertices",function(){if(null!=this.matrixFractionalToCartesian){this.matrixCtoFNoOffset=JU.M4.newM4(this.matrixCartesianToFractional);this.matrixFtoCNoOffset=JU.M4.newM4(this.matrixFractionalToCartesian);this.vertices=Array(8);for(var a=8;0<=--a;)this.vertices[a]=this.matrixFractionalToCartesian.rotTrans2(JU.BoxInfo.unitCubePoints[a],new JU.P3)}});
e(c$,"checkDistance",function(a,b,c,d,e,f,h,j){a=JU.P3.newP(a);this.toCartesian(a,!0);for(var k=-e;k<=e;k++)for(var l=-f;l<=f;l++)for(var m=-h;m<=h;m++){j.set(b.x+k,b.y+l,b.z+m);this.toCartesian(j,!0);var n=a.distance(j);if(0<d?Math.abs(n-c)<=d:n<=c&&0.1<n)return j.set(k,l,m),!0}return!1},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");e(c$,"getUnitCellMultiplier",function(){return this.unitCellMultiplier});e(c$,"getUnitCellVectors",function(){var a=this.matrixFractionalToCartesian;return Q(-1,[JU.P3.newP(this.cartesianOffset),
JU.P3.new3(this.fix(a.m00),this.fix(a.m10),this.fix(a.m20)),JU.P3.new3(this.fix(a.m01),this.fix(a.m11),this.fix(a.m21)),JU.P3.new3(this.fix(a.m02),this.fix(a.m12),this.fix(a.m22))])});e(c$,"fix",function(a){return 0.001>Math.abs(a)?0:a},"~N");e(c$,"isSameAs",function(a){if(a.unitCellParams.length!=this.unitCellParams.length)return!1;for(var b=this.unitCellParams.length;0<=--b;)if(this.unitCellParams[b]!=a.unitCellParams[b]&&(!Float.isNaN(this.unitCellParams[b])||!Float.isNaN(a.unitCellParams[b])))return!1;
return null==this.fractionalOffset?!a.hasOffset():null==a.fractionalOffset?!this.hasOffset():0==this.fractionalOffset.distanceSquared(a.fractionalOffset)},"JS.UnitCell");e(c$,"hasOffset",function(){return null!=this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()});e(c$,"getQuaternionRotation",function(a){var b=JU.V3.newVsub(this.vertices[4],this.vertices[0]),c=JU.V3.newVsub(this.vertices[2],this.vertices[0]),d=JU.V3.newVsub(this.vertices[1],this.vertices[0]),e=new JU.V3,f=new JU.V3,h=
"-"==a.charAt(0)?-1:1;0>h&&(a=a.substring(1));var j=a;a=JU.PT.rep(JU.PT.rep(JU.PT.rep(JU.PT.rep(JU.PT.rep(JU.PT.rep(a,"ab","A"),"bc","B"),"ca","C"),"ba","D"),"cb","E"),"ac","F");var k=(j=!j.equals(a))?1:0;2==a.length&&(k=a.charCodeAt(1)-48,a=a.substring(0,1));var l=0==k%2;switch("abcABCDEF".indexOf(a)){case 7:h=-h;case 4:b.cross(d,c),k=(5-k)%4+1;default:a=b;b=d;break;case 8:h=-h;case 5:h=-h,c.cross(d,b),k=(2+k)%4+1;case 1:a=c;c=d;h=-h;break;case 3:h=-h;case 6:d.cross(b,c),l&&(k=6-k);case 2:a=d,!j&&
0<k&&(k=5-k)}0<k&&0<h!=l&&(b=c,a.scale(-1));switch(k){case 2:a.scale(-1);b.scale(-1);break;case 3:b.scale(-1);break;case 4:a.scale(-1)}e.cross(a,b);f.cross(e,a);return JU.Quat.getQuaternionFrame(null,f,e).inv()},"~S");e(c$,"getV0abc",function(a,b){if(S(a,Array))return a;var c,d=!1,e=Array(4),f=e[0]=JU.V3.new3(0,0,0);e[1]=JU.V3.new3(1,0,0);e[2]=JU.V3.new3(0,1,0);e[3]=JU.V3.new3(0,0,1);var h=new JU.M3;if(S(a,String)){c=a;var j="0,0,0";if(0==c.indexOf("a="))return JU.SimpleUnitCell.setOabc(c,null,e);
d=c.indexOf(";");0<=d&&(j=c.substring(d+1),c=c.substring(0,d));c+=";0,0,0";(d=c.startsWith("!"))&&(c=c.substring(1));var k=new JS.Symmetry;k.setSpaceGroup(!1);c=k.addSpaceGroupOperation("="+c,0);if(0>c)return null;c=k.getSpaceGroupOperation(c);c.doFinalize();j=JU.PT.split(j,",");k=y(3,0);if(3==j.length)for(var l=0;3>l;l++){var m=j[l],n=m.indexOf("/");k[l]=0<=n?JU.PT.parseFloat(m.substring(0,n))/JU.PT.parseFloat(m.substring(n+1)):JU.PT.parseFloat(m)}j=JU.P3.new3(k[0],k[1],k[2]);c.setTranslation(j);
null!=b&&b.setM4(c)}else if(S(a,JU.M3))c=JU.M4.newMV(a,new JU.P3);else if(S(a,JU.M4))c=a;else{c=a[0];c.getRotationScale(h);this.toCartesian(f,!1);c.rotTrans(f);for(c=1;4>c;c++)this.toCartesian(e[c],!0),h.rotate(e[c]);return e}c.getRotationScale(h);c.getTranslation(f);d?(h.invert(),h.transpose(),h.rotate(f),f.scale(-1)):h.transpose();this.toCartesian(f,!1);for(c=1;4>c;c++)h.rotate(e[c]),this.toCartesian(e[c],!0);return e},"~O,JU.M4");e(c$,"toFromPrimitive",function(a,b,c,d){var e=c.length-3,f=null;
if("r"==b||null==d){switch(b){default:return!1;case "r":return JU.SimpleUnitCell.getReciprocal(c,c,1),!0;case "P":a=!0;f=JU.M3.newA9(y(-1,[1,0,0,0,1,0,0,0,1]));break;case "A":f=JU.M3.newA9(y(-1,[1,0,0,0,0.5,0.5,0,-0.5,0.5]));break;case "B":f=JU.M3.newA9(y(-1,[0.5,0,0.5,0,1,0,-0.5,0,0.5]));break;case "C":f=JU.M3.newA9(y(-1,[0.5,0.5,0,-0.5,0.5,0,0,0,1]));break;case "R":f=JU.M3.newA9(y(-1,[0.6666667,-0.33333334,-0.33333334,0.33333334,0.33333334,-0.6666667,0.33333334,0.33333334,0.33333334]));break;case "I":f=
JU.M3.newA9(y(-1,[-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5]));break;case "F":f=JU.M3.newA9(y(-1,[0,0.5,0.5,0.5,0,0.5,0.5,0.5,0]))}a||f.invert()}else f=JU.M3.newM3(d),a&&f.invert();for(a=c.length;--a>=e;)b=c[a],this.toFractional(b,!1),f.rotate(b),this.toCartesian(b,!1);return!0},"~B,~S,~A,JU.M3");e(c$,"getConventionalUnitCell",function(a,b){var c=this.getUnitCellVectors();(!a.equals("P")||null!=b)&&this.toFromPrimitive(!1,a.charAt(0),c,b);return c},"~S,JU.M3");c$.cloneUnitCell=e(c$,"cloneUnitCell",function(a){var b=
null;try{b=a.clone()}catch(c){if(!ea(c,CloneNotSupportedException))throw c;}return b},"JS.UnitCell");e(c$,"getEquivPoints",function(a,b,c,d,e,f){var h=0<=b.indexOf("fromfractional"),j=0<=b.indexOf("tofractional");b=0<=b.indexOf("packed");null==d&&(d=new JU.Lst);a=JU.P3.newP(a);h||this.toFractional(a,!0);for(var h=d.size(),k=0,l=c.length;k<l;k++){var m=JU.P3.newP(a);c[k].rotTrans(m);m.x=this.fixFloor(m.x-Math.floor(m.x));m.y=this.fixFloor(m.y-Math.floor(m.y));m.z=this.fixFloor(m.z-Math.floor(m.z));
d.addLast(m);h++}if(b)for(k=f;k<h;k++)a.setT(d.get(k)),this.unitizeRnd(a),0==a.x&&(d.addLast(JU.P3.new3(0,a.y,a.z)),d.addLast(JU.P3.new3(1,a.y,a.z)),0==a.y&&(d.addLast(JU.P3.new3(1,1,a.z)),d.addLast(JU.P3.new3(0,0,a.z)),0==a.z&&(d.addLast(JU.P3.new3(1,1,1)),d.addLast(JU.P3.new3(0,0,0))))),0==a.y&&(d.addLast(JU.P3.new3(a.x,0,a.z)),d.addLast(JU.P3.new3(a.x,1,a.z)),0==a.z&&(d.addLast(JU.P3.new3(a.x,0,0)),d.addLast(JU.P3.new3(a.x,1,1)))),0==a.z&&(d.addLast(JU.P3.new3(a.x,a.y,0)),d.addLast(JU.P3.new3(a.x,
a.y,1)),0==a.x&&(d.addLast(JU.P3.new3(0,a.y,0)),d.addLast(JU.P3.new3(1,a.y,1))));JS.UnitCell.checkDuplicate(d,e,f,-1);if(!j)for(k=d.size();--k>=f;)this.toCartesian(d.get(k),!0);return d},"JU.P3,~S,~A,JU.Lst,~N,~N");e(c$,"fixFloor",function(a){return 1==a?0:a},"~N");c$.checkDuplicate=e(c$,"checkDuplicate",function(a,b,c,d){for(0>d&&(d=a.size());b<d;b++)for(var e=a.get(b),f=Math.max(b+1,c);f<d;f++)1.96E-6>a.get(f).distanceSquared(e)&&(a.removeItemAt(f),d--,f--)},"JU.Lst,~N,~N,~N");e(c$,"getState",function(){var a=
"";null!=this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()&&(a+="  unitcell offset "+JU.Escape.eP(this.fractionalOffset)+";\n");null!=this.unitCellMultiplier&&(a+="  unitcell range "+JU.SimpleUnitCell.escapeMultiplier(this.unitCellMultiplier)+";\n");return a});Y(c$,"twoP2",19.739208802178716);c$.unitVectors=c$.prototype.unitVectors=Q(-1,[JV.JC.axisX,JV.JC.axisY,JV.JC.axisZ])})})(Clazz,Clazz.getClassName,Clazz.newLongArray,Clazz.doubleToByte,Clazz.doubleToInt,Clazz.doubleToLong,Clazz.declarePackage,
Clazz.instanceOf,Clazz.load,Clazz.instantialize,Clazz.decorateAsClass,Clazz.floatToInt,Clazz.floatToLong,Clazz.makeConstructor,Clazz.defineEnumConstant,Clazz.exceptionOf,Clazz.newIntArray,Clazz.defineStatics,Clazz.newFloatArray,Clazz.declareType,Clazz.prepareFields,Clazz.superConstructor,Clazz.newByteArray,Clazz.declareInterface,Clazz.p0p,Clazz.pu$h,Clazz.newShortArray,Clazz.innerTypeInstance,Clazz.isClassDefined,Clazz.prepareCallback,Clazz.newArray,Clazz.castNullAs,Clazz.floatToShort,Clazz.superCall,
Clazz.decorateAsType,Clazz.newBooleanArray,Clazz.newCharArray,Clazz.implementOf,Clazz.newDoubleArray,Clazz.overrideConstructor,Clazz.clone,Clazz.doubleToShort,Clazz.getInheritedLevel,Clazz.getParamsType,Clazz.isAF,Clazz.isAB,Clazz.isAI,Clazz.isAS,Clazz.isASS,Clazz.isAP,Clazz.isAFloat,Clazz.isAII,Clazz.isAFF,Clazz.isAFFF,Clazz.tryToSearchAndExecute,Clazz.getStackTrace,Clazz.inheritArgs,Clazz.alert,Clazz.defineMethod,Clazz.overrideMethod,Clazz.declareAnonymous,Clazz.cloneFinals);
