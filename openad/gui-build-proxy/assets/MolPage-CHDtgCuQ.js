import{d as V,u as $,g as y,h as i,i as v,F as E,v as n,t as S,m as M,n as D,p as F,q as c,a as R,r as k,w as z,e as A,z as K,k as I,j as P,c as H,A as O,B as _,C as q,D as U,E as Y}from"./index-CbxKm7xL.js";import{u as j}from"./MolViewerStore-DpkCA8vv.js";import{_ as Q}from"./JsonViewer.vue_vue_type_script_setup_true_lang-CBnLYtBi.js";import{M as W}from"./MolViewer-CJaIA-mw.js";import{B as G}from"./BaseFetchingFile-DMqDxKAE.js";import{i as X}from"./initRDKit-WaX80hiK.js";import"./BreadCrumbs-iwfzh9l4.js";import"./TextBox-CQoeTjJs.js";import"./BaseFetching-CRQcbI-9.js";import"./MolRender3D-DDtlI2WI.js";const J={class:"error-msg"},Z={class:"soft"},ee={key:1,class:"error-msg"},oe={key:2,class:"soft"},ne=n("br",null,null,-1),te=V({__name:"BaseError",props:{loadingError:{},errorText:{},backLink:{},note:{}},setup(f){const d=$(),e=f;function a(){e.backLink?d.push(e.backLink):d.back()}return(l,h)=>{const m=y("cv-button");return i(),v(E,null,[l.errorText?(i(),v(E,{key:0},[n("div",J,S(l.errorText),1),n("p",Z,S(l.loadingError),1)],64)):(i(),v("div",ee,S(l.loadingError),1)),l.note?(i(),v("p",oe,S(l.note),1)):M("",!0),ne,D(m,{onClick:a},{default:F(()=>[c("Back")]),_:1})],64)}}}),B="This may be a false negative. Please try again to confirm.",le=V({__name:"TheMolFromIdentifier",props:{identifier:{}},setup(f){const d=R(),e=j(),a=f,l=k(!1),h=k(!1),m=k(""),s=k(""),g=k(d.matched[0].name);console.log(a.identifier),a.identifier.startsWith("InChI=")?(e.setSmolIdentifier("inchi",a.identifier),e.fetchSmolVizData(a.identifier)):(w(a.identifier),e.fetchSmolVizData(a.identifier)),b(a.identifier),z(()=>a.identifier,t=>{e.clear(),t&&b(t)});async function b(t=null){t&&(l.value=!0,m.value="",s.value="",g.value=g.value.replace(/^headless-/,""),g.value=="mol"?(h.value=!0,C(t,{onSuccess:()=>{h.value=!1},onError:()=>{o(t,{onSuccess:()=>{h.value=!1},onError:()=>{h.value=!1,s.value=B}})}})):["smol","mol"].includes(g.value)?C(t,{onError:()=>{s.value=B}}):g.value=="mmol"&&o(t,{onError:()=>{s.value=B}}))}function C(t,{onSuccess:u=()=>{},onError:p=()=>{}}={}){A(K.getSmolData(t),{onSuccess:r=>{const T=!e.inchi;e.setMolData(r,"smol"),T&&e.fetchSmolVizData(t),u()},onError:p,loading:l,loadingError:m})}function o(t,{onSuccess:u=()=>{},onError:p=()=>{}}={}){A(K.getMmolData(t),{onSuccess:r=>{e.setMolData(r,"mmol"),u()},onError:p,loading:l,loadingError:m})}async function w(t){await X();let u=window.RDKit.get_mol(t);if(!u)return;const p=u.get_inchi();e.setSmolIdentifier("canonical_smiles",t),e.setSmolIdentifier("inchi",p),e.setSmolIdentifier("inchikey",window.RDKit.get_inchikey_for_inchi(p))}return(t,u)=>m.value?(i(),I(te,{key:0,loadingError:m.value,backLink:"/mol",note:s.value},null,8,["loadingError","note"])):l.value||h.value?(i(),I(G,{key:1})):P(d).query.use=="json"?(i(),I(Q,{key:2,data:P(e).smol},null,8,["data"])):(i(),I(W,{key:3,context:"identifier",loading:l.value,loadingError:m.value,onRetryLoad:u[0]||(u[0]=p=>b(t.identifier))},null,8,["loading","loadingError"]))}}),L=f=>(q("data-v-8beda03f"),f=f(),U(),f),ae=L(()=>n("h3",null,"Display any molecule",-1)),ie=L(()=>n("br",null,null,-1)),re=L(()=>n("br",null,null,-1)),se={key:0},ue={key:1},ce={key:0,class:"error-msg"},de={class:"fields"},me=V({__name:"TheMolInput",setup(f){const d=$(),e=k(""),a=k(""),l=k("smol"),h=[{label:"Small molecules",val:"smol"},{label:"Macromolecules",val:"mmol"}],m=H(()=>{switch(l.value){case"smol":return"InChI, SMILES, name, InChIKey or PubChem ID";case"mmol":return"FASTA sequence or PDB id";default:return"Molecule identifier"}});function s(C){const o={inchi:"InChI=1S/C10H14O/c1-7-5-9(11)6-8(2)10(7,3)4/h5-6H,1-4H3",smiles:"CC1=CC(=O)C=C(C1(C)C)C",name:"penguinone",inchikey:"RHIYIMQPIGYWEK-UHFFFAOYSA-N",cid:"681",fasta:"IINVKTSLKTIIKNALDKIQX",pdbId:"8t3n"};e.value=o[C],a.value=""}function g(){e.value="",a.value=""}function b(){e.value?d.push({name:l.value,params:{identifier:e.value.toString()}}):a.value="Please enter a molecule identifier."}return(C,o)=>{const w=y("cv-radio-button"),t=y("cv-radio-group"),u=y("cv-text-input"),p=y("cv-button");return i(),v(E,null,[ae,ie,D(t,{legendText:"Search options",hideLegend:!0,onChange:g},{default:F(()=>[(i(),v(E,null,O(h,({label:r,val:T},N)=>D(w,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=x=>l.value=x),key:N,name:"group-1",label:r,value:T,"hide-label":!1,"label-left":!1},null,8,["modelValue","label","value"])),64))]),_:1}),re,["mol","smol"].includes(l.value)?(i(),v("p",se,[c(" Accepted identifiers are: "),n("b",null,[n("a",{href:"#",onClick:o[1]||(o[1]=_(r=>s("inchi"),["prevent"]))},"InChI")]),c(" or "),n("b",null,[n("a",{href:"#",onClick:o[2]||(o[2]=_(r=>s("smiles"),["prevent"]))},"SMILES")]),c(" and "),n("b",null,[n("a",{href:"#",onClick:o[3]||(o[3]=_(r=>s("name"),["prevent"]))},"name")]),c(", "),n("b",null,[n("a",{href:"#",onClick:o[4]||(o[4]=_(r=>s("inchikey"),["prevent"]))},"InChIKey")]),c(" or "),n("b",null,[n("a",{href:"#",onClick:o[5]||(o[5]=_(r=>s("cid"),["prevent"]))},"PubChem CID")]),c(" when a molecule is listed on PubChem. ")])):M("",!0),["mol","mmol"].includes(l.value)?(i(),v("p",ue,[c(" Macromolecules can be found by their "),n("b",null,[n("a",{href:"#",onClick:o[6]||(o[6]=_(r=>s("fasta"),["prevent"]))},"FASTA sequence")]),c(" or "),n("b",null,[n("a",{href:"#",onClick:o[7]||(o[7]=_(r=>s("pdbId"),["prevent"]))},"PDB id")]),c(". ")])):M("",!0),n("form",{id:"input-form",onSubmit:_(b,["prevent"])},[a.value?(i(),v("div",ce,S(a.value),1)):M("",!0),n("div",de,[D(u,{modelValue:e.value,"onUpdate:modelValue":o[8]||(o[8]=r=>e.value=r),type:"text",placeholder:m.value,"hide-label":!0},null,8,["modelValue","placeholder"]),D(p,{size:"default"},{default:F(()=>[c("Display")]),_:1})])],32)],64)}}}),fe=Y(me,[["__scopeId","data-v-8beda03f"]]),Se=V({__name:"MolPage",props:{identifier:{}},setup(f){return(d,e)=>d.identifier?(i(),I(le,{key:0,identifier:d.identifier},null,8,["identifier"])):(i(),I(fe,{key:1}))}});export{Se as default};
