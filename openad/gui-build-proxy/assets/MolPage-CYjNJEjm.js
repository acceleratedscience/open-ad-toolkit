import{d as M,a as L,r as h,w as N,e as V,z as w,j as g,h as d,k as _,u as R,c as z,g as C,i as v,n as S,p as F,F as A,A as H,q as u,v as n,B as c,m as k,t as O,C as q,D as $,E as U}from"./index-B1am-EuC.js";import{u as Y}from"./MolViewerStore-BS84-6gn.js";import{_ as j}from"./JsonViewer.vue_vue_type_script_setup_true_lang-DGEQZgro.js";import{M as Q}from"./MolViewer-Cq_QDa5u.js";import{B as W}from"./BaseFetchingFile-B4Xb8nyI.js";import{i as G}from"./initRDKit-WaX80hiK.js";import"./BreadCrumbs-4Ncc6s9f.js";import"./TextBox-CesRCwFc.js";import"./BaseFetching-Bm1Q0vaN.js";import"./MolRender3D-CiYyibLn.js";const X=M({__name:"TheMolFromIdentifier",props:{identifier:{}},setup(m){const p=L(),t=Y(),o=m,a=h(!1),f=h(""),I=h(p.matched[0].name);o.identifier.startsWith("InChI=")?(t.setSmolIdentifier("inchi",o.identifier),t.fetchSmolVizData(o.identifier)):(b(o.identifier),t.fetchSmolVizData(o.identifier)),r(o.identifier),N(()=>o.identifier,i=>{t.clear(),i&&r(i)});async function r(i=null){if(!i)return;let l=!1;return a.value=!0,f.value="",I.value=="smol"?V(w.getSmolData(i),{onSuccess:e=>{const y=!t.inchi;t.setMolData(e,"smol"),l=!0,y&&t.fetchSmolVizData(t.inchi)},loading:a,loadingError:f}):I.value=="mmol"&&V(w.getMmolData(i),{onSuccess:e=>{t.setMolData(e,"mmol"),l=!0},loading:a,loadingError:f}),l}async function b(i){await G();let l=window.RDKit.get_mol(i);if(!l)return;const e=l.get_inchi();t.setSmolIdentifier("canonical_smiles",i),t.setSmolIdentifier("inchi",e),t.setSmolIdentifier("inchikey",window.RDKit.get_inchikey_for_inchi(e))}return(i,l)=>g(t).loading?(d(),_(W,{key:0})):g(p).query.use=="json"?(d(),_(j,{key:1,data:g(t).smol},null,8,["data"])):(d(),_(Q,{key:2,context:"identifier",loading:a.value,loadingError:f.value,onRetryLoad:l[0]||(l[0]=e=>r(i.identifier))},null,8,["loading","loadingError"]))}}),D=m=>(q("data-v-8beda03f"),m=m(),$(),m),J=D(()=>n("h3",null,"Display any molecule",-1)),Z=D(()=>n("br",null,null,-1)),ee=D(()=>n("br",null,null,-1)),te={key:0},ne={key:1},oe={key:0,class:"error-msg"},ie={class:"fields"},le=M({__name:"TheMolInput",setup(m){const p=R(),t=h(""),o=h(""),a=h("smol"),f=[{label:"Small molecules",val:"smol"},{label:"Macromolecules",val:"mmol"}],I=z(()=>{switch(a.value){case"smol":return"InChI, SMILES, name, InChIKey or PubChem ID";case"mmol":return"FASTA sequence or PDB id";default:return"Molecule identifier"}});function r(l){const e={inchi:"InChI=1S/C10H14O/c1-7-5-9(11)6-8(2)10(7,3)4/h5-6H,1-4H3",smiles:"CC1=CC(=O)C=C(C1(C)C)C",name:"penguinone",inchikey:"RHIYIMQPIGYWEK-UHFFFAOYSA-N",cid:"681",fasta:"IINVKTSLKTIIKNALDKIQX",pdbId:"8t3n"};t.value=e[l],o.value=""}function b(){t.value="",o.value=""}function i(){t.value?p.push({name:a.value,params:{identifier:t.value.toString()}}):o.value="Please enter a molecule identifier."}return(l,e)=>{const y=C("cv-radio-button"),B=C("cv-radio-group"),K=C("cv-text-input"),T=C("cv-button");return d(),v(A,null,[J,Z,S(B,{legendText:"Search options",hideLegend:!0,onChange:b},{default:F(()=>[(d(),v(A,null,H(f,({label:s,val:x},P)=>S(y,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=E=>a.value=E),key:P,name:"group-1",label:s,value:x,"hide-label":!1,"label-left":!1},null,8,["modelValue","label","value"])),64))]),_:1}),ee,["mol","smol"].includes(a.value)?(d(),v("p",te,[u(" Accepted identifiers are: "),n("b",null,[n("a",{href:"#",onClick:e[1]||(e[1]=c(s=>r("inchi"),["prevent"]))},"InChI")]),u(" or "),n("b",null,[n("a",{href:"#",onClick:e[2]||(e[2]=c(s=>r("smiles"),["prevent"]))},"SMILES")]),u(" and "),n("b",null,[n("a",{href:"#",onClick:e[3]||(e[3]=c(s=>r("name"),["prevent"]))},"name")]),u(", "),n("b",null,[n("a",{href:"#",onClick:e[4]||(e[4]=c(s=>r("inchikey"),["prevent"]))},"InChIKey")]),u(" or "),n("b",null,[n("a",{href:"#",onClick:e[5]||(e[5]=c(s=>r("cid"),["prevent"]))},"PubChem CID")]),u(" when a molecule is listed on PubChem. ")])):k("",!0),["mol","mmol"].includes(a.value)?(d(),v("p",ne,[u(" Macromolecules can be found by their "),n("b",null,[n("a",{href:"#",onClick:e[6]||(e[6]=c(s=>r("fasta"),["prevent"]))},"FASTA sequence")]),u(" or "),n("b",null,[n("a",{href:"#",onClick:e[7]||(e[7]=c(s=>r("pdbId"),["prevent"]))},"PDB id")]),u(". ")])):k("",!0),n("form",{id:"input-form",onSubmit:c(i,["prevent"])},[o.value?(d(),v("div",oe,O(o.value),1)):k("",!0),n("div",ie,[S(K,{modelValue:t.value,"onUpdate:modelValue":e[8]||(e[8]=s=>t.value=s),type:"text",placeholder:I.value,"hide-label":!0},null,8,["modelValue","placeholder"]),S(T,{size:"default"},{default:F(()=>[u("Display")]),_:1})])],32)],64)}}}),ae=U(le,[["__scopeId","data-v-8beda03f"]]),_e=M({__name:"MolPage",props:{identifier:{}},setup(m){return(p,t)=>p.identifier?(d(),_(X,{key:0,identifier:p.identifier},null,8,["identifier"])):(d(),_(ae,{key:1}))}});export{_e as default};
