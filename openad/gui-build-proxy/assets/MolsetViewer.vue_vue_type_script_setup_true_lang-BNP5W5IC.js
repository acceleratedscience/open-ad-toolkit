import{d as A,r as V,h as n,i as r,v as k,Y as N,a9 as ve,n as w,I as fe,F as $,A as R,S as T,j as s,t as y,aa as Y,C as J,D as Q,E as q,ab as ke,c as F,H as ee,ac as Me,w as X,a3 as H,q as g,P as Z,g as P,ad as be,ae as xe,p as L,k as O,a as te,b as se,a1 as Ce,m as E,af as Ie,u as pe,L as le,R as me,o as $e,W as Ve,Q as he,a5 as Be,a6 as De,e as Fe,z as Le,ag as K}from"./index-DwYRJoEC.js";import{u as j}from"./BaseFetching-CtAuO-DI.js";import{u as _e}from"./MolViewerStore-VkF0_V-U.js";import{B as Te}from"./BreadCrumbs-CUWBa4am.js";import{u as ge,B as Ne,a as Ee,M as Re,b as Ae}from"./MolViewer-ealKfnRt.js";import{i as Pe}from"./initRDKit-WaX80hiK.js";import{C as Ue,c as Se}from"./16-Oa6gYw0C.js";const oe=i=>(J("data-v-3500944e"),i=i(),Q(),i),Ge=oe(()=>k("div",null,"Identifiers & properties",-1)),ze={class:"content"},Ke=oe(()=>k("h4",null,"Identifiers",-1)),Oe={class:"item-wrap"},qe=["onClick"],je=oe(()=>k("h4",null,"Properties",-1)),He={class:"item-wrap"},We=["onClick"],Je=A({__name:"TheMolProps",setup(i){const e=j(),l=V(!1);function t(){l.value=!l.value}return(S,u)=>(n(),r("div",{id:"properties",class:T({expand:l.value})},[k("div",{class:"header",onClick:t},[Ge,N(w(fe,{icon:"icn-chevron-up"},null,512),[[ve,l.value]]),N(w(fe,{icon:"icn-chevron-down"},null,512),[[ve,!l.value]])]),k("div",ze,[Ke,k("div",Oe,[(n(!0),r($,null,R(s(e).availIdentifiers,(d,h)=>(n(),r("div",{key:h,class:T(["item",{sel:s(e).showIdentifiers.includes(d)}]),onClick:m=>s(e).toggleIdentifier(d)},y(s(Y)(d)),11,qe))),128))]),je,k("div",He,[(n(!0),r($,null,R(s(e).availProps,(d,h)=>(n(),r("div",{key:h,class:T(["item",{sel:s(e).showProps.includes(d)}]),onClick:m=>s(e).toggleProp(d)},y(s(Y)(d)),11,We))),128))])])],2))}}),Qe=q(Je,[["__scopeId","data-v-3500944e"]]);function Xe(i){const e=window.RDKit.get_mol(i||"invalid"),l=W(e);return e==null||e.delete(),l}function W(i){return!!i}const Ye=k("br",null,null,-1),Ze=["title"],et=k("br",null,null,-1),tt=["innerHTML"],st=["title","id","width","height"],lt=A({__name:"MolRender2D",props:{id:{type:String,required:!0},className:{type:String,default:""},svgMode:{type:Boolean,default:!1},width:{type:Number,default:250},height:{type:Number,default:200},structure:{type:String,required:!0},subStructure:{type:String,default:""},extraDetails:{type:Object,default:()=>{}},drawingDelay:{type:Number,default:void 0}},setup(i){const e=i;let l=V(!1),t=V(!1);V(!1);let S=ke({width:e.width,height:e.height,bondLineWidth:2,addStereoAnnotation:!0,...e.extraDetails}),u=V("");const d=F(()=>{const v={};return e.width&&(v.width=e.width+"px"),e.height&&(v.height=e.height+"px"),v});ee(()=>{Pe().then(()=>{l.value=!0;try{C()}catch(v){console.error(v)}}).catch(v=>{console.error(v),t.value=!0})}),Me(()=>{!t.value&&l.value&&e.svgMode}),X(e,()=>C());function h(v,c){if(W(v)&&W(c)){const p=JSON.parse((v==null?void 0:v.get_substruct_matches(c))||""),x=p&&typeof p[0]=="object"?p.reduce((I,{atoms:_,bonds:a})=>({atoms:[...I.atoms,..._],bonds:[...I.bonds,...a]}),{atoms:[],bonds:[]}):p;return JSON.stringify({...S,...e.extraDetails||{},...x})}else return JSON.stringify({...S,...e.extraDetails||{}})}async function m(){const v=window.RDKit.get_mol(e.structure||"invalid"),c=window.RDKit.get_qmol(e.subStructure||"invalid"),p=W(v);if(e.svgMode&&p){const x=v.get_svg_with_highlights(h(v,c));u.value=x}else if(p){await Z();const x=document.getElementById(e.id);v.draw_to_canvas_with_highlights(x,h(v,c))}v==null||v.delete(),c==null||c.delete()}function C(){e.drawingDelay?setTimeout(()=>m(),e.drawingDelay):m()}return(v,c)=>s(l)?s(t)?(n(),r("div",{key:1,class:"placeholder error-msg",style:H(d.value)},[g("RDKit"),Ye,g("Error")],4)):s(Xe)(i.structure)?i.svgMode?(n(),r("div",{key:3,class:T(`svg-wrap ${i.className}`),style:H(d.value),innerHTML:s(u)},null,14,tt)):(n(),r("div",{key:4,class:T(`molecule-canvas-container ${i.className}`)},[k("canvas",{title:i.structure,id:i.id,width:i.width,height:i.height},null,8,st)],2)):(n(),r("div",{key:2,title:`Cannot render structure: ${i.structure}`,class:"placeholder error-msg",style:H(d.value)},[g(" Invalid"),et,g("mol string ")],12,Ze)):(n(),r("div",{key:0,class:"placeholder",style:H(d.value)},"Loading renderer",4))}}),ot={id:"search-wrap"},at={class:"toggle"},nt=A({__name:"MolSearch",setup(i){const e=j(),l=F({get:()=>e.searchStr,set:e.setSearchStr});return(t,S)=>{const u=P("cv-search");return n(),r("div",ot,[w(u,{modelValue:l.value,"onUpdate:modelValue":S[0]||(S[0]=d=>l.value=d),label:"TextSmarts",size:"lg",type:"text",placeholder:"Search "+s(e).searchMode,"hide-label":!0},null,8,["modelValue","placeholder"]),k("div",at,[k("div",{class:T(["close",{show:s(e).searchStr.length>0}]),onClick:S[1]||(S[1]=d=>s(e).setSearchStr(""))},[w(s(Ue))],2),k("div",{class:T(["option op-text",{sel:s(e).searchMode=="text"}]),onClick:S[2]||(S[2]=d=>s(e).setSearchMode("text"))},null,2),k("div",{class:T(["option op-smarts",{sel:s(e).searchMode=="smarts"}]),onClick:S[3]||(S[3]=d=>s(e).setSearchMode("smarts"))},null,2)])])}}}),it=q(nt,[["__scopeId","data-v-6fca3c82"]]),rt={class:"sort-wrap"},ct=A({__name:"SortDropdown",props:be({items:{},disabledItems:{},default:{default:"index"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const e=i,l=xe(i,"modelValue"),t=F(()=>!!l.value&&l.value[0]==="-"),S=F({get:()=>{var h;return((h=l.value)==null?void 0:h.replace(/^-/,""))||""},set:h=>{var m;h!=((m=l.value)==null?void 0:m.replace(/^-/,""))&&(console.log("set"),l.value=h)}}),u=F(()=>!l.value||["index","-index"].includes(l.value));function d(){l.value==`-${e.default}`?l.value="":l.value?l.value=l.value[0]==="-"?l.value.slice(1):`-${l.value}`:l.value=`-${e.default}`}return(h,m)=>{const C=P("cv-dropdown-item"),v=P("cv-dropdown");return n(),r("div",rt,[k("div",{class:"sort-direction",onClick:d},y(t.value?"↑":"↓"),1),w(v,{modelValue:S.value,"onUpdate:modelValue":m[0]||(m[0]=c=>S.value=c),class:T(["dd-sort",{blank:u.value}])},{default:L(()=>[w(C,{value:""},{default:L(()=>[g(" ")]),_:1}),(n(!0),r($,null,R(h.items,(c,p)=>(n(),O(C,{key:p,value:c},{default:L(()=>[g(y(c),1)]),_:2},1032,["value"]))),128)),w(C,{value:e.default,hidden:""},{default:L(()=>[g(" ")]),_:1},8,["value"]),(n(!0),r($,null,R(h.disabledItems,(c,p)=>(n(),O(C,{key:p,value:c,disabled:"",title:c},{default:L(()=>[g(y(c),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["modelValue","class"])])}}}),dt=q(ct,[["__scopeId","data-v-6ea047d0"]]),ut=Se("CheckmarkFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}},{elem:"path",attrs:{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}}]),vt=Se("ErrorFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z"}},{elem:"path",attrs:{fill:"none",d:"M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z","data-icon-path":"inner-path",opacity:"0"}}]),ye=i=>(J("data-v-3b6a36d9"),i=i(),Q(),i),ft={class:"btn-wrap"},ht=ye(()=>k("option",{value:"",hidden:""},null,-1)),pt=ye(()=>k("option",{value:"as-molset"},"Save as molset JSON",-1)),mt={value:"update-original"},_t=A({__name:"TheButtonSaveMolset",props:{disabled:{type:Boolean,default:!1}},setup(i){const e=te(),l=j(),t=se(),S=ge(),u=["result-mols","my-mols"].includes(l.context||"")?"Update":"Save",d=V(!1),h=V(!1),m=V(!1),C=V(null),v=V(null),c=V(""),p=i,x=F(()=>{var b;return(b=l.context)==null?void 0:b.match(/-file$/)}),I=F(()=>v.value?{width:v.value+"px"}:{});X(c,b=>{b&&_(b),setTimeout(()=>c.value="",1)});async function _(b){var f,o;d.value=!0,v.value=((o=(f=C.value)==null?void 0:f.$el)==null?void 0:o.offsetWidth)??null;try{let B=!1;x.value?b=="as-molset"?B=await S("molset",!1):b=="update-original"&&(B=await M()):B=await a(),d.value=!1,B&&(l.setHasChanges(!1),m.value=!0,setTimeout(()=>{m.value=!1},2e3))}catch(B){console.error(B),d.value=!1,h.value=!0,setTimeout(()=>{h.value=!1},2e3)}}function a(){if(l.context=="json")return l.updateMolset();if(l.context=="my-mols")return l.updateMolset_mymols();if(l.context=="result-mols")return l.updateMolset_result();if(l.context=="dataframe"){const b=e.params.dfName;return l.updateMolset_dataframe(b)}return Promise.resolve(!1)}async function M(){return l.context=="sdf-file"?l.saveMolsetAsSDF(t.path,{newFile:!1}):l.context=="csv-file"?l.saveMolsetAsCSV(t.path,{newFile:!1}):l.context=="smi-file"?l.saveMolsetAsSmiles(t.path,{newFile:!1}):Promise.resolve(!1)}return(b,f)=>{var B;const o=P("cv-button");return n(),r("div",ft,[w(o,{ref_key:"$btn",ref:C,size:"field",disabled:p.disabled&&!m.value,class:T({loading:d.value,error:h.value,success:m.value}),style:H(I.value),icon:h.value?s(vt):m.value?s(ut):null,onClick:_},{default:L(()=>[g(y(s(u)),1)]),_:1},8,["disabled","class","style","icon"]),x.value?N((n(),r("select",{key:0,"onUpdate:modelValue":f[0]||(f[0]=U=>c.value=U)},[ht,pt,k("option",mt,"Update original "+y((B=s(l).context)==null?void 0:B.split("-")[0].toUpperCase()),1)],512)),[[Ce,c.value]]):E("",!0)])}}}),gt=q(_t,[["__scopeId","data-v-3b6a36d9"]]);function St(i){let e;ee(()=>{const l=document.querySelector(i);if(!l)return;const t=getComputedStyle(l),S=t.top=="auto"?0:parseInt(t.top);e=new IntersectionObserver(([u])=>u.target.classList.toggle("sticky",u.intersectionRatio<1),{rootMargin:`-${S+1}px`,threshold:[1]}),e.observe(l)}),Ie(()=>{const l=document.querySelector(i);l&&e.unobserve(l)})}const ae=i=>(J("data-v-17570cae"),i=i(),Q(),i),yt={id:"actions"},wt=ae(()=>k("div",{class:"breaker-1"},null,-1)),kt=ae(()=>k("div",{class:"filler"},null,-1)),Mt=ae(()=>k("div",{class:"breaker-2"},null,-1)),bt=A({__name:"TheMolGridActions",setup(i){pe();const e=j();se(),le();const l=ge(),t=V("default"),S=["select all","deselect all","select matching","invert selection"],u=V("default"),d=["remove selected","keep selected","copy selected","save as"],h=F(()=>["name"].concat(e.showProps)),m=F(()=>h.value.length<=2?["activate properties to sort"]:[]),C=F(()=>e.sel.join("-")),v=F({get:()=>e.sort,set:_=>e.setSort(_)}),c=F({get:()=>e.page,set:e.setPage}),p=F(()=>["result-mols","my-mols","json"].includes(e.context||"")?!e.hasChanges:!1);St("#actions"),X(t,_=>{x(_)});async function x(_){if(!(!e.mols||!_)&&_!="default"){if(_=="select all")e.setSel(e.allIndices);else if(_=="deselect all")e.setSel([]);else if(_=="select matching")e.setSel(e.matchingIndices);else if(_=="invert selection"){const M=[...Array(e.total).keys()].filter(b=>!e.sel.includes(b));e.setSel(M)}await Z(),t.value="default"}}async function I(_){_=="remove selected"?e.removeMols(e.sel):_=="keep selected"?e.keepMols(e.sel):_=="copy to clipboard"?console.log("copy to clipboard"):_=="save as"&&l("molset",!0),await Z(),u.value="default"}return(_,a)=>{const M=P("cv-dropdown-item"),b=P("cv-dropdown");return n(),r("div",yt,[w(it),w(Ne,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=f=>c.value=f),total:s(e).pageTotal,max:3,disabled:s(e).pageTotal==1},null,8,["modelValue","total","disabled"]),wt,kt,w(dt,{id:"dd-sort",modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=f=>v.value=f),items:h.value,disabledItems:m.value},null,8,["modelValue","items","disabledItems"]),(n(),O(b,{id:"dd-select",modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=f=>t.value=f),key:C.value},{default:L(()=>[w(M,{value:"default",hidden:""},{default:L(()=>[s(e).hasSel?(n(),r($,{key:0},[g(" ("+y(s(e).sel.length)+") selected ",1)],64)):(n(),r($,{key:1},[g("Select")],64))]),_:1}),(n(),r($,null,R(S,(f,o)=>w(M,{key:o,value:f,disabled:f=="select matching"&&!s(e).searchStr},{default:L(()=>[g(y(f),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"])),Mt,w(b,{id:"dd-actions",modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=f=>u.value=f),onChange:I},{default:L(()=>[w(M,{value:"default",hidden:""},{default:L(()=>[g("Actions")]),_:1}),(n(),r($,null,R(d,(f,o)=>w(M,{key:o,value:f,disabled:!s(e).hasSel&&f.includes("selected")},{default:L(()=>[g(y(f),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"]),w(gt,{disabled:p.value},null,8,["disabled"])])}}}),xt=q(bt,[["__scopeId","data-v-17570cae"]]),Ct=i=>(J("data-v-e7111217"),i=i(),Q(),i),It={id:"resp-container"},$t=["onClick"],Vt=Ct(()=>k("div",{class:"filler"},null,-1)),Bt={key:0,class:"idfr name",title:"name"},Dt={key:1,class:"idfr",title:"InChI"},Ft={key:2,class:"idfr",title:"InChIKey"},Lt={key:3,class:"idfr",title:"isomeric SMILES"},Tt={key:4,class:"idfr",title:"canonical SMILES"},Nt={key:5,class:"idfr",title:"SMILES"},Et={key:6,class:"idfr formula",title:"formula"},Rt=["href"],At={key:1,class:"props-wrap"},Pt=["title"],Ut=["onClick"],Gt=A({__name:"TheMolGrid",props:{retainCache:{type:Boolean}},setup(i){const e=te(),l=me(),t=j(),S=_e(),u=le(),d=V(null),h=F(()=>{var M;const a=(M=d.value)==null?void 0:M.querySelector(".mol");return!d.value||!a?null:Math.round(d.value.clientWidth/a.clientWidth)});ee(async()=>{document.addEventListener("keydown",I),l.setOnClickAnywhere(p),e.query.sort&&!["index","-index"].includes(e.query.sort)&&t.enableProp(e.query.sort.toString())}),$e(()=>{document.removeEventListener("keydown",I),l.unsetOnClickAnywhere()});let m=V(null),C=V(null);function v(a,M){const b=a.target.classList.contains("idfr")||a.target.classList.contains("key")||a.target.classList.contains("value")||a.target.classList.contains("icn-btn");if(!t.hasSel&&b)return;t.toggleSel(M),t.setFocus(M);const f=t.getDisplayIndex(M);if(f===null)return;const o=f;if(a.shiftKey&&C.value!=null){if(t.hasSel&&m.value!==null){let B=Math.min(m.value,o),U=Math.max(m.value,o);const G=[];for(let z=B;z<U;z++)G.push(t.matchingIndices[z]);C.value?t.addSel(G):t.removeSel(G)}}else C.value=t.sel.includes(M);m.value=o}function c(){return!t.hasSel}function p(a){a.target.closest(".mol")||t.unsetFocus()}function x(a){const M=t.mols?t.mols[a]:null;M&&u.display("ModalMolPreview",M)}function I(a){var M,b;((M=document.activeElement)==null?void 0:M.tagName)!="INPUT"&&((b=document.activeElement)==null?void 0:b.tagName)!="TEXTAREA"&&a.key in _&&(_[a.key](),a.preventDefault())}const _={ArrowLeft:()=>{let a=t.focus;a!==null&&(a=a-1<0?a:a-1,t.setFocus(a))},ArrowRight:()=>{let a=t.focus;a===null||!t.mols||(a=a+1>t.mols.length-1?a:a+1,t.setFocus(a))},ArrowUp:()=>{let a=t.focus;a===null||!h.value||(a=a-h.value<0?a:a-h.value,t.setFocus(a))},ArrowDown:()=>{let a=t.focus;a===null||!h.value||!t.mols||(a=a+h.value>t.mols.length-1?a:a+h.value,t.setFocus(a))},Enter:()=>{let a=t.focus;a!==null&&t.toggleSel(a)},Escape:()=>{t.focus?t.unsetFocus():t.deselectAll(!0)}};return(a,M)=>{const b=P("cv-checkbox"),f=Ve("click-to-copy");return n(),r($,null,[w(Qe),w(xt),k("div",It,[k("div",{id:"mol-grid",ref_key:"$molGrid",ref:d,class:T({"sel-mode":s(t).hasSel})},[(n(!0),r($,null,R(s(t).mols,(o,B)=>{var U,G,z,ne,ie,re,ce,de,ue;return n(),r("div",{key:B,class:T(["mol",{focus:o.index==s(t).focus,sel:(U=s(t).sel)==null?void 0:U.includes(o.index)}]),onClick:D=>v(D,o.index)},[w(b,{label:`${o.index}`,value:`${o.index}`,checked:s(t).sel.includes(o.index)},null,8,["label","value","checked"]),w(lt,{id:`mol-svg-${o.index}`,structure:s(t).molSmiles[B],"sub-structure":s(t).highlight,width:190,height:140,"svg-mode":""},null,8,["id","structure","sub-structure"]),w(Ee,{mol:o},null,8,["mol"]),w(he,{icon:"icn-smell",btnStyle:"soft",onClick:D=>c()?x(B):null},null,8,["onClick"]),w(he,{icon:"icn-taste",btnStyle:"soft",onClick:D=>c()?s(S).setMolFromMolsetIndex(o.index):null},null,8,["onClick"]),Vt,(n(),r($,{key:0},[s(t).showIdentifiers.includes("name")&&((G=o==null?void 0:o.identifiers)!=null&&G.name)?N((n(),r("div",Bt,[g(y(o.identifiers.name),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("inchi")&&((z=o==null?void 0:o.identifiers)!=null&&z.inchi)?N((n(),r("div",Dt,[g(y(o.identifiers.inchi),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("inchikey")&&((ne=o==null?void 0:o.identifiers)!=null&&ne.inchikey)?N((n(),r("div",Ft,[g(y(o.identifiers.inchikey),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("isomeric_smiles")&&((ie=o==null?void 0:o.identifiers)!=null&&ie.isomeric_smiles)?N((n(),r("div",Lt,[g(y(o.identifiers.isomeric_smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("canonical_smiles")&&((re=o==null?void 0:o.identifiers)!=null&&re.canonical_smiles)?N((n(),r("div",Tt,[g(y(o.identifiers.canonical_smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("smiles")&&((ce=o==null?void 0:o.identifiers)!=null&&ce.smiles)?N((n(),r("div",Nt,[g(y(o.identifiers.smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("molecular_formula")&&((de=o==null?void 0:o.identifiers)!=null&&de.molecular_formula)?N((n(),r("div",Et,[g(y(o.identifiers.molecular_formula),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("cid")&&((ue=o==null?void 0:o.identifiers)!=null&&ue.cid)?N((n(),r("a",{key:7,href:`https://pubchem.ncbi.nlm.nih.gov/compound/${o.identifiers.cid}`,target:"_blank",class:"idfr",title:"PubChem CID"},[g(y(o.identifiers.cid),1)],8,Rt)),[[f,c]]):E("",!0)],64)),s(t).showProps.length?(n(),r("div",At,[(n(!0),r($,null,R(s(t).showProps,(D,we)=>(n(),r("div",{key:we,class:"prop",title:`${D}:
${o.properties[D]||o.properties[D]===0?o.properties[D]:"-"}`},[k("div",{class:"key",onClick:Kt=>s(t).setSort(D)},y(s(Y)(D)),9,Ut),N((n(),r("div",{class:T(["value",{empty:!o.properties[D]&&o.properties[D]!==0}])},[g(y(o.properties[D]||o.properties[D]===0?o.properties[D]:"-"),1)],2)),[[f,c]])],8,Pt))),128))])):E("",!0)],10,$t)}),128))],2)])],64)}}}),zt=q(Gt,[["__scopeId","data-v-e7111217"]]),Xt=A({__name:"MolsetViewer",props:{retainCache:{type:Boolean}},setup(i){const e=pe(),l=te(),t=me(),S=se(),u=j(),d=_e(),h=le(),m=i;C(),window.onbeforeunload=function(){if(u.hasChanges)return!0;m.retainCache||u.clear()},Be(c),De(c),X(()=>l.query,()=>{C(),u.parseUrlQuery()});function C(){const p=e.currentRoute.value.query;if(p!=null&&p.show){const x=Number(p.show);x!=d.molFromMolsetIndex&&d.setMolFromMolsetIndex(x,!0),v(u.cacheId,x)}else d.setMolFromMolsetIndex(null,!0)}function v(p=null,x){p&&Fe(Le.getMolDataFromMolset(p,x),{onSuccess:I=>{d.setMolData(I,"smol");const _=d.inchi||d.smiles;_&&d.fetchSmolVizData(_)},onError:I=>{console.log("Error in getMolDataFromMolset()",I)}})}async function c(p,x,I){u.hasChanges?(t.setBlockRouting(!0),await h.alert("If you leave, all molset changes will be lost.",{title:"Unsaved molset changes",primaryBtn:"Stay",secondaryBtn:"Discard",onCancel:()=>{p.path!=x.path&&!m.retainCache&&u.clear(),u.setHasChanges(!1),t.setBlockRouting(!1),I()},onSubmit:()=>{I(!1)}})):(p.path!=x.path&&!m.retainCache&&u.clear(),I())}return(p,x)=>!s(t).blockRouting&&s(d).molFromMolset?(n(),O(Re,{key:0,context:"molset"})):(n(),r($,{key:1},[s(S).active?(n(),O(Te,{key:0,pathArray:s(S).breadCrumbPathArray},{default:L(()=>[s(u).resultCount<s(u).total?(n(),r($,{key:0},[g(" Showing "+y(s(K)(s(u).resultCount))+" / "+y(s(K)(s(u).total)),1)],64)):(n(),r($,{key:1},[g("Total: "+y(s(K)(s(u).total)),1)],64))]),_:1},8,["pathArray"])):(n(),O(Ae,{key:1,collapsed:!0},{default:L(()=>[s(u).resultCount<s(u).total?(n(),r($,{key:0},[g(" Showing "+y(s(K)(s(u).resultCount))+" / "+y(s(K)(s(u).total)),1)],64)):(n(),r($,{key:1},[g("Total: "+y(s(K)(s(u).total)),1)],64))]),_:1})),w(zt,{retainCache:p.retainCache},null,8,["retainCache"])],64))}});export{Xt as _};
