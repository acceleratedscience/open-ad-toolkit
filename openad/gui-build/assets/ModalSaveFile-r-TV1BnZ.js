import{d as I,M as J,L as z,r as i,e as _,G,h as S,i as d,l as T,q as s,v as n,x as v,t as m,k as g,p as y,j as w,F as O,N as h,n as j}from"./index-lOmmCXOX.js";import H from"./FileBrowser-BCXdrgK5.js";const R={class:"flex-wrap-v"},W={class:"input-pad"},$={class:"file-ext"},X=I({__name:"ModalSaveFile",emits:["mounted"],setup(A,{emit:N}){const a=J(),B=z(),D=N,k=i(!1),L=[{val:"molset.json",disp:"JSON"},{val:"sdf",disp:"SDF"},{val:"csv",disp:"CSV"},{val:"smi",disp:"SMILES"}],q=[{val:"mol.json",disp:"JSON"},{val:"sdf",disp:"SDF"},{val:"csv",disp:"CSV"},{val:"mol",disp:"MOL"},{val:"smi",disp:"SMILES"}],p=i("mol.json"),r=i("molset.json"),x=i(null),M=i(null),l=_(()=>a.data??{}),u=_({get:()=>l.value.filename??"",set:o=>{M.value=null,a.setData({filename:o})}}),c=_({get:()=>l.value.path??"",set:o=>a.setData({path:o})}),V=_(()=>l.value.dataType=="mol"?p.value:l.value.dataType=="molset"?r.value:l.value.ext?(l.value.ext2?l.value.ext2+".":"")+l.value.ext||"":(console.error("ModalSaveFile.vue: either ext or dataType must be set in the dialog options."),""));G(()=>{D("mounted"),l.value.dataType=="mol"?p.value="mol.json":l.value.dataType=="molset"&&(r.value="molset.json"),setTimeout(()=>{var o;x.value=document.querySelector("#modal-save-file input.bx--text-input"),(o=x.value)==null||o.select()},350)});async function E(){var f;if(!u.value){M.value="Filename required.",(f=x.value)==null||f.focus();return}const t=(c.value?c.value+"/":"")+u.value+"."+V.value;a.onSubmit&&a.onSubmit({destinationPath:t,ext:V.value}),k.value=!0}async function U(){!k.value&&a.onCancel&&a.onCancel()}return(o,t)=>{const f=S("cv-text-input"),C=S("cv-dropdown-item"),F=S("cv-dropdown"),P=S("cv-modal");return d(),T(P,{id:"modal-save-file",visible:g(a).visible,size:"lg",onPrimaryClick:E,onModalHidden:U},{title:s(()=>[n("Save to "),v("b",null,m(g(B).workspace),1),n(" Workspace")]),content:s(()=>[v("div",R,[v("div",W,[y(f,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),class:"ip-filename","hide-label":!0,"invalid-message":M.value},null,8,["modelValue","invalid-message"]),v("div",$,[v("span",null,m(u.value),1),n("."+m(V.value),1)]),l.value.dataType=="mol"?(d(),T(F,{key:0,modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),class:"dd-output-options"},{default:s(()=>[(d(),w(O,null,h(q,(e,b)=>y(C,{key:b,value:e.val},{default:s(()=>[n(m(e.disp),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])):j("",!0),l.value.dataType=="molset"?(d(),T(F,{key:1,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),class:"dd-output-options"},{default:s(()=>[(d(),w(O,null,h(L,(e,b)=>y(C,{key:b,value:e.val},{default:s(()=>[n(m(e.disp),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])):j("",!0)]),y(H,{isModal:!0,modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e)},null,8,["modelValue"])])]),"secondary-button":s(()=>[n("Cancel")]),"primary-button":s(()=>[n("Save")]),_:1},8,["visible"])}}});export{X as default};
