import{d as g,z,b as O,u as R,c as n,a0 as w,r as j,I as J,g as p,h as u,k as L,p as o,q as t,t as i,j as r,X as q,i as v,v as _,m as T,n as b,F as V,B as E}from"./index-Bu5CNeR8.js";const I={key:0,class:"error-msg"},X=g({__name:"ModalViewer",emits:["mounted"],setup(P,{emit:F}){const y=z(),e=O(),h=F,d=R(),x=n(()=>e.fileType?w[e.fileType]:null),S=n(()=>e.defaultFileType?w[e.defaultFileType]:null),f=[["TextViewer","text viewer","text"],["JsonViewer","JSON viewer","json"],["DataViewer","data viewer","data"],["MolViewer","molecule viewer","mol"],["MolsetViewer","molecule set viewer","molset"]],l=j(e.moduleName),k=n(()=>e.fileTypeOverride&&l.value==e.moduleName?"Reset":"Switch"),N=n(()=>l.value==e.moduleName);J(()=>h("mounted"));async function B(){if(l.value==e.defaultModuleName)d.push({path:d.currentRoute.value.path});else{const c=f.filter(([m])=>m==l.value),a=c?c[0][2]:null;a&&d.push("?use="+a)}y.hide()}return(c,a)=>{const m=p("cv-dropdown-item"),D=p("cv-dropdown"),C=p("cv-modal");return u(),L(C,{visible:r(y).visible,size:"xs",onPrimaryClick:B,primaryButtonDisabled:N.value},{title:o(()=>[t(i(r(q)(r(e).fileType??""))+" viewer",1)]),content:o(()=>[r(e).fileTypeOverride?(u(),v("p",I,[t(" This is a "),_("b",null,i(S.value),1),t(" file, but you are currently viewing it in the "),_("b",null,i(x.value),1),t(" viewer. ")])):T("",!0),b(D,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s),label:"Select viewer"},{default:o(()=>[(u(),v(V,null,E(f,([s,M])=>b(m,{key:s,value:s},{default:o(()=>[t(i(M)+" ",1),s==r(e).moduleName?(u(),v(V,{key:0},[t("(default)")],64)):T("",!0)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),"secondary-button":o(()=>[t("Cancel")]),"primary-button":o(()=>[t(i(k.value),1)]),_:1},8,["visible","primaryButtonDisabled"])}}});export{X as default};
