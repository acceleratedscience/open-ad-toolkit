import{d as S,R as W,L as x,r as i,H as y,f as a,g as u,h as b,k as h,p as n,q as c,n as C,j as V}from"./index-C4atIFxU.js";const g=S({__name:"ModalWorkspaces",emits:["mounted"],setup(M,{emit:d}){const m=W(),r=x(),p=d,l=i([" "]),s=i(" ");y(()=>{p("mounted"),v()});async function f(){if(!a)return;const{status:o,statusText:e}=await a.setWorkspace(s.value);o!==200?console.error(e):(m.setWorkspace(s.value),r.hide())}async function v(){const o=await k();if(o){const{all:e,active:t}=o;e&&(l.value=e),t&&(s.value=t)}else console.error("Failed to load workspaces")}async function k(){if(!a)return;const{status:o,data:e,statusText:t}=await a.getWorkspaces();if(o!==200)console.error(t);else return e}return(o,e)=>{const t=u("cv-dropdown"),_=u("cv-modal");return b(),h(_,{visible:V(r).visible,size:"xs",onPrimaryClick:f},{title:n(()=>[c("Switch workspace")]),content:n(()=>[C(t,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=w=>s.value=w),items:l.value},null,8,["modelValue","items"])]),"secondary-button":n(()=>[c("Cancel")]),"primary-button":n(()=>[c("Switch")]),_:1},8,["visible"])}}});export{g as default};
