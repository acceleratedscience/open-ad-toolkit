import{d as P,r as V,h as n,i as r,v as w,Y as N,a9 as ve,n as y,I as fe,F as $,A as R,S as T,j as s,t as S,aa as Y,C as J,D as Q,E as q,ab as ke,c as F,H as ee,ac as be,w as X,a3 as H,q as g,P as Z,g as A,ad as Me,ae as xe,p as L,k as O,a as te,b as se,a1 as Ce,m as E,af as Ie,u as pe,L as le,R as me,o as $e,W as Ve,Q as he,a5 as Be,a6 as De,e as Fe,z as Le,ag as K}from"./index-EqhxGKMg.js";import{u as j}from"./BaseFetching-CNiZnOhW.js";import{u as _e}from"./MolViewerStore-DZ8s2iYg.js";import{B as Te}from"./BreadCrumbs-B2ceGopE.js";import{u as ge,B as Ne,a as Ee,M as Re,b as Pe}from"./MolViewer-CTQbJeQy.js";import{i as Ae}from"./initRDKit-WaX80hiK.js";import{C as Ue,c as Se}from"./16-BGl0-7IO.js";const ae=i=>(J("data-v-cfb05a99"),i=i(),Q(),i),Ge=ae(()=>w("div",null,"Identifiers & properties",-1)),ze={class:"content"},Ke=ae(()=>w("h4",null,"Identifiers",-1)),Oe={class:"item-wrap"},qe=["onClick"],je=ae(()=>w("h4",null,"Properties",-1)),He={class:"item-wrap"},We=["onClick"],Je=P({__name:"TheMolProps",setup(i){const e=j(),o=V(!1);function t(){o.value=!o.value}return(k,v)=>(n(),r("div",{id:"properties",class:T({expand:o.value})},[w("div",{class:"header",onClick:t},[Ge,N(y(fe,{icon:"icn-chevron-up"},null,512),[[ve,o.value]]),N(y(fe,{icon:"icn-chevron-down"},null,512),[[ve,!o.value]])]),w("div",ze,[Ke,w("div",Oe,[(n(!0),r($,null,R(s(e).availIdentifiers,(d,h)=>(n(),r("div",{key:h,class:T(["item",{sel:s(e).showIdentifiers.includes(d)}]),onClick:m=>s(e).toggleIdentifier(d)},S(s(Y)(d)),11,qe))),128))]),je,w("div",He,[(n(!0),r($,null,R(s(e).availProps,(d,h)=>(n(),r("div",{key:h,class:T(["item",{sel:s(e).showProps.includes(d)}]),onClick:m=>s(e).toggleProp(d)},S(s(Y)(d)),11,We))),128))])])],2))}}),Qe=q(Je,[["__scopeId","data-v-cfb05a99"]]);function Xe(i){const e=window.RDKit.get_mol(i||"invalid"),o=W(e);return e==null||e.delete(),o}function W(i){return!!i}const Ye=w("br",null,null,-1),Ze=["title"],et=w("br",null,null,-1),tt=["innerHTML"],st=["title","id","width","height"],lt=P({__name:"MolRender2D",props:{id:{type:String,required:!0},className:{type:String,default:""},svgMode:{type:Boolean,default:!1},width:{type:Number,default:250},height:{type:Number,default:200},structure:{type:String,required:!0},subStructure:{type:String,default:""},extraDetails:{type:Object,default:()=>{}},drawingDelay:{type:Number,default:void 0}},setup(i){const e=i;let o=V(!1),t=V(!1);V(!1);let k=ke({width:e.width,height:e.height,bondLineWidth:2,addStereoAnnotation:!0,...e.extraDetails}),v=V("");const d=F(()=>{const u={};return e.width&&(u.width=e.width+"px"),e.height&&(u.height=e.height+"px"),u});ee(()=>{Ae().then(()=>{o.value=!0;try{C()}catch(u){console.error(u)}}).catch(u=>{console.error(u),t.value=!0})}),be(()=>{!t.value&&o.value&&e.svgMode}),X(e,()=>C());function h(u,c){if(W(u)&&W(c)){const p=JSON.parse((u==null?void 0:u.get_substruct_matches(c))||""),x=p&&typeof p[0]=="object"?p.reduce((I,{atoms:_,bonds:a})=>({atoms:[...I.atoms,..._],bonds:[...I.bonds,...a]}),{atoms:[],bonds:[]}):p;return JSON.stringify({...k,...e.extraDetails||{},...x})}else return JSON.stringify({...k,...e.extraDetails||{}})}async function m(){const u=window.RDKit.get_mol(e.structure||"invalid"),c=window.RDKit.get_qmol(e.subStructure||"invalid"),p=W(u);if(e.svgMode&&p){const x=u.get_svg_with_highlights(h(u,c));v.value=x}else if(p){await Z();const x=document.getElementById(e.id);u.draw_to_canvas_with_highlights(x,h(u,c))}u==null||u.delete(),c==null||c.delete()}function C(){e.drawingDelay?setTimeout(()=>m(),e.drawingDelay):m()}return(u,c)=>s(o)?s(t)?(n(),r("div",{key:1,class:"placeholder error-msg",style:H(d.value)},[g("RDKit"),Ye,g("Error")],4)):s(Xe)(i.structure)?i.svgMode?(n(),r("div",{key:3,class:T(`svg-wrap ${i.className}`),style:H(d.value),innerHTML:s(v)},null,14,tt)):(n(),r("div",{key:4,class:T(`molecule-canvas-container ${i.className}`)},[w("canvas",{title:i.structure,id:i.id,width:i.width,height:i.height},null,8,st)],2)):(n(),r("div",{key:2,title:`Cannot render structure: ${i.structure}`,class:"placeholder error-msg",style:H(d.value)},[g(" Invalid"),et,g("mol string ")],12,Ze)):(n(),r("div",{key:0,class:"placeholder",style:H(d.value)},"Loading renderer",4))}}),at={id:"search-wrap"},ot={class:"toggle"},nt=P({__name:"MolSearch",setup(i){const e=j(),o=F({get:()=>e.searchStr,set:e.setSearchStr});return(t,k)=>{const v=A("cv-search");return n(),r("div",at,[y(v,{modelValue:o.value,"onUpdate:modelValue":k[0]||(k[0]=d=>o.value=d),label:"TextSmarts",size:"lg",type:"text",placeholder:"Search "+s(e).searchMode,"hide-label":!0},null,8,["modelValue","placeholder"]),w("div",ot,[w("div",{class:T(["close",{show:s(e).searchStr.length>0}]),onClick:k[1]||(k[1]=d=>s(e).setSearchStr(""))},[y(s(Ue))],2),w("div",{class:T(["option op-text",{sel:s(e).searchMode=="text"}]),onClick:k[2]||(k[2]=d=>s(e).setSearchMode("text"))},null,2),w("div",{class:T(["option op-smarts",{sel:s(e).searchMode=="smarts"}]),onClick:k[3]||(k[3]=d=>s(e).setSearchMode("smarts"))},null,2)])])}}}),it=q(nt,[["__scopeId","data-v-6fca3c82"]]),rt={class:"sort-wrap"},ct=P({__name:"SortDropdown",props:Me({items:{},disabledItems:{},default:{default:"index"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const e=i,o=xe(i,"modelValue"),t=F(()=>!!o.value&&o.value[0]==="-"),k=F({get:()=>{var h;return((h=o.value)==null?void 0:h.replace(/^-/,""))||""},set:h=>{var m;h!=((m=o.value)==null?void 0:m.replace(/^-/,""))&&(console.log("set"),o.value=h)}}),v=F(()=>!o.value||["index","-index"].includes(o.value));function d(){o.value==`-${e.default}`?o.value="":o.value?o.value=o.value[0]==="-"?o.value.slice(1):`-${o.value}`:o.value=`-${e.default}`}return(h,m)=>{const C=A("cv-dropdown-item"),u=A("cv-dropdown");return n(),r("div",rt,[w("div",{class:"sort-direction",onClick:d},S(t.value?"↑":"↓"),1),y(u,{modelValue:k.value,"onUpdate:modelValue":m[0]||(m[0]=c=>k.value=c),class:T(["dd-sort",{blank:v.value}])},{default:L(()=>[y(C,{value:""},{default:L(()=>[g(" ")]),_:1}),(n(!0),r($,null,R(h.items,(c,p)=>(n(),O(C,{key:p,value:c},{default:L(()=>[g(S(c),1)]),_:2},1032,["value"]))),128)),y(C,{value:e.default,hidden:""},{default:L(()=>[g(" ")]),_:1},8,["value"]),(n(!0),r($,null,R(h.disabledItems,(c,p)=>(n(),O(C,{key:p,value:c,disabled:"",title:c},{default:L(()=>[g(S(c),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["modelValue","class"])])}}}),dt=q(ct,[["__scopeId","data-v-6ea047d0"]]),ut=Se("CheckmarkFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}},{elem:"path",attrs:{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}}]),vt=Se("ErrorFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z"}},{elem:"path",attrs:{fill:"none",d:"M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z","data-icon-path":"inner-path",opacity:"0"}}]),ye=i=>(J("data-v-3b6a36d9"),i=i(),Q(),i),ft={class:"btn-wrap"},ht=ye(()=>w("option",{value:"",hidden:""},null,-1)),pt=ye(()=>w("option",{value:"as-molset"},"Save as molset JSON",-1)),mt={value:"update-original"},_t=P({__name:"TheButtonSaveMolset",props:{disabled:{type:Boolean,default:!1}},setup(i){const e=te(),o=j(),t=se(),k=ge(),v=["result-mols","my-mols"].includes(o.context||"")?"Update":"Save",d=V(!1),h=V(!1),m=V(!1),C=V(null),u=V(null),c=V(""),p=i,x=F(()=>{var M;return(M=o.context)==null?void 0:M.match(/-file$/)}),I=F(()=>u.value?{width:u.value+"px"}:{});X(c,M=>{M&&_(M),setTimeout(()=>c.value="",1)});async function _(M){var f,l;d.value=!0,u.value=((l=(f=C.value)==null?void 0:f.$el)==null?void 0:l.offsetWidth)??null;try{let B=!1;x.value?M=="as-molset"?B=await k("molset",!1):M=="update-original"&&(B=await b()):B=await a(),d.value=!1,B&&(o.setHasChanges(!1),m.value=!0,setTimeout(()=>{m.value=!1},2e3))}catch(B){console.error(B),d.value=!1,h.value=!0,setTimeout(()=>{h.value=!1},2e3)}}function a(){if(o.context=="json")return o.updateMolset();if(o.context=="my-mols")return o.updateMolset_mymols();if(o.context=="result-mols")return o.updateMolset_result();if(o.context=="dataframe"){const M=e.params.dfName;return o.updateMolset_dataframe(M)}return Promise.resolve(!1)}async function b(){return o.context=="sdf-file"?o.saveMolsetAsSDF(t.path,{newFile:!1}):o.context=="csv-file"?o.saveMolsetAsCSV(t.path,{newFile:!1}):o.context=="smi-file"?o.saveMolsetAsSmiles(t.path,{newFile:!1}):Promise.resolve(!1)}return(M,f)=>{var B;const l=A("cv-button");return n(),r("div",ft,[y(l,{ref_key:"$btn",ref:C,size:"field",disabled:p.disabled&&!m.value,class:T({loading:d.value,error:h.value,success:m.value}),style:H(I.value),icon:h.value?s(vt):m.value?s(ut):null,onClick:_},{default:L(()=>[g(S(s(v)),1)]),_:1},8,["disabled","class","style","icon"]),x.value?N((n(),r("select",{key:0,"onUpdate:modelValue":f[0]||(f[0]=U=>c.value=U)},[ht,pt,w("option",mt,"Update original "+S((B=s(o).context)==null?void 0:B.split("-")[0].toUpperCase()),1)],512)),[[Ce,c.value]]):E("",!0)])}}}),gt=q(_t,[["__scopeId","data-v-3b6a36d9"]]);function St(i){let e;ee(()=>{const o=document.querySelector(i);o&&(e=new IntersectionObserver(([t])=>t.target.classList.toggle("sticky",t.intersectionRatio<1),{rootMargin:"-1px 0px 0px 0px",threshold:[1]}),e.observe(o))}),Ie(()=>{const o=document.querySelector(i);o&&e.unobserve(o)})}const oe=i=>(J("data-v-17570cae"),i=i(),Q(),i),yt={id:"actions"},wt=oe(()=>w("div",{class:"breaker-1"},null,-1)),kt=oe(()=>w("div",{class:"filler"},null,-1)),bt=oe(()=>w("div",{class:"breaker-2"},null,-1)),Mt=P({__name:"TheMolGridActions",setup(i){pe();const e=j();se(),le();const o=ge(),t=V("default"),k=["select all","deselect all","select matching","invert selection"],v=V("default"),d=["remove selected","keep selected","copy selected","save as"],h=F(()=>["name"].concat(e.showProps)),m=F(()=>h.value.length<=2?["activate properties to sort"]:[]),C=F(()=>e.sel.join("-")),u=F({get:()=>e.sort,set:_=>e.setSort(_)}),c=F({get:()=>e.page,set:e.setPage}),p=F(()=>["result-mols","my-mols","json"].includes(e.context||"")?!e.hasChanges:!1);St("#actions"),X(t,_=>{x(_)});async function x(_){if(!(!e.mols||!_)&&_!="default"){if(_=="select all")e.setSel(e.allIndices);else if(_=="deselect all")e.setSel([]);else if(_=="select matching")e.setSel(e.matchingIndices);else if(_=="invert selection"){const b=[...Array(e.total).keys()].filter(M=>!e.sel.includes(M));e.setSel(b)}await Z(),t.value="default"}}async function I(_){_=="remove selected"?e.removeMols(e.sel):_=="keep selected"?e.keepMols(e.sel):_=="copy to clipboard"?console.log("copy to clipboard"):_=="save as"&&o("molset",!0),await Z(),v.value="default"}return(_,a)=>{const b=A("cv-dropdown-item"),M=A("cv-dropdown");return n(),r("div",yt,[y(it),y(Ne,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=f=>c.value=f),total:s(e).pageTotal,max:3,disabled:s(e).pageTotal==1},null,8,["modelValue","total","disabled"]),wt,kt,y(dt,{id:"dd-sort",modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=f=>u.value=f),items:h.value,disabledItems:m.value},null,8,["modelValue","items","disabledItems"]),(n(),O(M,{id:"dd-select",modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=f=>t.value=f),key:C.value},{default:L(()=>[y(b,{value:"default",hidden:""},{default:L(()=>[s(e).hasSel?(n(),r($,{key:0},[g(" ("+S(s(e).sel.length)+") selected ",1)],64)):(n(),r($,{key:1},[g("Select")],64))]),_:1}),(n(),r($,null,R(k,(f,l)=>y(b,{key:l,value:f,disabled:f=="select matching"&&!s(e).searchStr},{default:L(()=>[g(S(f),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"])),bt,y(M,{id:"dd-actions",modelValue:v.value,"onUpdate:modelValue":a[3]||(a[3]=f=>v.value=f),onChange:I},{default:L(()=>[y(b,{value:"default",hidden:""},{default:L(()=>[g("Actions")]),_:1}),(n(),r($,null,R(d,(f,l)=>y(b,{key:l,value:f,disabled:!s(e).hasSel&&f.includes("selected")},{default:L(()=>[g(S(f),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"]),y(gt,{disabled:p.value},null,8,["disabled"])])}}}),xt=q(Mt,[["__scopeId","data-v-17570cae"]]),Ct=i=>(J("data-v-806bc9a9"),i=i(),Q(),i),It={id:"resp-container"},$t=["onClick"],Vt=Ct(()=>w("div",{class:"filler"},null,-1)),Bt={key:0,class:"idfr name",title:"name"},Dt={key:1,class:"idfr",title:"InChI"},Ft={key:2,class:"idfr",title:"InChIKey"},Lt={key:3,class:"idfr",title:"isomeric SMILES"},Tt={key:4,class:"idfr",title:"canonical SMILES"},Nt={key:5,class:"idfr",title:"SMILES"},Et={key:6,class:"idfr formula",title:"formula"},Rt=["href"],Pt={key:1,class:"props-wrap"},At=["title"],Ut=["onClick"],Gt=P({__name:"TheMolGrid",props:{retainCache:{type:Boolean}},setup(i){const e=te(),o=me(),t=j(),k=_e(),v=le(),d=V(null),h=F(()=>{var b;const a=(b=d.value)==null?void 0:b.querySelector(".mol");return!d.value||!a?null:Math.round(d.value.clientWidth/a.clientWidth)});ee(async()=>{document.addEventListener("keydown",I),o.setOnClickAnywhere(p),e.query.sort&&!["index","-index"].includes(e.query.sort)&&t.enableProp(e.query.sort.toString())}),$e(()=>{document.removeEventListener("keydown",I)});let m=V(null),C=V(null);function u(a,b){const M=a.target.classList.contains("idfr")||a.target.classList.contains("key")||a.target.classList.contains("value")||a.target.classList.contains("icn-btn");if(!t.hasSel&&M)return;t.toggleSel(b),t.setFocus(b);const f=t.getDisplayIndex(b);if(f===null)return;const l=f;if(a.shiftKey&&C.value!=null){if(t.hasSel&&m.value!==null){let B=Math.min(m.value,l),U=Math.max(m.value,l);const G=[];for(let z=B;z<U;z++)G.push(t.matchingIndices[z]);C.value?t.addSel(G):t.removeSel(G)}}else C.value=t.sel.includes(b);m.value=l}function c(){return!t.hasSel}function p(a){a.target.closest(".mol")||t.unsetFocus()}function x(a){const b=t.mols?t.mols[a]:null;b&&v.display("ModalMolPreview",b)}function I(a){var b,M;((b=document.activeElement)==null?void 0:b.tagName)!="INPUT"&&((M=document.activeElement)==null?void 0:M.tagName)!="TEXTAREA"&&a.key in _&&(_[a.key](),a.preventDefault())}const _={ArrowLeft:()=>{let a=t.focus;a!==null&&(a=a-1<0?a:a-1,t.setFocus(a))},ArrowRight:()=>{let a=t.focus;a===null||!t.mols||(a=a+1>t.mols.length-1?a:a+1,t.setFocus(a))},ArrowUp:()=>{let a=t.focus;a===null||!h.value||(a=a-h.value<0?a:a-h.value,t.setFocus(a))},ArrowDown:()=>{let a=t.focus;a===null||!h.value||!t.mols||(a=a+h.value>t.mols.length-1?a:a+h.value,t.setFocus(a))},Enter:()=>{let a=t.focus;a!==null&&t.toggleSel(a)},Escape:()=>{t.focus?t.unsetFocus():t.deselectAll(!0)}};return(a,b)=>{const M=A("cv-checkbox"),f=Ve("click-to-copy");return n(),r($,null,[y(Qe),y(xt),w("div",It,[w("div",{id:"mol-grid",ref_key:"$molGrid",ref:d,class:T({"sel-mode":s(t).hasSel})},[(n(!0),r($,null,R(s(t).mols,(l,B)=>{var U,G,z,ne,ie,re,ce,de,ue;return n(),r("div",{key:B,class:T(["mol",{focus:l.index==s(t).focus,sel:(U=s(t).sel)==null?void 0:U.includes(l.index)}]),onClick:D=>u(D,l.index)},[y(M,{label:`${l.index}`,value:`${l.index}`,checked:s(t).sel.includes(l.index)},null,8,["label","value","checked"]),y(lt,{id:`mol-svg-${l.index}`,structure:s(t).molSmiles[B],"sub-structure":s(t).highlight,width:190,height:140,"svg-mode":""},null,8,["id","structure","sub-structure"]),y(Ee,{mol:l},null,8,["mol"]),y(he,{icon:"icn-smell",btnStyle:"soft",onClick:D=>c()?x(B):null},null,8,["onClick"]),y(he,{icon:"icn-taste",btnStyle:"soft",onClick:D=>c()?s(k).setMolFromMolsetIndex(l.index):null},null,8,["onClick"]),Vt,(n(),r($,{key:0},[s(t).showIdentifiers.includes("name")&&((G=l==null?void 0:l.identifiers)!=null&&G.name)?N((n(),r("div",Bt,[g(S(l.identifiers.name),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("inchi")&&((z=l==null?void 0:l.identifiers)!=null&&z.inchi)?N((n(),r("div",Dt,[g(S(l.identifiers.inchi),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("inchikey")&&((ne=l==null?void 0:l.identifiers)!=null&&ne.inchikey)?N((n(),r("div",Ft,[g(S(l.identifiers.inchikey),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("isomeric_smiles")&&((ie=l==null?void 0:l.identifiers)!=null&&ie.isomeric_smiles)?N((n(),r("div",Lt,[g(S(l.identifiers.isomeric_smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("canonical_smiles")&&((re=l==null?void 0:l.identifiers)!=null&&re.canonical_smiles)?N((n(),r("div",Tt,[g(S(l.identifiers.canonical_smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("smiles")&&((ce=l==null?void 0:l.identifiers)!=null&&ce.smiles)?N((n(),r("div",Nt,[g(S(l.identifiers.smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("molecular_formula")&&((de=l==null?void 0:l.identifiers)!=null&&de.molecular_formula)?N((n(),r("div",Et,[g(S(l.identifiers.molecular_formula),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("cid")&&((ue=l==null?void 0:l.identifiers)!=null&&ue.cid)?N((n(),r("a",{key:7,href:`https://pubchem.ncbi.nlm.nih.gov/compound/${l.identifiers.cid}`,target:"_blank",class:"idfr",title:"PubChem CID"},[g(S(l.identifiers.cid),1)],8,Rt)),[[f,c]]):E("",!0)],64)),s(t).showProps.length?(n(),r("div",Pt,[(n(!0),r($,null,R(s(t).showProps,(D,we)=>(n(),r("div",{key:we,class:"prop",title:`${D}:
${l.properties[D]||l.properties[D]===0?l.properties[D]:"-"}`},[w("div",{class:"key",onClick:Kt=>s(t).setSort(D)},S(s(Y)(D)),9,Ut),N((n(),r("div",{class:T(["value",{empty:!l.properties[D]&&l.properties[D]!==0}])},[g(S(l.properties[D]||l.properties[D]===0?l.properties[D]:"-"),1)],2)),[[f,c]])],8,At))),128))])):E("",!0)],10,$t)}),128))],2)])],64)}}}),zt=q(Gt,[["__scopeId","data-v-806bc9a9"]]),Xt=P({__name:"MolsetViewer",props:{retainCache:{type:Boolean}},setup(i){const e=pe(),o=te(),t=me(),k=se(),v=j(),d=_e(),h=le(),m=i;C(),window.onbeforeunload=function(){if(v.hasChanges)return!0;m.retainCache||v.clear()},Be(c),De(c),X(()=>o.query,()=>{C(),v.parseUrlQuery()});function C(){const p=e.currentRoute.value.query;if(p!=null&&p.show){const x=Number(p.show);x!=d.molFromMolsetIndex&&d.setMolFromMolsetIndex(x,!0),u(v.cacheId,x)}else d.setMolFromMolsetIndex(null,!0)}function u(p=null,x){p&&Fe(Le.getMolDataFromMolset(p,x),{onSuccess:I=>{d.setMolData(I,"smol");const _=d.inchi||d.smiles;_&&d.fetchSmolVizData(_)},onError:I=>{console.log("Error in getMolDataFromMolset()",I)}})}async function c(p,x,I){v.hasChanges?(t.setBlockRouting(!0),await h.alert("If you leave, all molset changes will be lost.",{title:"Unsaved molset changes",primaryBtn:"Stay",secondaryBtn:"Discard",onCancel:()=>{p.path!=x.path&&!m.retainCache&&v.clear(),v.setHasChanges(!1),t.setBlockRouting(!1),I()},onSubmit:()=>{I(!1)}})):(p.path!=x.path&&!m.retainCache&&v.clear(),I())}return(p,x)=>!s(t).blockRouting&&s(d).molFromMolset?(n(),O(Re,{key:0,context:"molset"})):(n(),r($,{key:1},[s(k).active?(n(),O(Te,{key:0,pathArray:s(k).breadCrumbPathArray},{default:L(()=>[s(v).resultCount<s(v).total?(n(),r($,{key:0},[g(" Showing "+S(s(K)(s(v).resultCount))+" / "+S(s(K)(s(v).total)),1)],64)):(n(),r($,{key:1},[g("Total: "+S(s(K)(s(v).total)),1)],64))]),_:1},8,["pathArray"])):(n(),O(Pe,{key:1,collapsed:!0},{default:L(()=>[s(v).resultCount<s(v).total?(n(),r($,{key:0},[g(" Showing "+S(s(K)(s(v).resultCount))+" / "+S(s(K)(s(v).total)),1)],64)):(n(),r($,{key:1},[g("Total: "+S(s(K)(s(v).total)),1)],64))]),_:1})),y(zt,{retainCache:p.retainCache},null,8,["retainCache"])],64))}});export{Xt as _};
