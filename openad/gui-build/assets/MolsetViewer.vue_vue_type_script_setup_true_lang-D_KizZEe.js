import{d as A,r as V,i as n,j as r,x as w,V as N,a7 as fe,p as y,H as he,F as $,N as R,O as T,k as s,t as S,a8 as Y,C as W,D as Q,E as q,a9 as ke,e as F,G as te,aa as Me,w as X,a0 as H,v as g,Z as ee,h as P,ab as be,ac as xe,q as L,l as O,u as se,a as le,M as Z,b as oe,a3 as Ce,n as E,ad as Ie,L as me,c as _e,o as $e,T as Ve,K as pe,a5 as Be,a6 as De,f as Fe,A as Le,ae as z}from"./index-CjcgQWPI.js";import{u as j}from"./MolGridStore-CKjSglKl.js";import{B as Te}from"./BreadCrumbs-CpIcmVrw.js";import{u as ge,B as Ne,a as Ee,M as Re,b as Ae}from"./MolViewer-DImGZqUt.js";import{i as Pe}from"./initRDKit-WaX80hiK.js";import{C as Ue,c as Se}from"./16-on__Z0Db.js";const ae=i=>(W("data-v-cfb05a99"),i=i(),Q(),i),Ge=ae(()=>w("div",null,"Identifiers & properties",-1)),Ke={class:"content"},ze=ae(()=>w("h4",null,"Identifiers",-1)),Oe={class:"item-wrap"},qe=["onClick"],je=ae(()=>w("h4",null,"Properties",-1)),He={class:"item-wrap"},Je=["onClick"],We=A({__name:"TheMolProps",setup(i){const e=j(),a=V(!1);function t(){a.value=!a.value}return(k,v)=>(n(),r("div",{id:"properties",class:T({expand:a.value})},[w("div",{class:"header",onClick:t},[Ge,N(y(he,{icon:"icn-chevron-up"},null,512),[[fe,a.value]]),N(y(he,{icon:"icn-chevron-down"},null,512),[[fe,!a.value]])]),w("div",Ke,[ze,w("div",Oe,[(n(!0),r($,null,R(s(e).availIdentifiers,(d,h)=>(n(),r("div",{key:h,class:T(["item",{sel:s(e).showIdentifiers.includes(d)}]),onClick:m=>s(e).toggleIdentifier(d)},S(s(Y)(d)),11,qe))),128))]),je,w("div",He,[(n(!0),r($,null,R(s(e).availProps,(d,h)=>(n(),r("div",{key:h,class:T(["item",{sel:s(e).showProps.includes(d)}]),onClick:m=>s(e).toggleProp(d)},S(s(Y)(d)),11,Je))),128))])])],2))}}),Qe=q(We,[["__scopeId","data-v-cfb05a99"]]);function Xe(i){const e=window.RDKit.get_mol(i||"invalid"),a=J(e);return e==null||e.delete(),a}function J(i){return!!i}const Ze=w("br",null,null,-1),Ye=["title"],et=w("br",null,null,-1),tt=["innerHTML"],st=["title","id","width","height"],lt=A({__name:"MolRender2D",props:{id:{type:String,required:!0},className:{type:String,default:""},svgMode:{type:Boolean,default:!1},width:{type:Number,default:250},height:{type:Number,default:200},structure:{type:String,required:!0},subStructure:{type:String,default:""},extraDetails:{type:Object,default:()=>{}},drawingDelay:{type:Number,default:void 0}},setup(i){const e=i;let a=V(!1),t=V(!1);V(!1);let k=ke({width:e.width,height:e.height,bondLineWidth:2,addStereoAnnotation:!0,...e.extraDetails}),v=V("");const d=F(()=>{const u={};return e.width&&(u.width=e.width+"px"),e.height&&(u.height=e.height+"px"),u});te(()=>{Pe().then(()=>{a.value=!0;try{C()}catch(u){console.error(u)}}).catch(u=>{console.error(u),t.value=!0})}),Me(()=>{!t.value&&a.value&&e.svgMode}),X(e,()=>C());function h(u,c){if(J(u)&&J(c)){const p=JSON.parse((u==null?void 0:u.get_substruct_matches(c))||""),x=p&&typeof p[0]=="object"?p.reduce((I,{atoms:_,bonds:o})=>({atoms:[...I.atoms,..._],bonds:[...I.bonds,...o]}),{atoms:[],bonds:[]}):p;return JSON.stringify({...k,...e.extraDetails||{},...x})}else return JSON.stringify({...k,...e.extraDetails||{}})}async function m(){const u=window.RDKit.get_mol(e.structure||"invalid"),c=window.RDKit.get_qmol(e.subStructure||"invalid"),p=J(u);if(e.svgMode&&p){const x=u.get_svg_with_highlights(h(u,c));v.value=x}else if(p){await ee();const x=document.getElementById(e.id);u.draw_to_canvas_with_highlights(x,h(u,c))}u==null||u.delete(),c==null||c.delete()}function C(){e.drawingDelay?setTimeout(()=>m(),e.drawingDelay):m()}return(u,c)=>s(a)?s(t)?(n(),r("div",{key:1,class:"placeholder error-msg",style:H(d.value)},[g("RDKit"),Ze,g("Error")],4)):s(Xe)(i.structure)?i.svgMode?(n(),r("div",{key:3,class:T(`svg-wrap ${i.className}`),style:H(d.value),innerHTML:s(v)},null,14,tt)):(n(),r("div",{key:4,class:T(`molecule-canvas-container ${i.className}`)},[w("canvas",{title:i.structure,id:i.id,width:i.width,height:i.height},null,8,st)],2)):(n(),r("div",{key:2,title:`Cannot render structure: ${i.structure}`,class:"placeholder error-msg",style:H(d.value)},[g(" Invalid"),et,g("mol string ")],12,Ye)):(n(),r("div",{key:0,class:"placeholder",style:H(d.value)},"Loading renderer",4))}}),ot={id:"search-wrap"},at={class:"toggle"},nt=A({__name:"MolSearch",setup(i){const e=j(),a=F({get:()=>e.searchStr,set:e.setSearchStr});return(t,k)=>{const v=P("cv-search");return n(),r("div",ot,[y(v,{modelValue:a.value,"onUpdate:modelValue":k[0]||(k[0]=d=>a.value=d),label:"TextSmarts",size:"lg",type:"text",placeholder:"Search "+s(e).searchMode,"hide-label":!0},null,8,["modelValue","placeholder"]),w("div",at,[w("div",{class:T(["close",{show:s(e).searchStr.length>0}]),onClick:k[1]||(k[1]=d=>s(e).setSearchStr(""))},[y(s(Ue))],2),w("div",{class:T(["option op-text",{sel:s(e).searchMode=="text"}]),onClick:k[2]||(k[2]=d=>s(e).setSearchMode("text"))},null,2),w("div",{class:T(["option op-smarts",{sel:s(e).searchMode=="smarts"}]),onClick:k[3]||(k[3]=d=>s(e).setSearchMode("smarts"))},null,2)])])}}}),it=q(nt,[["__scopeId","data-v-6fca3c82"]]),rt={class:"sort-wrap"},ct=A({__name:"SortDropdown",props:be({items:{},disabledItems:{},default:{default:"index"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const e=i,a=xe(i,"modelValue"),t=F(()=>!!a.value&&a.value[0]==="-"),k=F({get:()=>{var h;return((h=a.value)==null?void 0:h.replace(/^-/,""))||""},set:h=>{var m;h!=((m=a.value)==null?void 0:m.replace(/^-/,""))&&(console.log("set"),a.value=h)}}),v=F(()=>!a.value||["index","-index"].includes(a.value));function d(){a.value==`-${e.default}`?a.value="":a.value?a.value=a.value[0]==="-"?a.value.slice(1):`-${a.value}`:a.value=`-${e.default}`}return(h,m)=>{const C=P("cv-dropdown-item"),u=P("cv-dropdown");return n(),r("div",rt,[w("div",{class:"sort-direction",onClick:d},S(t.value?"↑":"↓"),1),y(u,{modelValue:k.value,"onUpdate:modelValue":m[0]||(m[0]=c=>k.value=c),class:T(["dd-sort",{blank:v.value}])},{default:L(()=>[y(C,{value:""},{default:L(()=>[g(" ")]),_:1}),(n(!0),r($,null,R(h.items,(c,p)=>(n(),O(C,{key:p,value:c},{default:L(()=>[g(S(c),1)]),_:2},1032,["value"]))),128)),y(C,{value:e.default,hidden:""},{default:L(()=>[g(" ")]),_:1},8,["value"]),(n(!0),r($,null,R(h.disabledItems,(c,p)=>(n(),O(C,{key:p,value:c,disabled:"",title:c},{default:L(()=>[g(S(c),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["modelValue","class"])])}}}),dt=q(ct,[["__scopeId","data-v-6ea047d0"]]),ut=Se("CheckmarkFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}},{elem:"path",attrs:{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}}]),vt=Se("ErrorFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z"}},{elem:"path",attrs:{fill:"none",d:"M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z","data-icon-path":"inner-path",opacity:"0"}}]),ye=i=>(W("data-v-f718e482"),i=i(),Q(),i),ft={class:"btn-wrap"},ht=ye(()=>w("option",{value:"",hidden:""},null,-1)),pt=ye(()=>w("option",{value:"as-molset"},"Save as molset JSON",-1)),mt={value:"update-original"},_t=A({__name:"TheButtonSaveMolset",props:{disabled:{type:Boolean,default:!1}},setup(i){se();const e=le(),a=j();Z();const t=oe(),k=ge(),v=["result-mols","my-mols"].includes(a.context||"")?"Update":"Save",d=V(!1),h=V(!1),m=V(!1),C=V(null),u=V(null),c=V(""),p=i,x=F(()=>{var M;return(M=a.context)==null?void 0:M.match(/-file$/)}),I=F(()=>u.value?{width:u.value+"px"}:{});X(c,M=>{M&&_(M),setTimeout(()=>c.value="",1)});async function _(M){var f,l;d.value=!0,u.value=((l=(f=C.value)==null?void 0:f.$el)==null?void 0:l.offsetWidth)??null;try{let B=!1;x.value?M=="as-molset"?B=await k("molset-json"):M=="update-original"&&(B=await b()):B=await o(),d.value=!1,B&&(m.value=!0,setTimeout(()=>{m.value=!1},2e3))}catch(B){console.error(B),d.value=!1,h.value=!0,setTimeout(()=>{h.value=!1},2e3)}}function o(){if(a.context=="json")return a.updateMolset();if(a.context=="my-mols")return a.updateMolset_mymols();if(a.context=="result-mols")return a.updateMolset_result();if(a.context=="dataframe"){const M=e.params.dfName;return console.log(22,M),a.updateMolset_dataframe(M)}return Promise.resolve(!1)}async function b(){return a.context=="sdf-file"?a.saveMolsetAsSDF(t.path,{newFile:!1}):a.context=="csv-file"?a.saveMolsetAsCSV(t.path,{newFile:!1}):a.context=="smi-file"?a.saveMolsetAsSmiles(t.path,{newFile:!1}):Promise.resolve(!1)}return(M,f)=>{var B;const l=P("cv-button");return n(),r("div",ft,[y(l,{ref_key:"$btn",ref:C,size:"field",onClick:_,disabled:p.disabled&&!m.value,class:T({loading:d.value,error:h.value,success:m.value}),style:H(I.value),icon:h.value?s(vt):m.value?s(ut):null},{default:L(()=>[g(S(s(v)),1)]),_:1},8,["disabled","class","style","icon"]),x.value?N((n(),r("select",{key:0,"onUpdate:modelValue":f[0]||(f[0]=U=>c.value=U)},[ht,pt,w("option",mt,"Update original "+S((B=s(a).context)==null?void 0:B.split("-")[0].toUpperCase()),1)],512)),[[Ce,c.value]]):E("",!0)])}}}),gt=q(_t,[["__scopeId","data-v-f718e482"]]);function St(i){let e;te(()=>{const a=document.querySelector(i);a&&(e=new IntersectionObserver(([t])=>t.target.classList.toggle("sticky",t.intersectionRatio<1),{rootMargin:"-1px 0px 0px 0px",threshold:[1]}),e.observe(a))}),Ie(()=>{const a=document.querySelector(i);a&&e.unobserve(a)})}const ne=i=>(W("data-v-7ab0c37a"),i=i(),Q(),i),yt={id:"actions"},wt=ne(()=>w("div",{class:"breaker-1"},null,-1)),kt=ne(()=>w("div",{class:"filler"},null,-1)),Mt=ne(()=>w("div",{class:"breaker-2"},null,-1)),bt=A({__name:"TheMolGridActions",setup(i){se();const e=j();oe(),Z();const a=ge(),t=V("default"),k=["select all","deselect all","select matching","invert selection"],v=V("default"),d=["remove selected","keep selected","copy selected","save as"],h=F(()=>["name"].concat(e.showProps)),m=F(()=>h.value.length<=2?["activate properties to sort"]:[]),C=F(()=>e.sel.join("-")),u=F({get:()=>e.sort,set:_=>e.setSort(_)}),c=F({get:()=>e.page,set:e.setPage}),p=F(()=>["result-mols","my-mols","json"].includes(e.context||"")?!e.hasChanges:!1);St("#actions"),X(t,_=>{x(_)});async function x(_){if(!(!e.mols||!_)&&_!="default"){if(_=="select all")e.setSel(e.allIndices);else if(_=="deselect all")e.setSel([]);else if(_=="select matching")e.setSel(e.matchingIndices);else if(_=="invert selection"){const b=[...Array(e.total).keys()].filter(M=>!e.sel.includes(M));e.setSel(b)}await ee(),t.value="default"}}async function I(_){_=="remove selected"?e.removeMols(e.sel):_=="keep selected"?e.keepMols(e.sel):_=="copy to clipboard"?console.log("copy to clipboard"):_=="save as"&&a("molset-options"),await ee(),v.value="default"}return(_,o)=>{const b=P("cv-dropdown-item"),M=P("cv-dropdown");return n(),r("div",yt,[y(it),y(Ne,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=f=>c.value=f),total:s(e).pageTotal,max:3,disabled:s(e).pageTotal==1},null,8,["modelValue","total","disabled"]),wt,kt,y(dt,{id:"dd-sort",modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=f=>u.value=f),items:h.value,disabledItems:m.value},null,8,["modelValue","items","disabledItems"]),(n(),O(M,{id:"dd-select",modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=f=>t.value=f),key:C.value},{default:L(()=>[y(b,{value:"default",hidden:""},{default:L(()=>[s(e).hasSel?(n(),r($,{key:0},[g(" ("+S(s(e).sel.length)+") selected ",1)],64)):(n(),r($,{key:1},[g("Select")],64))]),_:1}),(n(),r($,null,R(k,(f,l)=>y(b,{key:l,value:f,disabled:f=="select matching"&&!s(e).searchStr},{default:L(()=>[g(S(f),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"])),Mt,y(M,{id:"dd-actions",modelValue:v.value,"onUpdate:modelValue":o[3]||(o[3]=f=>v.value=f),onChange:I},{default:L(()=>[y(b,{value:"default",hidden:""},{default:L(()=>[g("Actions")]),_:1}),(n(),r($,null,R(d,(f,l)=>y(b,{key:l,value:f,disabled:!s(e).hasSel&&f.includes("selected")},{default:L(()=>[g(S(f),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"]),y(gt,{disabled:p.value},null,8,["disabled"])])}}}),xt=q(bt,[["__scopeId","data-v-7ab0c37a"]]),Ct=i=>(W("data-v-c02068e2"),i=i(),Q(),i),It={id:"resp-container"},$t=["onClick"],Vt=Ct(()=>w("div",{class:"filler"},null,-1)),Bt={key:0,class:"idfr name",title:"name"},Dt={key:1,class:"idfr",title:"InChI"},Ft={key:2,class:"idfr",title:"InChIKey"},Lt={key:3,class:"idfr",title:"isomeric SMILES"},Tt={key:4,class:"idfr",title:"canonical SMILES"},Nt={key:5,class:"idfr",title:"SMILES"},Et={key:6,class:"idfr formula",title:"formula"},Rt=["href"],At={key:1,class:"props-wrap"},Pt=["title"],Ut=["onClick"],Gt=A({__name:"TheMolGrid",props:{retainCache:{type:Boolean}},setup(i){const e=le(),a=me(),t=j(),k=_e(),v=Z(),d=V(null),h=F(()=>{var b;const o=(b=d.value)==null?void 0:b.querySelector(".mol");return!d.value||!o?null:Math.round(d.value.clientWidth/o.clientWidth)});te(async()=>{document.addEventListener("keydown",I),a.setOnClickAnywhere(p),e.query.sort&&!["index","-index"].includes(e.query.sort)&&t.enableProp(e.query.sort.toString())}),$e(()=>{document.removeEventListener("keydown",I)});let m=V(null),C=V(null);function u(o,b){const M=o.target.classList.contains("idfr")||o.target.classList.contains("key")||o.target.classList.contains("value")||o.target.classList.contains("icn-btn");if(!t.hasSel&&M)return;t.toggleSel(b),t.setFocus(b);const f=t.getDisplayIndex(b);if(f===null)return;const l=f;if(o.shiftKey&&C.value!=null){if(t.hasSel&&m.value!==null){let B=Math.min(m.value,l),U=Math.max(m.value,l);const G=[];for(let K=B;K<U;K++)G.push(t.matchingIndices[K]);C.value?t.addSel(G):t.removeSel(G)}}else C.value=t.sel.includes(b);m.value=l}function c(){return!t.hasSel}function p(o){o.target.closest(".mol")||t.unsetFocus()}function x(o){const b=t.mols?t.mols[o]:null;b&&v.display("ModalMolPreview",b)}function I(o){var b,M;((b=document.activeElement)==null?void 0:b.tagName)!="INPUT"&&((M=document.activeElement)==null?void 0:M.tagName)!="TEXTAREA"&&o.key in _&&(_[o.key](),o.preventDefault())}const _={ArrowLeft:()=>{let o=t.focus;o!==null&&(o=o-1<0?o:o-1,t.setFocus(o))},ArrowRight:()=>{let o=t.focus;o===null||!t.mols||(o=o+1>t.mols.length-1?o:o+1,t.setFocus(o))},ArrowUp:()=>{let o=t.focus;o===null||!h.value||(o=o-h.value<0?o:o-h.value,t.setFocus(o))},ArrowDown:()=>{let o=t.focus;o===null||!h.value||!t.mols||(o=o+h.value>t.mols.length-1?o:o+h.value,t.setFocus(o))},Enter:()=>{let o=t.focus;o!==null&&t.toggleSel(o)},Escape:()=>{t.focus?t.unsetFocus():t.deselectAll(!0)}};return(o,b)=>{const M=P("cv-checkbox"),f=Ve("copy-on-click");return n(),r($,null,[y(Qe),y(xt),w("div",It,[w("div",{id:"mol-grid",ref_key:"$molGrid",ref:d,class:T({"sel-mode":s(t).hasSel})},[(n(!0),r($,null,R(s(t).mols,(l,B)=>{var U,G,K,ie,re,ce,de,ue,ve;return n(),r("div",{key:B,class:T(["mol",{focus:l.index==s(t).focus,sel:(U=s(t).sel)==null?void 0:U.includes(l.index)}]),onClick:D=>u(D,l.index)},[y(M,{label:`${l.index}`,value:`${l.index}`,checked:s(t).sel.includes(l.index)},null,8,["label","value","checked"]),y(lt,{id:`mol-svg-${l.index}`,structure:s(t).molSmiles[B],"sub-structure":s(t).highlight,width:190,height:140,"svg-mode":""},null,8,["id","structure","sub-structure"]),y(Ee,{mol:l},null,8,["mol"]),y(pe,{icon:"icn-smell",btnStyle:"soft",onClick:D=>c()?x(B):null},null,8,["onClick"]),y(pe,{icon:"icn-taste",btnStyle:"soft",onClick:D=>c()?s(k).setMolFromMolsetIndex(l.index):null},null,8,["onClick"]),Vt,(n(),r($,{key:0},[s(t).showIdentifiers.includes("name")&&((G=l==null?void 0:l.identifiers)!=null&&G.name)?N((n(),r("div",Bt,[g(S(l.identifiers.name),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("inchi")&&((K=l==null?void 0:l.identifiers)!=null&&K.inchi)?N((n(),r("div",Dt,[g(S(l.identifiers.inchi),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("inchikey")&&((ie=l==null?void 0:l.identifiers)!=null&&ie.inchikey)?N((n(),r("div",Ft,[g(S(l.identifiers.inchikey),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("isomeric_smiles")&&((re=l==null?void 0:l.identifiers)!=null&&re.isomeric_smiles)?N((n(),r("div",Lt,[g(S(l.identifiers.isomeric_smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("canonical_smiles")&&((ce=l==null?void 0:l.identifiers)!=null&&ce.canonical_smiles)?N((n(),r("div",Tt,[g(S(l.identifiers.canonical_smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("smiles")&&((de=l==null?void 0:l.identifiers)!=null&&de.smiles)?N((n(),r("div",Nt,[g(S(l.identifiers.smiles),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("molecular_formula")&&((ue=l==null?void 0:l.identifiers)!=null&&ue.molecular_formula)?N((n(),r("div",Et,[g(S(l.identifiers.molecular_formula),1)])),[[f,c]]):E("",!0),s(t).showIdentifiers.includes("cid")&&((ve=l==null?void 0:l.identifiers)!=null&&ve.cid)?N((n(),r("a",{key:7,href:`https://pubchem.ncbi.nlm.nih.gov/compound/${l.identifiers.cid}`,target:"_blank",class:"idfr",title:"PubChem CID"},[g(S(l.identifiers.cid),1)],8,Rt)),[[f,c]]):E("",!0)],64)),s(t).showProps.length?(n(),r("div",At,[(n(!0),r($,null,R(s(t).showProps,(D,we)=>(n(),r("div",{key:we,class:"prop",title:`${D}:
${l.properties[D]||l.properties[D]===0?l.properties[D]:"-"}`},[w("div",{class:"key",onClick:zt=>s(t).setSort(D)},S(s(Y)(D)),9,Ut),N((n(),r("div",{class:T(["value",{empty:!l.properties[D]&&l.properties[D]!==0}])},[g(S(l.properties[D]||l.properties[D]===0?l.properties[D]:"-"),1)],2)),[[f,c]])],8,Pt))),128))])):E("",!0)],10,$t)}),128))],2)])],64)}}}),Kt=q(Gt,[["__scopeId","data-v-c02068e2"]]),Qt=A({__name:"MolsetViewer",props:{retainCache:{type:Boolean}},setup(i){const e=se(),a=le(),t=me(),k=oe(),v=j(),d=_e(),h=Z(),m=i;C(),window.onbeforeunload=function(){if(v.hasChanges)return!0;m.retainCache||v.clear()},Be(c),De(c),X(()=>a.query,()=>{C(),v.parseUrlQuery()});function C(){const p=e.currentRoute.value.query;if(p!=null&&p.show){const x=Number(p.show);x!=d.molFromMolsetIndex&&d.setMolFromMolsetIndex(x,!0),u(v.cacheId,x)}else d.setMolFromMolsetIndex(null,!0)}function u(p=null,x){p&&Fe(Le.getMolDataFromMolset(p,x),{onSuccess:I=>{d.setMolData(I);const _=d.inchi||d.smiles;_&&d.fetchMolVizData(_)},onError:I=>{console.log("Error in getMolDataFromMolset()",I)}})}async function c(p,x,I){v.hasChanges?(t.setBlockRouting(!0),await h.alert("If you leave, all molset changes will be lost.",{title:"Unsaved molset changes",primaryBtn:"Stay",secondaryBtn:"Discard",onCancel:()=>{p.path!=x.path&&!m.retainCache&&v.clear(),v.setHasChanges(!1),t.setBlockRouting(!1),I()},onSubmit:()=>{I(!1)}})):(p.path!=x.path&&!m.retainCache&&v.clear(),I())}return(p,x)=>!s(t).blockRouting&&s(d).molFromMolset?(n(),O(Re,{key:0,context:"molset"})):(n(),r($,{key:1},[s(k).active?(n(),O(Te,{key:0,pathArray:s(k).breadCrumbPathArray},{default:L(()=>[s(v).resultCount<s(v).total?(n(),r($,{key:0},[g(" Showing "+S(s(z)(s(v).resultCount))+" / "+S(s(z)(s(v).total)),1)],64)):(n(),r($,{key:1},[g("Total: "+S(s(z)(s(v).total)),1)],64))]),_:1},8,["pathArray"])):(n(),O(Ae,{key:1,collapsed:!0},{default:L(()=>[s(v).resultCount<s(v).total?(n(),r($,{key:0},[g(" Showing "+S(s(z)(s(v).resultCount))+" / "+S(s(z)(s(v).total)),1)],64)):(n(),r($,{key:1},[g("Total: "+S(s(z)(s(v).total)),1)],64))]),_:1})),y(Kt,{retainCache:p.retainCache},null,8,["retainCache"])],64))}});export{Qt as _};
