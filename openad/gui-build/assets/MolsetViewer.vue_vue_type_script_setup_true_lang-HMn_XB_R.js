import{d as R,r as V,i as a,j as r,x as w,T,a5 as ve,p as y,H as fe,F as $,L as N,M as L,k as s,t as S,a6 as Y,C as W,D as Q,E as O,a7 as ke,e as D,G as te,a8 as Me,w as X,Z as j,v as _,X as ee,h as P,a9 as be,aa as xe,q as F,l as z,u as se,K as Z,b as le,a1 as Ce,n as E,ab as Ie,a as pe,J as me,c as _e,o as $e,R as Ve,I as he,a3 as Be,a4 as De,f as Fe,A as Le,ac as K}from"./index-JP_UVOjq.js";import{u as q}from"./MolGridStore-Ckkbjks1.js";import{B as Te}from"./BreadCrumbs-EbsX7ctM.js";import{u as ge,B as Ee,a as Ne,M as Re,b as Ae}from"./MolViewer-b2c_S2ci.js";import{i as Pe}from"./initRDKit-FDLbkFFb.js";import{C as Ue,c as Se}from"./16-UIuP6YkB.js";const oe=i=>(W("data-v-cfb05a99"),i=i(),Q(),i),Ge=oe(()=>w("div",null,"Identifiers & properties",-1)),Ke={class:"content"},ze=oe(()=>w("h4",null,"Identifiers",-1)),Oe={class:"item-wrap"},qe=["onClick"],je=oe(()=>w("h4",null,"Properties",-1)),Je={class:"item-wrap"},He=["onClick"],We=R({__name:"TheMolProps",setup(i){const e=q(),n=V(!1);function t(){n.value=!n.value}return(k,u)=>(a(),r("div",{id:"properties",class:L({expand:n.value})},[w("div",{class:"header",onClick:t},[Ge,T(y(fe,{icon:"icn-chevron-up"},null,512),[[ve,n.value]]),T(y(fe,{icon:"icn-chevron-down"},null,512),[[ve,!n.value]])]),w("div",Ke,[ze,w("div",Oe,[(a(!0),r($,null,N(s(e).availIdentifiers,(c,f)=>(a(),r("div",{key:f,class:L(["item",{sel:s(e).showIdentifiers.includes(c)}]),onClick:M=>s(e).toggleIdentifier(c)},S(s(Y)(c)),11,qe))),128))]),je,w("div",Je,[(a(!0),r($,null,N(s(e).availProps,(c,f)=>(a(),r("div",{key:f,class:L(["item",{sel:s(e).showProps.includes(c)}]),onClick:M=>s(e).toggleProp(c)},S(s(Y)(c)),11,He))),128))])])],2))}}),Qe=O(We,[["__scopeId","data-v-cfb05a99"]]);function Xe(i){const e=window.RDKit.get_mol(i||"invalid"),n=H(e);return e==null||e.delete(),n}function H(i){return!!i}const Ze=w("br",null,null,-1),Ye=["title"],et=w("br",null,null,-1),tt=["innerHTML"],st=["title","id","width","height"],lt=R({__name:"MolRender2D",props:{id:{type:String,required:!0},className:{type:String,default:""},svgMode:{type:Boolean,default:!1},width:{type:Number,default:250},height:{type:Number,default:200},structure:{type:String,required:!0},subStructure:{type:String,default:""},extraDetails:{type:Object,default:()=>{}},drawingDelay:{type:Number,default:void 0}},setup(i){const e=i;let n=V(!1),t=V(!1);V(!1);let k=ke({width:e.width,height:e.height,bondLineWidth:2,addStereoAnnotation:!0,...e.extraDetails}),u=V("");const c=D(()=>{const v={};return e.width&&(v.width=e.width+"px"),e.height&&(v.height=e.height+"px"),v});te(()=>{Pe().then(()=>{n.value=!0;try{x()}catch(v){console.error(v)}}).catch(v=>{console.error(v),t.value=!0})}),Me(()=>{!t.value&&n.value&&e.svgMode}),X(e,()=>x());function f(v,d){if(H(v)&&H(d)){const p=JSON.parse((v==null?void 0:v.get_substruct_matches(d))||""),b=p&&typeof p[0]=="object"?p.reduce((C,{atoms:g,bonds:o})=>({atoms:[...C.atoms,...g],bonds:[...C.bonds,...o]}),{atoms:[],bonds:[]}):p;return JSON.stringify({...k,...e.extraDetails||{},...b})}else return JSON.stringify({...k,...e.extraDetails||{}})}async function M(){const v=window.RDKit.get_mol(e.structure||"invalid"),d=window.RDKit.get_qmol(e.subStructure||"invalid"),p=H(v);if(e.svgMode&&p){const b=v.get_svg_with_highlights(f(v,d));u.value=b}else if(p){await ee();const b=document.getElementById(e.id);v.draw_to_canvas_with_highlights(b,f(v,d))}v==null||v.delete(),d==null||d.delete()}function x(){e.drawingDelay?setTimeout(()=>M(),e.drawingDelay):M()}return(v,d)=>s(n)?s(t)?(a(),r("div",{key:1,class:"placeholder error-msg",style:j(c.value)},[_("RDKit"),Ze,_("Error")],4)):s(Xe)(i.structure)?i.svgMode?(a(),r("div",{key:3,class:L(`svg-wrap ${i.className}`),style:j(c.value),innerHTML:s(u)},null,14,tt)):(a(),r("div",{key:4,class:L(`molecule-canvas-container ${i.className}`)},[w("canvas",{title:i.structure,id:i.id,width:i.width,height:i.height},null,8,st)],2)):(a(),r("div",{key:2,title:`Cannot render structure: ${i.structure}`,class:"placeholder error-msg",style:j(c.value)},[_(" Invalid"),et,_("mol string ")],12,Ye)):(a(),r("div",{key:0,class:"placeholder",style:j(c.value)},"Loading renderer",4))}}),ot={id:"search-wrap"},at={class:"toggle"},nt=R({__name:"MolSearch",setup(i){const e=q(),n=D({get:()=>e.searchStr,set:e.setSearchStr});return(t,k)=>{const u=P("cv-search");return a(),r("div",ot,[y(u,{modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=c=>n.value=c),label:"TextSmarts",size:"lg",type:"text",placeholder:"Search "+s(e).searchMode,"hide-label":!0},null,8,["modelValue","placeholder"]),w("div",at,[w("div",{class:L(["close",{show:s(e).searchStr.length>0}]),onClick:k[1]||(k[1]=c=>s(e).setSearchStr(""))},[y(s(Ue))],2),w("div",{class:L(["option op-text",{sel:s(e).searchMode=="text"}]),onClick:k[2]||(k[2]=c=>s(e).setSearchMode("text"))},null,2),w("div",{class:L(["option op-smarts",{sel:s(e).searchMode=="smarts"}]),onClick:k[3]||(k[3]=c=>s(e).setSearchMode("smarts"))},null,2)])])}}}),it=O(nt,[["__scopeId","data-v-6fca3c82"]]),rt={class:"sort-wrap"},ct=R({__name:"SortDropdown",props:be({items:{},disabledItems:{},default:{default:"index"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const e=i,n=xe(i,"modelValue"),t=D(()=>!!n.value&&n.value[0]==="-"),k=D({get:()=>{var f;return((f=n.value)==null?void 0:f.replace(/^-/,""))||""},set:f=>{var M;f!=((M=n.value)==null?void 0:M.replace(/^-/,""))&&(console.log("set"),n.value=f)}}),u=D(()=>!n.value||["index","-index"].includes(n.value));function c(){n.value==`-${e.default}`?n.value="":n.value?n.value=n.value[0]==="-"?n.value.slice(1):`-${n.value}`:n.value=`-${e.default}`}return(f,M)=>{const x=P("cv-dropdown-item"),v=P("cv-dropdown");return a(),r("div",rt,[w("div",{class:"sort-direction",onClick:c},S(t.value?"↑":"↓"),1),y(v,{modelValue:k.value,"onUpdate:modelValue":M[0]||(M[0]=d=>k.value=d),class:L(["dd-sort",{blank:u.value}])},{default:F(()=>[y(x,{value:""},{default:F(()=>[_(" ")]),_:1}),(a(!0),r($,null,N(f.items,(d,p)=>(a(),z(x,{key:p,value:d},{default:F(()=>[_(S(d),1)]),_:2},1032,["value"]))),128)),y(x,{value:e.default,hidden:""},{default:F(()=>[_(" ")]),_:1},8,["value"]),(a(!0),r($,null,N(f.disabledItems,(d,p)=>(a(),z(x,{key:p,value:d,disabled:"",title:d},{default:F(()=>[_(S(d),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["modelValue","class"])])}}}),dt=O(ct,[["__scopeId","data-v-6ea047d0"]]),ut=Se("CheckmarkFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}},{elem:"path",attrs:{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}}]),vt=Se("ErrorFilled16",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z"}},{elem:"path",attrs:{fill:"none",d:"M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z","data-icon-path":"inner-path",opacity:"0"}}]),ye=i=>(W("data-v-730d319a"),i=i(),Q(),i),ft={class:"btn-wrap"},ht=ye(()=>w("option",{value:"",hidden:""},null,-1)),pt=ye(()=>w("option",{value:"as-molset"},"Save as molset JSON",-1)),mt={value:"update-original"},_t=R({__name:"TheButtonSaveMolset",props:{disabled:{type:Boolean,default:!1}},setup(i){se();const e=q();Z();const n=le(),t=ge(),k=["result-mols","my-mols"].includes(e.context||"")?"Update":"Save",u=V(!1),c=V(!1),f=V(!1),M=V(null),x=V(null),v=V(""),d=i,p=D(()=>{var m;return(m=e.context)==null?void 0:m.match(/-file$/)}),b=D(()=>x.value?{width:x.value+"px"}:{});X(v,m=>{m&&C(m),setTimeout(()=>v.value="",1)});async function C(m){var I,h;u.value=!0,x.value=((h=(I=M.value)==null?void 0:I.$el)==null?void 0:h.offsetWidth)??null;try{let l=!1;p.value?m=="as-molset"?l=await t("molset-json"):m=="update-original"&&(l=await o()):l=await g(),u.value=!1,l&&(f.value=!0,setTimeout(()=>{f.value=!1},2e3))}catch(l){console.error(l),u.value=!1,c.value=!0,setTimeout(()=>{c.value=!1},2e3)}}function g(){return e.context=="json"?e.updateMolset():e.context=="my-mols"?e.updateMolset_mymols():e.context=="result-mols"?e.updateMolset_result():Promise.resolve(!1)}async function o(){return e.context=="sdf-file"?e.saveMolsetAsSDF(n.path,{newFile:!1}):e.context=="csv-file"?e.saveMolsetAsCSV(n.path,{newFile:!1}):e.context=="smi-file"?e.saveMolsetAsSmiles(n.path,{newFile:!1}):Promise.resolve(!1)}return(m,I)=>{var l;const h=P("cv-button");return a(),r("div",ft,[y(h,{ref_key:"$btn",ref:M,size:"field",onClick:C,disabled:d.disabled&&!f.value,class:L({loading:u.value,error:c.value,success:f.value}),style:j(b.value),icon:c.value?s(vt):f.value?s(ut):null},{default:F(()=>[_(S(s(k)),1)]),_:1},8,["disabled","class","style","icon"]),p.value?T((a(),r("select",{key:0,"onUpdate:modelValue":I[0]||(I[0]=A=>v.value=A)},[ht,pt,w("option",mt,"Update original "+S((l=s(e).context)==null?void 0:l.split("-")[0].toUpperCase()),1)],512)),[[Ce,v.value]]):E("",!0)])}}}),gt=O(_t,[["__scopeId","data-v-730d319a"]]);function St(i){let e;te(()=>{const n=document.querySelector(i);n&&(e=new IntersectionObserver(([t])=>t.target.classList.toggle("sticky",t.intersectionRatio<1),{rootMargin:"-1px 0px 0px 0px",threshold:[1]}),e.observe(n))}),Ie(()=>{const n=document.querySelector(i);n&&e.unobserve(n)})}const ae=i=>(W("data-v-7ab0c37a"),i=i(),Q(),i),yt={id:"actions"},wt=ae(()=>w("div",{class:"breaker-1"},null,-1)),kt=ae(()=>w("div",{class:"filler"},null,-1)),Mt=ae(()=>w("div",{class:"breaker-2"},null,-1)),bt=R({__name:"TheMolGridActions",setup(i){se();const e=q();le(),Z();const n=ge(),t=V("default"),k=["select all","deselect all","select matching","invert selection"],u=V("default"),c=["remove selected","keep selected","copy selected","save as"],f=D(()=>["name"].concat(e.showProps)),M=D(()=>f.value.length<=2?["activate properties to sort"]:[]),x=D(()=>e.sel.join("-")),v=D({get:()=>e.sort,set:g=>e.setSort(g)}),d=D({get:()=>e.page,set:e.setPage}),p=D(()=>["result-mols","my-mols","json"].includes(e.context||"")?!e.hasChanges:!1);St("#actions"),X(t,g=>{b(g)});async function b(g){if(!(!e.mols||!g)&&g!="default"){if(g=="select all")e.setSel(e.allIndices);else if(g=="deselect all")e.setSel([]);else if(g=="select matching")e.setSel(e.matchingIndices);else if(g=="invert selection"){const m=[...Array(e.total).keys()].filter(I=>!e.sel.includes(I));e.setSel(m)}await ee(),t.value="default"}}async function C(g){g=="remove selected"?e.removeMols(e.sel):g=="keep selected"?e.keepMols(e.sel):g=="copy to clipboard"?console.log("copy to clipboard"):g=="save as"&&n("molset-options"),await ee(),u.value="default"}return(g,o)=>{const m=P("cv-dropdown-item"),I=P("cv-dropdown");return a(),r("div",yt,[y(it),y(Ee,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=h=>d.value=h),total:s(e).pageTotal,max:3,disabled:s(e).pageTotal==1},null,8,["modelValue","total","disabled"]),wt,kt,y(dt,{id:"dd-sort",modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=h=>v.value=h),items:f.value,disabledItems:M.value},null,8,["modelValue","items","disabledItems"]),(a(),z(I,{id:"dd-select",modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=h=>t.value=h),key:x.value},{default:F(()=>[y(m,{value:"default",hidden:""},{default:F(()=>[s(e).hasSel?(a(),r($,{key:0},[_(" ("+S(s(e).sel.length)+") selected ",1)],64)):(a(),r($,{key:1},[_("Select")],64))]),_:1}),(a(),r($,null,N(k,(h,l)=>y(m,{key:l,value:h,disabled:h=="select matching"&&!s(e).searchStr},{default:F(()=>[_(S(h),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"])),Mt,y(I,{id:"dd-actions",modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=h=>u.value=h),onChange:C},{default:F(()=>[y(m,{value:"default",hidden:""},{default:F(()=>[_("Actions")]),_:1}),(a(),r($,null,N(c,(h,l)=>y(m,{key:l,value:h,disabled:!s(e).hasSel&&h.includes("selected")},{default:F(()=>[_(S(h),1)]),_:2},1032,["value","disabled"])),64))]),_:1},8,["modelValue"]),y(gt,{disabled:p.value},null,8,["disabled"])])}}}),xt=O(bt,[["__scopeId","data-v-7ab0c37a"]]),Ct=i=>(W("data-v-c02068e2"),i=i(),Q(),i),It={id:"resp-container"},$t=["onClick"],Vt=Ct(()=>w("div",{class:"filler"},null,-1)),Bt={key:0,class:"idfr name",title:"name"},Dt={key:1,class:"idfr",title:"InChI"},Ft={key:2,class:"idfr",title:"InChIKey"},Lt={key:3,class:"idfr",title:"isomeric SMILES"},Tt={key:4,class:"idfr",title:"canonical SMILES"},Et={key:5,class:"idfr",title:"SMILES"},Nt={key:6,class:"idfr formula",title:"formula"},Rt=["href"],At={key:1,class:"props-wrap"},Pt=["title"],Ut=["onClick"],Gt=R({__name:"TheMolGrid",props:{retainCache:{type:Boolean}},setup(i){const e=pe(),n=me(),t=q(),k=_e(),u=Z(),c=V(null),f=D(()=>{var m;const o=(m=c.value)==null?void 0:m.querySelector(".mol");return!c.value||!o?null:Math.round(c.value.clientWidth/o.clientWidth)});te(async()=>{document.addEventListener("keydown",C),n.setOnClickAnywhere(p),e.query.sort&&!["index","-index"].includes(e.query.sort)&&t.enableProp(e.query.sort.toString())}),$e(()=>{document.removeEventListener("keydown",C)});let M=V(null),x=V(null);function v(o,m){const I=o.target.classList.contains("idfr")||o.target.classList.contains("key")||o.target.classList.contains("value")||o.target.classList.contains("icn-btn");if(!t.hasSel&&I)return;t.toggleSel(m),t.setFocus(m);const h=t.getDisplayIndex(m);if(h===null)return;const l=h;if(o.shiftKey&&x.value!=null){if(t.hasSel&&M.value!==null){let A=Math.min(M.value,l),J=Math.max(M.value,l);const U=[];for(let G=A;G<J;G++)U.push(t.matchingIndices[G]);x.value?t.addSel(U):t.removeSel(U)}}else x.value=t.sel.includes(m);M.value=l}function d(){return!t.hasSel}function p(o){o.target.closest(".mol")||t.unsetFocus()}function b(o){const m=t.mols?t.mols[o]:null;m&&u.display("ModalMolPreview",m)}function C(o){var m,I;((m=document.activeElement)==null?void 0:m.tagName)!="INPUT"&&((I=document.activeElement)==null?void 0:I.tagName)!="TEXTAREA"&&o.key in g&&(g[o.key](),o.preventDefault())}const g={ArrowLeft:()=>{let o=t.focus;o!==null&&(o=o-1<0?o:o-1,t.setFocus(o))},ArrowRight:()=>{let o=t.focus;o===null||!t.mols||(o=o+1>t.mols.length-1?o:o+1,t.setFocus(o))},ArrowUp:()=>{let o=t.focus;o===null||!f.value||(o=o-f.value<0?o:o-f.value,t.setFocus(o))},ArrowDown:()=>{let o=t.focus;o===null||!f.value||!t.mols||(o=o+f.value>t.mols.length-1?o:o+f.value,t.setFocus(o))},Enter:()=>{let o=t.focus;o!==null&&t.toggleSel(o)},Escape:()=>{t.focus?t.unsetFocus():t.deselectAll(!0)}};return(o,m)=>{const I=P("cv-checkbox"),h=Ve("copy-on-click");return a(),r($,null,[y(Qe),y(xt),w("div",It,[w("div",{id:"mol-grid",ref_key:"$molGrid",ref:c,class:L({"sel-mode":s(t).hasSel})},[(a(!0),r($,null,N(s(t).mols,(l,A)=>{var J,U,G,ne,ie,re,ce,de,ue;return a(),r("div",{key:A,class:L(["mol",{focus:l.index==s(t).focus,sel:(J=s(t).sel)==null?void 0:J.includes(l.index)}]),onClick:B=>v(B,l.index)},[y(I,{label:`${l.index}`,value:`${l.index}`,checked:s(t).sel.includes(l.index)},null,8,["label","value","checked"]),y(lt,{id:`mol-svg-${l.index}`,structure:s(t).molSmiles[A],"sub-structure":s(t).highlight,width:190,height:140,"svg-mode":""},null,8,["id","structure","sub-structure"]),y(Ne,{mol:l},null,8,["mol"]),y(he,{icon:"icn-smell",btnStyle:"soft",onClick:B=>d()?b(A):null},null,8,["onClick"]),y(he,{icon:"icn-taste",btnStyle:"soft",onClick:B=>d()?s(k).setMolFromMolsetIndex(l.index):null},null,8,["onClick"]),Vt,(a(),r($,{key:0},[s(t).showIdentifiers.includes("name")&&((U=l==null?void 0:l.identifiers)!=null&&U.name)?T((a(),r("div",Bt,[_(S(l.identifiers.name),1)])),[[h,d]]):E("",!0),s(t).showIdentifiers.includes("inchi")&&((G=l==null?void 0:l.identifiers)!=null&&G.inchi)?T((a(),r("div",Dt,[_(S(l.identifiers.inchi),1)])),[[h,d]]):E("",!0),s(t).showIdentifiers.includes("inchikey")&&((ne=l==null?void 0:l.identifiers)!=null&&ne.inchikey)?T((a(),r("div",Ft,[_(S(l.identifiers.inchikey),1)])),[[h,d]]):E("",!0),s(t).showIdentifiers.includes("isomeric_smiles")&&((ie=l==null?void 0:l.identifiers)!=null&&ie.isomeric_smiles)?T((a(),r("div",Lt,[_(S(l.identifiers.isomeric_smiles),1)])),[[h,d]]):E("",!0),s(t).showIdentifiers.includes("canonical_smiles")&&((re=l==null?void 0:l.identifiers)!=null&&re.canonical_smiles)?T((a(),r("div",Tt,[_(S(l.identifiers.canonical_smiles),1)])),[[h,d]]):E("",!0),s(t).showIdentifiers.includes("smiles")&&((ce=l==null?void 0:l.identifiers)!=null&&ce.smiles)?T((a(),r("div",Et,[_(S(l.identifiers.smiles),1)])),[[h,d]]):E("",!0),s(t).showIdentifiers.includes("molecular_formula")&&((de=l==null?void 0:l.identifiers)!=null&&de.molecular_formula)?T((a(),r("div",Nt,[_(S(l.identifiers.molecular_formula),1)])),[[h,d]]):E("",!0),s(t).showIdentifiers.includes("cid")&&((ue=l==null?void 0:l.identifiers)!=null&&ue.cid)?T((a(),r("a",{key:7,href:`https://pubchem.ncbi.nlm.nih.gov/compound/${l.identifiers.cid}`,target:"_blank",class:"idfr",title:"PubChem CID"},[_(S(l.identifiers.cid),1)],8,Rt)),[[h,d]]):E("",!0)],64)),s(t).showProps.length?(a(),r("div",At,[(a(!0),r($,null,N(s(t).showProps,(B,we)=>(a(),r("div",{key:we,class:"prop",title:`${B}:
${l.properties[B]||l.properties[B]===0?l.properties[B]:"-"}`},[w("div",{class:"key",onClick:zt=>s(t).setSort(B)},S(s(Y)(B)),9,Ut),T((a(),r("div",{class:L(["value",{empty:!l.properties[B]&&l.properties[B]!==0}])},[_(S(l.properties[B]||l.properties[B]===0?l.properties[B]:"-"),1)],2)),[[h,d]])],8,Pt))),128))])):E("",!0)],10,$t)}),128))],2)])],64)}}}),Kt=O(Gt,[["__scopeId","data-v-c02068e2"]]),Qt=R({__name:"MolsetViewer",props:{retainCache:{type:Boolean}},setup(i){const e=se(),n=pe(),t=me(),k=le(),u=q(),c=_e(),f=Z(),M=i;x(),window.onbeforeunload=function(){if(u.hasChanges)return!0;M.retainCache||u.clear()},Be(d),De(d),X(()=>n.query,()=>{x(),u.parseUrlQuery()});function x(){const p=e.currentRoute.value.query;if(p!=null&&p.show){const b=Number(p.show);b!=c.molFromMolsetIndex&&c.setMolFromMolsetIndex(b,!0),v(u.cacheId,b)}else c.setMolFromMolsetIndex(null,!0)}function v(p=null,b){p&&Fe(Le.getMolDataFromMolset(p,b),{onSuccess:C=>{c.setMolData(C);const g=c.inchi||c.smiles;g&&c.fetchMolVizData(g)},onError:C=>{console.log("Error in getMolDataFromMolset()",C)}})}async function d(p,b,C){u.hasChanges?(t.setBlockRouting(!0),await f.alert("If you leave, all molset changes will be lost.",{title:"Unsaved molset changes",primaryBtn:"Stay",secondaryBtn:"Discard",onCancel:()=>{p.path!=b.path&&!M.retainCache&&u.clear(),u.setHasChanges(!1),t.setBlockRouting(!1),C()},onSubmit:()=>{C(!1)}})):(p.path!=b.path&&!M.retainCache&&u.clear(),C())}return(p,b)=>!s(t).blockRouting&&s(c).molFromMolset?(a(),z(Re,{key:0,context:"molset"})):(a(),r($,{key:1},[s(k).active?(a(),z(Te,{key:0,pathArray:s(k).breadCrumbPathArray},{default:F(()=>[s(u).resultCount<s(u).total?(a(),r($,{key:0},[_(" Showing "+S(s(K)(s(u).resultCount))+" / "+S(s(K)(s(u).total)),1)],64)):(a(),r($,{key:1},[_("Total: "+S(s(K)(s(u).total)),1)],64))]),_:1},8,["pathArray"])):(a(),z(Ae,{key:1,collapsed:!0},{default:F(()=>[s(u).resultCount<s(u).total?(a(),r($,{key:0},[_(" Showing "+S(s(K)(s(u).resultCount))+" / "+S(s(K)(s(u).total)),1)],64)):(a(),r($,{key:1},[_("Total: "+S(s(K)(s(u).total)),1)],64))]),_:1})),y(Kt,{retainCache:p.retainCache},null,8,["retainCache"])],64))}});export{Qt as _};
