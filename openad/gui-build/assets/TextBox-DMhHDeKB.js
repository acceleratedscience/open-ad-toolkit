import{d as _,R as b,r as f,U as w,c as A,H as D,w as x,h as c,i as u,F as h,A as m,S as E,t as S,E as T}from"./index-C4atIFxU.js";const W=_({__name:"TextBox",props:{textData:{}},setup(v){const y=b(),d=v,o=f(null),r=f(0),{screenWidth:g}=w(y),C=A(()=>{if(!d.textData)return[];let t=String(d.textData).split(`
`);if(!r.value)return t;const n=new Array;return t.forEach(s=>{for(n.push([]);s.length>r.value;){let e=s.slice(0,r.value+1),a=r.value;if(e[e.length-1]==" ")e=e.slice(0,e.length-1);else{let l=[...e.matchAll(/\s/g)],i=l.length>0?l[l.length-1].index:-1;i&&i>0&&(a=i),e=e.slice(0,a)}n[n.length-1].push(e),s=s.slice(a+1)}n[n.length-1].push(s)}),n});function p(){if(!o.value)return 0;const t=o.value.cloneNode(!0);t.innerHTML="",t.style.width=o.value.offsetWidth+"px",t.style.position="absolute",t.style.top="-1000px",t.style.opacity="0";const n=document.createElement("div"),s=document.createElement("span");n.appendChild(s),t.appendChild(n),document.body.appendChild(t);const e=o.value.children[0];e&&e.getAttributeNames().forEach(i=>{n.setAttribute(i,e.getAttribute(i))});let a=0;const l=91;for(;s.offsetWidth+l<o.value.offsetWidth;)s.innerText+="m",a++;document.body.removeChild(t),r.value=a-1}return D(()=>p()),x(()=>d.textData,()=>p()),x(g,()=>p()),(t,n)=>(c(),u("pre",{ref_key:"$textContent",ref:o,class:"text-box"},[(c(!0),u(h,null,m(C.value,(s,e)=>(c(),u(h,{key:e},[(c(!0),u(h,null,m(s,(a,l)=>(c(),u("div",{key:l,class:E({"new-line":l===0})},S(a),3))),128))],64))),128))],512))}}),B=T(W,[["__scopeId","data-v-5b6bed76"]]);export{B as T};
